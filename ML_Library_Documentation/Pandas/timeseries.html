
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Time Series / Date functionality &#8212; pandas 0.22.0 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.22.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Time Deltas" href="timedeltas.html" />
    <link rel="prev" title="Reshaping and Pivot Tables" href="reshaping.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="timedeltas.html" title="Time Deltas"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="reshaping.html" title="Reshaping and Pivot Tables"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pandas 0.22.0 documentation</a> &#187;</li> 
      </ul>
    </div>
<div class="content-wrapper">
    <div class="content">
        <div class="document">
            <div class="sphinxsidebar">
                <h3>Table Of Contents</h3>
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="whatsnew.html">What&#8217;s New</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Package overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="10min.html">10 Minutes to pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="cookbook.html">Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="dsintro.html">Intro to Data Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="basics.html">Essential Basic Functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="text.html">Working with Text Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="options.html">Options and Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="indexing.html">Indexing and Selecting Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">MultiIndex / Advanced Indexing</a></li>
<li class="toctree-l1"><a class="reference internal" href="computation.html">Computational tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="missing_data.html">Working with missing data</a></li>
<li class="toctree-l1"><a class="reference internal" href="groupby.html">Group By: split-apply-combine</a></li>
<li class="toctree-l1"><a class="reference internal" href="merging.html">Merge, join, and concatenate</a></li>
<li class="toctree-l1"><a class="reference internal" href="reshaping.html">Reshaping and Pivot Tables</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Time Series / Date functionality</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#timestamps-vs-time-spans">Timestamps vs. Time Spans</a></li>
<li class="toctree-l2"><a class="reference internal" href="#converting-to-timestamps">Converting to Timestamps</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#providing-a-format-argument">Providing a Format Argument</a></li>
<li class="toctree-l3"><a class="reference internal" href="#assembling-datetime-from-multiple-dataframe-columns">Assembling Datetime from Multiple DataFrame Columns</a></li>
<li class="toctree-l3"><a class="reference internal" href="#invalid-data">Invalid Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#epoch-timestamps">Epoch Timestamps</a></li>
<li class="toctree-l3"><a class="reference internal" href="#from-timestamps-to-epoch">From Timestamps to Epoch</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-the-origin-parameter">Using the <code class="docutils literal"><span class="pre">origin</span></code> Parameter</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#generating-ranges-of-timestamps">Generating Ranges of Timestamps</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#custom-frequency-ranges">Custom Frequency Ranges</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#timestamp-limitations">Timestamp Limitations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#indexing">Indexing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#partial-string-indexing">Partial String Indexing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#slice-vs-exact-match">Slice vs. Exact Match</a></li>
<li class="toctree-l3"><a class="reference internal" href="#exact-indexing">Exact Indexing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#truncating-fancy-indexing">Truncating &amp; Fancy Indexing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#time-date-components">Time/Date Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dateoffset-objects">DateOffset Objects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#parametric-offsets">Parametric Offsets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-offsets-with-series-datetimeindex">Using Offsets with <code class="docutils literal"><span class="pre">Series</span></code> / <code class="docutils literal"><span class="pre">DatetimeIndex</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#custom-business-days">Custom Business Days</a></li>
<li class="toctree-l3"><a class="reference internal" href="#business-hour">Business Hour</a></li>
<li class="toctree-l3"><a class="reference internal" href="#custom-business-hour">Custom Business Hour</a></li>
<li class="toctree-l3"><a class="reference internal" href="#offset-aliases">Offset Aliases</a></li>
<li class="toctree-l3"><a class="reference internal" href="#combining-aliases">Combining Aliases</a></li>
<li class="toctree-l3"><a class="reference internal" href="#anchored-offsets">Anchored Offsets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#anchored-offset-semantics">Anchored Offset Semantics</a></li>
<li class="toctree-l3"><a class="reference internal" href="#holidays-holiday-calendars">Holidays / Holiday Calendars</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#time-series-related-instance-methods">Time Series-Related Instance Methods</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#shifting-lagging">Shifting / Lagging</a></li>
<li class="toctree-l3"><a class="reference internal" href="#frequency-conversion">Frequency Conversion</a></li>
<li class="toctree-l3"><a class="reference internal" href="#filling-forward-backward">Filling Forward / Backward</a></li>
<li class="toctree-l3"><a class="reference internal" href="#converting-to-python-datetimes">Converting to Python Datetimes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#resampling">Resampling</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#basics">Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="#upsampling">Upsampling</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sparse-resampling">Sparse Resampling</a></li>
<li class="toctree-l3"><a class="reference internal" href="#aggregation">Aggregation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#time-span-representation">Time Span Representation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#period">Period</a></li>
<li class="toctree-l3"><a class="reference internal" href="#periodindex-and-period-range">PeriodIndex and period_range</a></li>
<li class="toctree-l3"><a class="reference internal" href="#period-dtypes">Period Dtypes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#periodindex-partial-string-indexing">PeriodIndex Partial String Indexing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#frequency-conversion-and-resampling-with-periodindex">Frequency Conversion and Resampling with PeriodIndex</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#converting-between-representations">Converting Between Representations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#representing-out-of-bounds-spans">Representing Out-of-Bounds Spans</a></li>
<li class="toctree-l2"><a class="reference internal" href="#time-zone-handling">Time Zone Handling</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#working-with-time-zones">Working with Time Zones</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ambiguous-times-when-localizing">Ambiguous Times when Localizing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tz-aware-dtypes">TZ Aware Dtypes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="timedeltas.html">Time Deltas</a></li>
<li class="toctree-l1"><a class="reference internal" href="categorical.html">Categorical Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualization.html">Visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="style.html">Styling</a></li>
<li class="toctree-l1"><a class="reference internal" href="io.html">IO Tools (Text, CSV, HDF5, ...)</a></li>
<li class="toctree-l1"><a class="reference internal" href="remote_data.html">Remote Data Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="enhancingperf.html">Enhancing Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="sparse.html">Sparse data structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="gotchas.html">Frequently Asked Questions (FAQ)</a></li>
<li class="toctree-l1"><a class="reference internal" href="r_interface.html">rpy2 / R interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="ecosystem.html">pandas Ecosystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="comparison_with_r.html">Comparison with R / R libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="comparison_with_sql.html">Comparison with SQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="comparison_with_sas.html">Comparison with SAS</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer.html">Developer</a></li>
<li class="toctree-l1"><a class="reference internal" href="internals.html">Internals</a></li>
<li class="toctree-l1"><a class="reference internal" href="release.html">Release Notes</a></li>
</ul>

                <h3 style="margin-top: 1.5em;">Search</h3>

                <form class="search" action="search.html" method="get">
                    <input type="text" name="q" size="18"/>
                    <input type="submit" value="Go"/>
                    <input type="hidden" name="check_keywords" value="yes"/>
                    <input type="hidden" name="area" value="default"/>
                </form>
                <p class="searchtip" style="font-size: 90%">
                    Enter search terms or a module, class or function name.
                </p>

            </div>
             
            <div class="documentwrapper">
                <div class="bodywrapper">
                    <div class="body">
                        
  <div class="section" id="time-series-date-functionality">
<span id="timeseries"></span><h1>Time Series / Date functionality<a class="headerlink" href="#time-series-date-functionality" title="Permalink to this headline">¶</a></h1>
<p>pandas has proven very successful as a tool for working with time series data,
especially in the financial data analysis space. Using the NumPy <code class="docutils literal"><span class="pre">datetime64</span></code> and <code class="docutils literal"><span class="pre">timedelta64</span></code> dtypes,
we have consolidated a large number of features from other Python libraries like <code class="docutils literal"><span class="pre">scikits.timeseries</span></code> as well as created
a tremendous amount of new functionality for manipulating time series data.</p>
<p>In working with time series data, we will frequently seek to:</p>
<blockquote>
<div><ul class="simple">
<li>generate sequences of fixed-frequency dates and time spans</li>
<li>conform or convert time series to a particular frequency</li>
<li>compute &#8220;relative&#8221; dates based on various non-standard time increments
(e.g. 5 business days before the last business day of the year), or &#8220;roll&#8221;
dates forward or backward</li>
</ul>
</div></blockquote>
<p>pandas provides a relatively compact and self-contained set of tools for
performing the above tasks.</p>
<p>Create a range of dates:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="go"># 72 hours starting with midnight Jan 1st, 2011</span>
<span class="gp">In [1]: </span><span class="n">rng</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;1/1/2011&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">72</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;H&#39;</span><span class="p">)</span>

<span class="gp">In [2]: </span><span class="n">rng</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>
<span class="gh">Out[2]: </span><span class="go"></span>
<span class="go">DatetimeIndex([&#39;2011-01-01 00:00:00&#39;, &#39;2011-01-01 01:00:00&#39;,</span>
<span class="go">               &#39;2011-01-01 02:00:00&#39;, &#39;2011-01-01 03:00:00&#39;,</span>
<span class="go">               &#39;2011-01-01 04:00:00&#39;],</span>
<span class="go">              dtype=&#39;datetime64[ns]&#39;, freq=&#39;H&#39;)</span>
</pre></div>
</div>
<p>Index pandas objects with dates:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="n">ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">rng</span><span class="p">)),</span> <span class="n">index</span><span class="o">=</span><span class="n">rng</span><span class="p">)</span>

<span class="gp">In [4]: </span><span class="n">ts</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="gh">Out[4]: </span><span class="go"></span>
<span class="go">2011-01-01 00:00:00    0.469112</span>
<span class="go">2011-01-01 01:00:00   -0.282863</span>
<span class="go">2011-01-01 02:00:00   -1.509059</span>
<span class="go">2011-01-01 03:00:00   -1.135632</span>
<span class="go">2011-01-01 04:00:00    1.212112</span>
<span class="go">Freq: H, dtype: float64</span>
</pre></div>
</div>
<p>Change frequency and fill gaps:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="go"># to 45 minute frequency and forward fill</span>
<span class="gp">In [5]: </span><span class="n">converted</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s1">&#39;45Min&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;pad&#39;</span><span class="p">)</span>

<span class="gp">In [6]: </span><span class="n">converted</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="gh">Out[6]: </span><span class="go"></span>
<span class="go">2011-01-01 00:00:00    0.469112</span>
<span class="go">2011-01-01 00:45:00    0.469112</span>
<span class="go">2011-01-01 01:30:00   -0.282863</span>
<span class="go">2011-01-01 02:15:00   -1.509059</span>
<span class="go">2011-01-01 03:00:00   -1.135632</span>
<span class="go">Freq: 45T, dtype: float64</span>
</pre></div>
</div>
<p>Resample:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="go"># Daily means</span>
<span class="gp">In [7]: </span><span class="n">ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;D&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="gh">Out[7]: </span><span class="go"></span>
<span class="go">2011-01-01   -0.319569</span>
<span class="go">2011-01-02   -0.337703</span>
<span class="go">2011-01-03    0.117258</span>
<span class="go">Freq: D, dtype: float64</span>
</pre></div>
</div>
<div class="section" id="overview">
<span id="timeseries-overview"></span><h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Following table shows the type of time-related classes pandas can handle and
how to create them.</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="27%" />
<col width="58%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Class</th>
<th class="head">Remarks</th>
<th class="head">How to create</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">Timestamp</span></code></td>
<td>Represents a single timestamp</td>
<td><code class="docutils literal"><span class="pre">to_datetime</span></code>, <code class="docutils literal"><span class="pre">Timestamp</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">DatetimeIndex</span></code></td>
<td>Index of <code class="docutils literal"><span class="pre">Timestamp</span></code></td>
<td><code class="docutils literal"><span class="pre">to_datetime</span></code>, <code class="docutils literal"><span class="pre">date_range</span></code>, <code class="docutils literal"><span class="pre">bdate_range</span></code>, <code class="docutils literal"><span class="pre">DatetimeIndex</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">Period</span></code></td>
<td>Represents a single time span</td>
<td><code class="docutils literal"><span class="pre">Period</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">PeriodIndex</span></code></td>
<td>Index of <code class="docutils literal"><span class="pre">Period</span></code></td>
<td><code class="docutils literal"><span class="pre">period_range</span></code>, <code class="docutils literal"><span class="pre">PeriodIndex</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="timestamps-vs-time-spans">
<span id="timeseries-representation"></span><h2>Timestamps vs. Time Spans<a class="headerlink" href="#timestamps-vs-time-spans" title="Permalink to this headline">¶</a></h2>
<p>Timestamped data is the most basic type of time series data that associates
values with points in time. For pandas objects it means using the points in
time.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [8]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="gh">Out[8]: </span><span class="go">Timestamp(&#39;2012-05-01 00:00:00&#39;)</span>

<span class="gp">In [9]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2012-05-01&#39;</span><span class="p">)</span>
<span class="go">                                         Out[9]: Timestamp(&#39;2012-05-01 00:00:00&#39;)</span>

<span class="gp">In [10]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">                                                                                  Out[10]: Timestamp(&#39;2012-05-01 00:00:00&#39;)</span>
</pre></div>
</div>
<p>However, in many cases it is more natural to associate things like change
variables with a time span instead. The span represented by <code class="docutils literal"><span class="pre">Period</span></code> can be
specified explicitly, or inferred from datetime string format.</p>
<p>For example:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [11]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">&#39;2011-01&#39;</span><span class="p">)</span>
<span class="gh">Out[11]: </span><span class="go">Period(&#39;2011-01&#39;, &#39;M&#39;)</span>

<span class="gp">In [12]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">&#39;2012-05&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">)</span>
<span class="go">                                Out[12]: Period(&#39;2012-05-01&#39;, &#39;D&#39;)</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">Timestamp</span></code> and <code class="docutils literal"><span class="pre">Period</span></code> can be the index. Lists of <code class="docutils literal"><span class="pre">Timestamp</span></code> and
<code class="docutils literal"><span class="pre">Period</span></code> are automatically coerced to <code class="docutils literal"><span class="pre">DatetimeIndex</span></code> and <code class="docutils literal"><span class="pre">PeriodIndex</span></code>
respectively.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [13]: </span><span class="n">dates</span> <span class="o">=</span> <span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2012-05-01&#39;</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2012-05-02&#39;</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2012-05-03&#39;</span><span class="p">)]</span>

<span class="gp">In [14]: </span><span class="n">ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="n">dates</span><span class="p">)</span>

<span class="gp">In [15]: </span><span class="nb">type</span><span class="p">(</span><span class="n">ts</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="gh">Out[15]: </span><span class="go">pandas.core.indexes.datetimes.DatetimeIndex</span>

<span class="gp">In [16]: </span><span class="n">ts</span><span class="o">.</span><span class="n">index</span>
<span class="go">                                                     Out[16]: DatetimeIndex([&#39;2012-05-01&#39;, &#39;2012-05-02&#39;, &#39;2012-05-03&#39;], dtype=&#39;datetime64[ns]&#39;, freq=None)</span>

<span class="gp">In [17]: </span><span class="n">ts</span>
<span class="go">                                                                                                                                                           Out[17]: </span>
<span class="go">2012-05-01   -0.410001</span>
<span class="go">2012-05-02   -0.078638</span>
<span class="go">2012-05-03    0.545952</span>
<span class="go">dtype: float64</span>

<span class="gp">In [18]: </span><span class="n">periods</span> <span class="o">=</span> <span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">&#39;2012-01&#39;</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">&#39;2012-02&#39;</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">&#39;2012-03&#39;</span><span class="p">)]</span>

<span class="gp">In [19]: </span><span class="n">ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="n">periods</span><span class="p">)</span>

<span class="gp">In [20]: </span><span class="nb">type</span><span class="p">(</span><span class="n">ts</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="gh">Out[20]: </span><span class="go">pandas.core.indexes.period.PeriodIndex</span>

<span class="gp">In [21]: </span><span class="n">ts</span><span class="o">.</span><span class="n">index</span>
<span class="go">                                                Out[21]: PeriodIndex([&#39;2012-01&#39;, &#39;2012-02&#39;, &#39;2012-03&#39;], dtype=&#39;period[M]&#39;, freq=&#39;M&#39;)</span>

<span class="gp">In [22]: </span><span class="n">ts</span>
<span class="go">                                                                                                                                     Out[22]: </span>
<span class="go">2012-01   -1.219217</span>
<span class="go">2012-02   -1.226825</span>
<span class="go">2012-03    0.769804</span>
<span class="go">Freq: M, dtype: float64</span>
</pre></div>
</div>
<p>pandas allows you to capture both representations and
convert between them. Under the hood, pandas represents timestamps using
instances of <code class="docutils literal"><span class="pre">Timestamp</span></code> and sequences of timestamps using instances of
<code class="docutils literal"><span class="pre">DatetimeIndex</span></code>. For regular time spans, pandas uses <code class="docutils literal"><span class="pre">Period</span></code> objects for
scalar values and <code class="docutils literal"><span class="pre">PeriodIndex</span></code> for sequences of spans. Better support for
irregular intervals with arbitrary start and end points are forth-coming in
future releases.</p>
</div>
<div class="section" id="converting-to-timestamps">
<span id="timeseries-converting"></span><h2>Converting to Timestamps<a class="headerlink" href="#converting-to-timestamps" title="Permalink to this headline">¶</a></h2>
<p>To convert a <code class="docutils literal"><span class="pre">Series</span></code> or list-like object of date-like objects e.g. strings,
epochs, or a mixture, you can use the <code class="docutils literal"><span class="pre">to_datetime</span></code> function. When passed
a <code class="docutils literal"><span class="pre">Series</span></code>, this returns a <code class="docutils literal"><span class="pre">Series</span></code> (with the same index), while a list-like
is converted to a <code class="docutils literal"><span class="pre">DatetimeIndex</span></code>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [23]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="s1">&#39;Jul 31, 2009&#39;</span><span class="p">,</span> <span class="s1">&#39;2010-01-10&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">]))</span>
<span class="gh">Out[23]: </span><span class="go"></span>
<span class="go">0   2009-07-31</span>
<span class="go">1   2010-01-10</span>
<span class="go">2          NaT</span>
<span class="go">dtype: datetime64[ns]</span>

<span class="gp">In [24]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">([</span><span class="s1">&#39;2005/11/23&#39;</span><span class="p">,</span> <span class="s1">&#39;2010.12.31&#39;</span><span class="p">])</span>
<span class="go">                                                                             Out[24]: DatetimeIndex([&#39;2005-11-23&#39;, &#39;2010-12-31&#39;], dtype=&#39;datetime64[ns]&#39;, freq=None)</span>
</pre></div>
</div>
<p>If you use dates which start with the day first (i.e. European style),
you can pass the <code class="docutils literal"><span class="pre">dayfirst</span></code> flag:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [25]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">([</span><span class="s1">&#39;04-01-2012 10:00&#39;</span><span class="p">],</span> <span class="n">dayfirst</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gh">Out[25]: </span><span class="go">DatetimeIndex([&#39;2012-01-04 10:00:00&#39;], dtype=&#39;datetime64[ns]&#39;, freq=None)</span>

<span class="gp">In [26]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">([</span><span class="s1">&#39;14-01-2012&#39;</span><span class="p">,</span> <span class="s1">&#39;01-14-2012&#39;</span><span class="p">],</span> <span class="n">dayfirst</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">                                                                                   Out[26]: DatetimeIndex([&#39;2012-01-14&#39;, &#39;2012-01-14&#39;], dtype=&#39;datetime64[ns]&#39;, freq=None)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">You see in the above example that <code class="docutils literal"><span class="pre">dayfirst</span></code> isn&#8217;t strict, so if a date
can&#8217;t be parsed with the day being first it will be parsed as if
<code class="docutils literal"><span class="pre">dayfirst</span></code> were False.</p>
</div>
<p>If you pass a single string to <code class="docutils literal"><span class="pre">to_datetime</span></code>, it returns a single <code class="docutils literal"><span class="pre">Timestamp</span></code>.
<code class="docutils literal"><span class="pre">Timestamp</span></code> can also accept string input, but it doesn&#8217;t accept string parsing
options like <code class="docutils literal"><span class="pre">dayfirst</span></code> or <code class="docutils literal"><span class="pre">format</span></code>, so use <code class="docutils literal"><span class="pre">to_datetime</span></code> if these are required.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [27]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s1">&#39;2010/11/12&#39;</span><span class="p">)</span>
<span class="gh">Out[27]: </span><span class="go">Timestamp(&#39;2010-11-12 00:00:00&#39;)</span>

<span class="gp">In [28]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2010/11/12&#39;</span><span class="p">)</span>
<span class="go">                                          Out[28]: Timestamp(&#39;2010-11-12 00:00:00&#39;)</span>
</pre></div>
</div>
<div class="section" id="providing-a-format-argument">
<h3>Providing a Format Argument<a class="headerlink" href="#providing-a-format-argument" title="Permalink to this headline">¶</a></h3>
<p>In addition to the required datetime string, a <code class="docutils literal"><span class="pre">format</span></code> argument can be passed to ensure specific parsing.
This could also potentially speed up the conversion considerably.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [29]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s1">&#39;2010/11/12&#39;</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s1">&#39;%Y/%m/</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="gh">Out[29]: </span><span class="go">Timestamp(&#39;2010-11-12 00:00:00&#39;)</span>

<span class="gp">In [30]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s1">&#39;12-11-2010 00:00&#39;</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">-%m-%Y %H:%M&#39;</span><span class="p">)</span>
<span class="go">                                          Out[30]: Timestamp(&#39;2010-11-12 00:00:00&#39;)</span>
</pre></div>
</div>
<p>For more information on how to specify the <code class="docutils literal"><span class="pre">format</span></code> options, see <a class="reference external" href="https://docs.python.org/3/library/datetime.html#strftime-and-strptime-behavior">https://docs.python.org/3/library/datetime.html#strftime-and-strptime-behavior</a>.</p>
</div>
<div class="section" id="assembling-datetime-from-multiple-dataframe-columns">
<h3>Assembling Datetime from Multiple DataFrame Columns<a class="headerlink" href="#assembling-datetime-from-multiple-dataframe-columns" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.18.1.</span></p>
</div>
<p>You can also pass a <code class="docutils literal"><span class="pre">DataFrame</span></code> of integer or string columns to assemble into a <code class="docutils literal"><span class="pre">Series</span></code> of <code class="docutils literal"><span class="pre">Timestamps</span></code>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [31]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;year&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2015</span><span class="p">,</span> <span class="mi">2016</span><span class="p">],</span>
<span class="gp">   ....: </span>                   <span class="s1">&#39;month&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="gp">   ....: </span>                   <span class="s1">&#39;day&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
<span class="gp">   ....: </span>                   <span class="s1">&#39;hour&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]})</span>
<span class="gp">   ....: </span>

<span class="gp">In [32]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gh">Out[32]: </span><span class="go"></span>
<span class="go">0   2015-02-04 02:00:00</span>
<span class="go">1   2016-03-05 03:00:00</span>
<span class="go">dtype: datetime64[ns]</span>
</pre></div>
</div>
<p>You can pass only the columns that you need to assemble.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [33]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[[</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;month&#39;</span><span class="p">,</span> <span class="s1">&#39;day&#39;</span><span class="p">]])</span>
<span class="gh">Out[33]: </span><span class="go"></span>
<span class="go">0   2015-02-04</span>
<span class="go">1   2016-03-05</span>
<span class="go">dtype: datetime64[ns]</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">pd.to_datetime</span></code> looks for standard designations of the datetime component in the column names, including:</p>
<ul class="simple">
<li>required: <code class="docutils literal"><span class="pre">year</span></code>, <code class="docutils literal"><span class="pre">month</span></code>, <code class="docutils literal"><span class="pre">day</span></code></li>
<li>optional: <code class="docutils literal"><span class="pre">hour</span></code>, <code class="docutils literal"><span class="pre">minute</span></code>, <code class="docutils literal"><span class="pre">second</span></code>, <code class="docutils literal"><span class="pre">millisecond</span></code>, <code class="docutils literal"><span class="pre">microsecond</span></code>, <code class="docutils literal"><span class="pre">nanosecond</span></code></li>
</ul>
</div>
<div class="section" id="invalid-data">
<h3>Invalid Data<a class="headerlink" href="#invalid-data" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In version 0.17.0, the default for <code class="docutils literal"><span class="pre">to_datetime</span></code> is now <code class="docutils literal"><span class="pre">errors='raise'</span></code>, rather than <code class="docutils literal"><span class="pre">errors='ignore'</span></code>. This means
that invalid parsing will raise rather that return the original input as in previous versions.</p>
</div>
<p>The default behavior, <code class="docutils literal"><span class="pre">errors='raise'</span></code>, is to raise when unparseable:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">([</span><span class="s1">&#39;2009/07/31&#39;</span><span class="p">,</span> <span class="s1">&#39;asd&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;raise&#39;</span><span class="p">)</span>
<span class="go">ValueError: Unknown string format</span>
</pre></div>
</div>
<p>Pass <code class="docutils literal"><span class="pre">errors='ignore'</span></code> to return the original input when unparseable:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [34]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">([</span><span class="s1">&#39;2009/07/31&#39;</span><span class="p">,</span> <span class="s1">&#39;asd&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
<span class="gh">Out[34]: </span><span class="go">array([&#39;2009/07/31&#39;, &#39;asd&#39;], dtype=object)</span>
</pre></div>
</div>
<p>Pass <code class="docutils literal"><span class="pre">errors='coerce'</span></code> to convert unparseable data to <code class="docutils literal"><span class="pre">NaT</span></code> (not a time):</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [35]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">([</span><span class="s1">&#39;2009/07/31&#39;</span><span class="p">,</span> <span class="s1">&#39;asd&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
<span class="gh">Out[35]: </span><span class="go">DatetimeIndex([&#39;2009-07-31&#39;, &#39;NaT&#39;], dtype=&#39;datetime64[ns]&#39;, freq=None)</span>
</pre></div>
</div>
</div>
<div class="section" id="epoch-timestamps">
<span id="timeseries-converting-epoch"></span><h3>Epoch Timestamps<a class="headerlink" href="#epoch-timestamps" title="Permalink to this headline">¶</a></h3>
<p>pandas supports converting integer or float epoch times to <code class="docutils literal"><span class="pre">Timestamp</span></code> and
<code class="docutils literal"><span class="pre">DatetimeIndex</span></code>. The default unit is nanoseconds, since that is how <code class="docutils literal"><span class="pre">Timestamp</span></code>
objects are stored internally. However, epochs are often stored in another <code class="docutils literal"><span class="pre">unit</span></code>
which can be specified. These are computed from the starting point specified by the
<code class="docutils literal"><span class="pre">origin</span></code> parameter.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [36]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">([</span><span class="mi">1349720105</span><span class="p">,</span> <span class="mi">1349806505</span><span class="p">,</span> <span class="mi">1349892905</span><span class="p">,</span>
<span class="gp">   ....: </span>                <span class="mi">1349979305</span><span class="p">,</span> <span class="mi">1350065705</span><span class="p">],</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">)</span>
<span class="gp">   ....: </span>
<span class="gh">Out[36]: </span><span class="go"></span>
<span class="go">DatetimeIndex([&#39;2012-10-08 18:15:05&#39;, &#39;2012-10-09 18:15:05&#39;,</span>
<span class="go">               &#39;2012-10-10 18:15:05&#39;, &#39;2012-10-11 18:15:05&#39;,</span>
<span class="go">               &#39;2012-10-12 18:15:05&#39;],</span>
<span class="go">              dtype=&#39;datetime64[ns]&#39;, freq=None)</span>

<span class="gp">In [37]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">([</span><span class="mi">1349720105100</span><span class="p">,</span> <span class="mi">1349720105200</span><span class="p">,</span> <span class="mi">1349720105300</span><span class="p">,</span>
<span class="gp">   ....: </span>                <span class="mi">1349720105400</span><span class="p">,</span> <span class="mi">1349720105500</span> <span class="p">],</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;ms&#39;</span><span class="p">)</span>
<span class="gp">   ....: </span>
<span class="go">                                                                                                                                                                                                                            Out[37]: </span>
<span class="go">DatetimeIndex([&#39;2012-10-08 18:15:05.100000&#39;, &#39;2012-10-08 18:15:05.200000&#39;,</span>
<span class="go">               &#39;2012-10-08 18:15:05.300000&#39;, &#39;2012-10-08 18:15:05.400000&#39;,</span>
<span class="go">               &#39;2012-10-08 18:15:05.500000&#39;],</span>
<span class="go">              dtype=&#39;datetime64[ns]&#39;, freq=None)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Epoch times will be rounded to the nearest nanosecond.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Conversion of float epoch times can lead to inaccurate and unexpected results.
<a class="reference external" href="https://docs.python.org/3/tutorial/floatingpoint.html#tut-fp-issues" title="(in Python v3.6)"><span class="xref std std-ref">Python floats</span></a> have about 15 digits precision in
decimal. Rounding during conversion from float to high precision <code class="docutils literal"><span class="pre">Timestamp</span></code> is
unavoidable. The only way to achieve exact precision is to use a fixed-width
types (e.g. an int64).</p>
<div class="last highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [38]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">([</span><span class="mf">1490195805.433</span><span class="p">,</span> <span class="mf">1490195805.433502912</span><span class="p">],</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">)</span>
<span class="gh">Out[38]: </span><span class="go">DatetimeIndex([&#39;2017-03-22 15:16:45.433000&#39;, &#39;2017-03-22 15:16:45.433503&#39;], dtype=&#39;datetime64[ns]&#39;, freq=None)</span>

<span class="gp">In [39]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="mi">1490195805433502912</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;ns&#39;</span><span class="p">)</span>
<span class="go">                                                                                                                        Out[39]: Timestamp(&#39;2017-03-22 15:16:45.433502912&#39;)</span>
</pre></div>
</div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#timeseries-origin"><span class="std std-ref">Using the origin Parameter</span></a></p>
</div>
</div>
<div class="section" id="from-timestamps-to-epoch">
<span id="timeseries-converting-epoch-inverse"></span><h3>From Timestamps to Epoch<a class="headerlink" href="#from-timestamps-to-epoch" title="Permalink to this headline">¶</a></h3>
<p>To invert the operation from above, namely, to convert from a <code class="docutils literal"><span class="pre">Timestamp</span></code> to a &#8216;unix&#8217; epoch:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [40]: </span><span class="n">stamps</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;2012-10-08 18:15:05&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">)</span>

<span class="gp">In [41]: </span><span class="n">stamps</span>
<span class="gh">Out[41]: </span><span class="go"></span>
<span class="go">DatetimeIndex([&#39;2012-10-08 18:15:05&#39;, &#39;2012-10-09 18:15:05&#39;,</span>
<span class="go">               &#39;2012-10-10 18:15:05&#39;, &#39;2012-10-11 18:15:05&#39;],</span>
<span class="go">              dtype=&#39;datetime64[ns]&#39;, freq=&#39;D&#39;)</span>
</pre></div>
</div>
<p>We convert the <code class="docutils literal"><span class="pre">DatetimeIndex</span></code> to an <code class="docutils literal"><span class="pre">int64</span></code> array, then divide by the conversion unit.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [42]: </span><span class="n">stamps</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="s1">&#39;int64&#39;</span><span class="p">)</span> <span class="o">//</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">)</span>
<span class="gh">Out[42]: </span><span class="go">array([1349720105, 1349806505, 1349892905, 1349979305])</span>
</pre></div>
</div>
</div>
<div class="section" id="using-the-origin-parameter">
<span id="timeseries-origin"></span><h3>Using the <code class="docutils literal"><span class="pre">origin</span></code> Parameter<a class="headerlink" href="#using-the-origin-parameter" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.20.0.</span></p>
</div>
<p>Using the <code class="docutils literal"><span class="pre">origin</span></code> parameter, one can specify an alternative starting point for creation
of a <code class="docutils literal"><span class="pre">DatetimeIndex</span></code>. For example, to use 1960-01-01 as the starting date:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [43]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;1960-01-01&#39;</span><span class="p">))</span>
<span class="gh">Out[43]: </span><span class="go">DatetimeIndex([&#39;1960-01-02&#39;, &#39;1960-01-03&#39;, &#39;1960-01-04&#39;], dtype=&#39;datetime64[ns]&#39;, freq=None)</span>
</pre></div>
</div>
<p>The default is set at <code class="docutils literal"><span class="pre">origin='unix'</span></code>, which defaults to <code class="docutils literal"><span class="pre">1970-01-01</span> <span class="pre">00:00:00</span></code>.
Commonly called &#8216;unix epoch&#8217; or POSIX time.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [44]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">)</span>
<span class="gh">Out[44]: </span><span class="go">DatetimeIndex([&#39;1970-01-02&#39;, &#39;1970-01-03&#39;, &#39;1970-01-04&#39;], dtype=&#39;datetime64[ns]&#39;, freq=None)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="generating-ranges-of-timestamps">
<span id="timeseries-daterange"></span><h2>Generating Ranges of Timestamps<a class="headerlink" href="#generating-ranges-of-timestamps" title="Permalink to this headline">¶</a></h2>
<p>To generate an index with timestamps, you can use either the <code class="docutils literal"><span class="pre">DatetimeIndex</span></code> or
<code class="docutils literal"><span class="pre">Index</span></code> constructor and pass in a list of datetime objects:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [45]: </span><span class="n">dates</span> <span class="o">=</span> <span class="p">[</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>

<span class="go"># Note the frequency information</span>
<span class="gp">In [46]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span><span class="p">(</span><span class="n">dates</span><span class="p">)</span>

<span class="gp">In [47]: </span><span class="n">index</span>
<span class="gh">Out[47]: </span><span class="go">DatetimeIndex([&#39;2012-05-01&#39;, &#39;2012-05-02&#39;, &#39;2012-05-03&#39;], dtype=&#39;datetime64[ns]&#39;, freq=None)</span>

<span class="go"># Automatically converted to DatetimeIndex</span>
<span class="gp">In [48]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="n">dates</span><span class="p">)</span>

<span class="gp">In [49]: </span><span class="n">index</span>
<span class="gh">Out[49]: </span><span class="go">DatetimeIndex([&#39;2012-05-01&#39;, &#39;2012-05-02&#39;, &#39;2012-05-03&#39;], dtype=&#39;datetime64[ns]&#39;, freq=None)</span>
</pre></div>
</div>
<p>In practice this becomes very cumbersome because we often need a very long
index with a large number of timestamps. If we need timestamps on a regular
frequency, we can use the <a class="reference internal" href="generated/pandas.date_range.html#pandas.date_range" title="pandas.date_range"><code class="xref py py-func docutils literal"><span class="pre">date_range()</span></code></a> and <a class="reference internal" href="generated/pandas.bdate_range.html#pandas.bdate_range" title="pandas.bdate_range"><code class="xref py py-func docutils literal"><span class="pre">bdate_range()</span></code></a> functions
to create a <code class="docutils literal"><span class="pre">DatetimeIndex</span></code>. The default frequency for <code class="docutils literal"><span class="pre">date_range</span></code> is a
<strong>calendar day</strong> while the default for <code class="docutils literal"><span class="pre">bdate_range</span></code> is a <strong>business day</strong>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [50]: </span><span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2011</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="gp">In [51]: </span><span class="n">end</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="gp">In [52]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>

<span class="gp">In [53]: </span><span class="n">index</span>
<span class="gh">Out[53]: </span><span class="go"></span>
<span class="go">DatetimeIndex([&#39;2011-01-01&#39;, &#39;2011-01-02&#39;, &#39;2011-01-03&#39;, &#39;2011-01-04&#39;,</span>
<span class="go">               &#39;2011-01-05&#39;, &#39;2011-01-06&#39;, &#39;2011-01-07&#39;, &#39;2011-01-08&#39;,</span>
<span class="go">               &#39;2011-01-09&#39;, &#39;2011-01-10&#39;,</span>
<span class="go">               ...</span>
<span class="go">               &#39;2011-12-23&#39;, &#39;2011-12-24&#39;, &#39;2011-12-25&#39;, &#39;2011-12-26&#39;,</span>
<span class="go">               &#39;2011-12-27&#39;, &#39;2011-12-28&#39;, &#39;2011-12-29&#39;, &#39;2011-12-30&#39;,</span>
<span class="go">               &#39;2011-12-31&#39;, &#39;2012-01-01&#39;],</span>
<span class="go">              dtype=&#39;datetime64[ns]&#39;, length=366, freq=&#39;D&#39;)</span>

<span class="gp">In [54]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">bdate_range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>

<span class="gp">In [55]: </span><span class="n">index</span>
<span class="gh">Out[55]: </span><span class="go"></span>
<span class="go">DatetimeIndex([&#39;2011-01-03&#39;, &#39;2011-01-04&#39;, &#39;2011-01-05&#39;, &#39;2011-01-06&#39;,</span>
<span class="go">               &#39;2011-01-07&#39;, &#39;2011-01-10&#39;, &#39;2011-01-11&#39;, &#39;2011-01-12&#39;,</span>
<span class="go">               &#39;2011-01-13&#39;, &#39;2011-01-14&#39;,</span>
<span class="go">               ...</span>
<span class="go">               &#39;2011-12-19&#39;, &#39;2011-12-20&#39;, &#39;2011-12-21&#39;, &#39;2011-12-22&#39;,</span>
<span class="go">               &#39;2011-12-23&#39;, &#39;2011-12-26&#39;, &#39;2011-12-27&#39;, &#39;2011-12-28&#39;,</span>
<span class="go">               &#39;2011-12-29&#39;, &#39;2011-12-30&#39;],</span>
<span class="go">              dtype=&#39;datetime64[ns]&#39;, length=260, freq=&#39;B&#39;)</span>
</pre></div>
</div>
<p>Convenience functions like <code class="docutils literal"><span class="pre">date_range</span></code> and <code class="docutils literal"><span class="pre">bdate_range</span></code> can utilize a
variety of <a class="reference internal" href="#timeseries-offset-aliases"><span class="std std-ref">frequency aliases</span></a>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [56]: </span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;M&#39;</span><span class="p">)</span>
<span class="gh">Out[56]: </span><span class="go"></span>
<span class="go">DatetimeIndex([&#39;2011-01-31&#39;, &#39;2011-02-28&#39;, &#39;2011-03-31&#39;, &#39;2011-04-30&#39;,</span>
<span class="go">               &#39;2011-05-31&#39;, &#39;2011-06-30&#39;, &#39;2011-07-31&#39;, &#39;2011-08-31&#39;,</span>
<span class="go">               &#39;2011-09-30&#39;, &#39;2011-10-31&#39;,</span>
<span class="go">               ...</span>
<span class="go">               &#39;2093-07-31&#39;, &#39;2093-08-31&#39;, &#39;2093-09-30&#39;, &#39;2093-10-31&#39;,</span>
<span class="go">               &#39;2093-11-30&#39;, &#39;2093-12-31&#39;, &#39;2094-01-31&#39;, &#39;2094-02-28&#39;,</span>
<span class="go">               &#39;2094-03-31&#39;, &#39;2094-04-30&#39;],</span>
<span class="go">              dtype=&#39;datetime64[ns]&#39;, length=1000, freq=&#39;M&#39;)</span>

<span class="gp">In [57]: </span><span class="n">pd</span><span class="o">.</span><span class="n">bdate_range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;BQS&#39;</span><span class="p">)</span>
<span class="go">                                                                                                                                                                                                                                                                                                                                                                                                                                                                             Out[57]: </span>
<span class="go">DatetimeIndex([&#39;2011-01-03&#39;, &#39;2011-04-01&#39;, &#39;2011-07-01&#39;, &#39;2011-10-03&#39;,</span>
<span class="go">               &#39;2012-01-02&#39;, &#39;2012-04-02&#39;, &#39;2012-07-02&#39;, &#39;2012-10-01&#39;,</span>
<span class="go">               &#39;2013-01-01&#39;, &#39;2013-04-01&#39;,</span>
<span class="go">               ...</span>
<span class="go">               &#39;2071-01-01&#39;, &#39;2071-04-01&#39;, &#39;2071-07-01&#39;, &#39;2071-10-01&#39;,</span>
<span class="go">               &#39;2072-01-01&#39;, &#39;2072-04-01&#39;, &#39;2072-07-01&#39;, &#39;2072-10-03&#39;,</span>
<span class="go">               &#39;2073-01-02&#39;, &#39;2073-04-03&#39;],</span>
<span class="go">              dtype=&#39;datetime64[ns]&#39;, length=250, freq=&#39;BQS-JAN&#39;)</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">date_range</span></code> and <code class="docutils literal"><span class="pre">bdate_range</span></code> make it easy to generate a range of dates
using various combinations of parameters like <code class="docutils literal"><span class="pre">start</span></code>, <code class="docutils literal"><span class="pre">end</span></code>, <code class="docutils literal"><span class="pre">periods</span></code>,
and <code class="docutils literal"><span class="pre">freq</span></code>. The start and end dates are strictly inclusive, so dates outside
of those specified will not be generated:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [58]: </span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;BM&#39;</span><span class="p">)</span>
<span class="gh">Out[58]: </span><span class="go"></span>
<span class="go">DatetimeIndex([&#39;2011-01-31&#39;, &#39;2011-02-28&#39;, &#39;2011-03-31&#39;, &#39;2011-04-29&#39;,</span>
<span class="go">               &#39;2011-05-31&#39;, &#39;2011-06-30&#39;, &#39;2011-07-29&#39;, &#39;2011-08-31&#39;,</span>
<span class="go">               &#39;2011-09-30&#39;, &#39;2011-10-31&#39;, &#39;2011-11-30&#39;, &#39;2011-12-30&#39;],</span>
<span class="go">              dtype=&#39;datetime64[ns]&#39;, freq=&#39;BM&#39;)</span>

<span class="gp">In [59]: </span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;W&#39;</span><span class="p">)</span>
<span class="go">                                                                                                                                                                                                                                                                                 Out[59]: </span>
<span class="go">DatetimeIndex([&#39;2011-01-02&#39;, &#39;2011-01-09&#39;, &#39;2011-01-16&#39;, &#39;2011-01-23&#39;,</span>
<span class="go">               &#39;2011-01-30&#39;, &#39;2011-02-06&#39;, &#39;2011-02-13&#39;, &#39;2011-02-20&#39;,</span>
<span class="go">               &#39;2011-02-27&#39;, &#39;2011-03-06&#39;, &#39;2011-03-13&#39;, &#39;2011-03-20&#39;,</span>
<span class="go">               &#39;2011-03-27&#39;, &#39;2011-04-03&#39;, &#39;2011-04-10&#39;, &#39;2011-04-17&#39;,</span>
<span class="go">               &#39;2011-04-24&#39;, &#39;2011-05-01&#39;, &#39;2011-05-08&#39;, &#39;2011-05-15&#39;,</span>
<span class="go">               &#39;2011-05-22&#39;, &#39;2011-05-29&#39;, &#39;2011-06-05&#39;, &#39;2011-06-12&#39;,</span>
<span class="go">               &#39;2011-06-19&#39;, &#39;2011-06-26&#39;, &#39;2011-07-03&#39;, &#39;2011-07-10&#39;,</span>
<span class="go">               &#39;2011-07-17&#39;, &#39;2011-07-24&#39;, &#39;2011-07-31&#39;, &#39;2011-08-07&#39;,</span>
<span class="go">               &#39;2011-08-14&#39;, &#39;2011-08-21&#39;, &#39;2011-08-28&#39;, &#39;2011-09-04&#39;,</span>
<span class="go">               &#39;2011-09-11&#39;, &#39;2011-09-18&#39;, &#39;2011-09-25&#39;, &#39;2011-10-02&#39;,</span>
<span class="go">               &#39;2011-10-09&#39;, &#39;2011-10-16&#39;, &#39;2011-10-23&#39;, &#39;2011-10-30&#39;,</span>
<span class="go">               &#39;2011-11-06&#39;, &#39;2011-11-13&#39;, &#39;2011-11-20&#39;, &#39;2011-11-27&#39;,</span>
<span class="go">               &#39;2011-12-04&#39;, &#39;2011-12-11&#39;, &#39;2011-12-18&#39;, &#39;2011-12-25&#39;,</span>
<span class="go">               &#39;2012-01-01&#39;],</span>
<span class="go">              dtype=&#39;datetime64[ns]&#39;, freq=&#39;W-SUN&#39;)</span>

<span class="gp">In [60]: </span><span class="n">pd</span><span class="o">.</span><span class="n">bdate_range</span><span class="p">(</span><span class="n">end</span><span class="o">=</span><span class="n">end</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="go">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        Out[60]: </span>
<span class="go">DatetimeIndex([&#39;2011-12-05&#39;, &#39;2011-12-06&#39;, &#39;2011-12-07&#39;, &#39;2011-12-08&#39;,</span>
<span class="go">               &#39;2011-12-09&#39;, &#39;2011-12-12&#39;, &#39;2011-12-13&#39;, &#39;2011-12-14&#39;,</span>
<span class="go">               &#39;2011-12-15&#39;, &#39;2011-12-16&#39;, &#39;2011-12-19&#39;, &#39;2011-12-20&#39;,</span>
<span class="go">               &#39;2011-12-21&#39;, &#39;2011-12-22&#39;, &#39;2011-12-23&#39;, &#39;2011-12-26&#39;,</span>
<span class="go">               &#39;2011-12-27&#39;, &#39;2011-12-28&#39;, &#39;2011-12-29&#39;, &#39;2011-12-30&#39;],</span>
<span class="go">              dtype=&#39;datetime64[ns]&#39;, freq=&#39;B&#39;)</span>

<span class="gp">In [61]: </span><span class="n">pd</span><span class="o">.</span><span class="n">bdate_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">start</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="go">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      Out[61]: </span>
<span class="go">DatetimeIndex([&#39;2011-01-03&#39;, &#39;2011-01-04&#39;, &#39;2011-01-05&#39;, &#39;2011-01-06&#39;,</span>
<span class="go">               &#39;2011-01-07&#39;, &#39;2011-01-10&#39;, &#39;2011-01-11&#39;, &#39;2011-01-12&#39;,</span>
<span class="go">               &#39;2011-01-13&#39;, &#39;2011-01-14&#39;, &#39;2011-01-17&#39;, &#39;2011-01-18&#39;,</span>
<span class="go">               &#39;2011-01-19&#39;, &#39;2011-01-20&#39;, &#39;2011-01-21&#39;, &#39;2011-01-24&#39;,</span>
<span class="go">               &#39;2011-01-25&#39;, &#39;2011-01-26&#39;, &#39;2011-01-27&#39;, &#39;2011-01-28&#39;],</span>
<span class="go">              dtype=&#39;datetime64[ns]&#39;, freq=&#39;B&#39;)</span>
</pre></div>
</div>
<div class="section" id="custom-frequency-ranges">
<span id="timeseries-custom-freq-ranges"></span><h3>Custom Frequency Ranges<a class="headerlink" href="#custom-frequency-ranges" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This functionality was originally exclusive to <code class="docutils literal"><span class="pre">cdate_range</span></code>, which is
deprecated as of version 0.21.0 in favor of <code class="docutils literal"><span class="pre">bdate_range</span></code>.  Note that
<code class="docutils literal"><span class="pre">cdate_range</span></code> only utilizes the <code class="docutils literal"><span class="pre">weekmask</span></code> and <code class="docutils literal"><span class="pre">holidays</span></code> parameters
when custom business day, &#8216;C&#8217;, is passed as the frequency string. Support has
been expanded with <code class="docutils literal"><span class="pre">bdate_range</span></code> to work with any custom frequency string.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.21.0.</span></p>
</div>
<p><code class="docutils literal"><span class="pre">bdate_range</span></code> can also generate a range of custom frequency dates by using
the <code class="docutils literal"><span class="pre">weekmask</span></code> and <code class="docutils literal"><span class="pre">holidays</span></code> parameters.  These parameters will only be
used if a custom frequency string is passed.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [62]: </span><span class="n">weekmask</span> <span class="o">=</span> <span class="s1">&#39;Mon Wed Fri&#39;</span>

<span class="gp">In [63]: </span><span class="n">holidays</span> <span class="o">=</span> <span class="p">[</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2011</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2011</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">14</span><span class="p">)]</span>

<span class="gp">In [64]: </span><span class="n">pd</span><span class="o">.</span><span class="n">bdate_range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="n">weekmask</span><span class="o">=</span><span class="n">weekmask</span><span class="p">,</span> <span class="n">holidays</span><span class="o">=</span><span class="n">holidays</span><span class="p">)</span>
<span class="gh">Out[64]: </span><span class="go"></span>
<span class="go">DatetimeIndex([&#39;2011-01-03&#39;, &#39;2011-01-07&#39;, &#39;2011-01-10&#39;, &#39;2011-01-12&#39;,</span>
<span class="go">               &#39;2011-01-14&#39;, &#39;2011-01-17&#39;, &#39;2011-01-19&#39;, &#39;2011-01-21&#39;,</span>
<span class="go">               &#39;2011-01-24&#39;, &#39;2011-01-26&#39;,</span>
<span class="go">               ...</span>
<span class="go">               &#39;2011-12-09&#39;, &#39;2011-12-12&#39;, &#39;2011-12-14&#39;, &#39;2011-12-16&#39;,</span>
<span class="go">               &#39;2011-12-19&#39;, &#39;2011-12-21&#39;, &#39;2011-12-23&#39;, &#39;2011-12-26&#39;,</span>
<span class="go">               &#39;2011-12-28&#39;, &#39;2011-12-30&#39;],</span>
<span class="go">              dtype=&#39;datetime64[ns]&#39;, length=154, freq=&#39;C&#39;)</span>

<span class="gp">In [65]: </span><span class="n">pd</span><span class="o">.</span><span class="n">bdate_range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;CBMS&#39;</span><span class="p">,</span> <span class="n">weekmask</span><span class="o">=</span><span class="n">weekmask</span><span class="p">)</span>
<span class="go">                                                                                                                                                                                                                                                                                                                                                                                                                                                                            Out[65]: </span>
<span class="go">DatetimeIndex([&#39;2011-01-03&#39;, &#39;2011-02-02&#39;, &#39;2011-03-02&#39;, &#39;2011-04-01&#39;,</span>
<span class="go">               &#39;2011-05-02&#39;, &#39;2011-06-01&#39;, &#39;2011-07-01&#39;, &#39;2011-08-01&#39;,</span>
<span class="go">               &#39;2011-09-02&#39;, &#39;2011-10-03&#39;, &#39;2011-11-02&#39;, &#39;2011-12-02&#39;],</span>
<span class="go">              dtype=&#39;datetime64[ns]&#39;, freq=&#39;CBMS&#39;)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#timeseries-custombusinessdays"><span class="std std-ref">Custom Business Days</span></a></p>
</div>
</div>
</div>
<div class="section" id="timestamp-limitations">
<span id="timeseries-timestamp-limits"></span><h2>Timestamp Limitations<a class="headerlink" href="#timestamp-limitations" title="Permalink to this headline">¶</a></h2>
<p>Since pandas represents timestamps in nanosecond resolution, the time span that
can be represented using a 64-bit integer is limited to approximately 584 years:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [66]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="o">.</span><span class="n">min</span>
<span class="gh">Out[66]: </span><span class="go">Timestamp(&#39;1677-09-21 00:12:43.145225&#39;)</span>

<span class="gp">In [67]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="o">.</span><span class="n">max</span>
<span class="go">                                                 Out[67]: Timestamp(&#39;2262-04-11 23:47:16.854775807&#39;)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#timeseries-oob"><span class="std std-ref">Representing Out-of-Bounds Spans</span></a></p>
</div>
</div>
<div class="section" id="indexing">
<span id="timeseries-datetimeindex"></span><h2>Indexing<a class="headerlink" href="#indexing" title="Permalink to this headline">¶</a></h2>
<p>One of the main uses for <code class="docutils literal"><span class="pre">DatetimeIndex</span></code> is as an index for pandas objects.
The <code class="docutils literal"><span class="pre">DatetimeIndex</span></code> class contains many time series related optimizations:</p>
<blockquote>
<div><ul class="simple">
<li>A large range of dates for various offsets are pre-computed and cached
under the hood in order to make generating subsequent date ranges very fast
(just have to grab a slice)</li>
<li>Fast shifting using the <code class="docutils literal"><span class="pre">shift</span></code> and <code class="docutils literal"><span class="pre">tshift</span></code> method on pandas objects</li>
<li>Unioning of overlapping <code class="docutils literal"><span class="pre">DatetimeIndex</span></code> objects with the same frequency is
very fast (important for fast data alignment)</li>
<li>Quick access to date fields via properties such as <code class="docutils literal"><span class="pre">year</span></code>, <code class="docutils literal"><span class="pre">month</span></code>, etc.</li>
<li>Regularization functions like <code class="docutils literal"><span class="pre">snap</span></code> and very fast <code class="docutils literal"><span class="pre">asof</span></code> logic</li>
</ul>
</div></blockquote>
<p><code class="docutils literal"><span class="pre">DatetimeIndex</span></code> objects have all the basic functionality of regular <code class="docutils literal"><span class="pre">Index</span></code>
objects, and a smorgasbord of advanced time series specific methods for easy
frequency processing.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="basics.html#basics-reindexing"><span class="std std-ref">Reindexing methods</span></a></p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">While pandas does not force you to have a sorted date index, some of these
methods may have unexpected or incorrect behavior if the dates are unsorted.</p>
</div>
<p><code class="docutils literal"><span class="pre">DatetimeIndex</span></code> can be used like a regular index and offers all of its
intelligent functionality like selection, slicing, etc.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [68]: </span><span class="n">rng</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;BM&#39;</span><span class="p">)</span>

<span class="gp">In [69]: </span><span class="n">ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">rng</span><span class="p">)),</span> <span class="n">index</span><span class="o">=</span><span class="n">rng</span><span class="p">)</span>

<span class="gp">In [70]: </span><span class="n">ts</span><span class="o">.</span><span class="n">index</span>
<span class="gh">Out[70]: </span><span class="go"></span>
<span class="go">DatetimeIndex([&#39;2011-01-31&#39;, &#39;2011-02-28&#39;, &#39;2011-03-31&#39;, &#39;2011-04-29&#39;,</span>
<span class="go">               &#39;2011-05-31&#39;, &#39;2011-06-30&#39;, &#39;2011-07-29&#39;, &#39;2011-08-31&#39;,</span>
<span class="go">               &#39;2011-09-30&#39;, &#39;2011-10-31&#39;, &#39;2011-11-30&#39;, &#39;2011-12-30&#39;],</span>
<span class="go">              dtype=&#39;datetime64[ns]&#39;, freq=&#39;BM&#39;)</span>

<span class="gp">In [71]: </span><span class="n">ts</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>
<span class="go">                                                                                                                                                                                                                                                                                 Out[71]: </span>
<span class="go">DatetimeIndex([&#39;2011-01-31&#39;, &#39;2011-02-28&#39;, &#39;2011-03-31&#39;, &#39;2011-04-29&#39;,</span>
<span class="go">               &#39;2011-05-31&#39;],</span>
<span class="go">              dtype=&#39;datetime64[ns]&#39;, freq=&#39;BM&#39;)</span>

<span class="gp">In [72]: </span><span class="n">ts</span><span class="p">[::</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>
<span class="go">                                                                                                                                                                                                                                                                                                                                                                                                                                                 Out[72]: </span>
<span class="go">DatetimeIndex([&#39;2011-01-31&#39;, &#39;2011-03-31&#39;, &#39;2011-05-31&#39;, &#39;2011-07-29&#39;,</span>
<span class="go">               &#39;2011-09-30&#39;, &#39;2011-11-30&#39;],</span>
<span class="go">              dtype=&#39;datetime64[ns]&#39;, freq=&#39;2BM&#39;)</span>
</pre></div>
</div>
<div class="section" id="partial-string-indexing">
<span id="timeseries-partialindexing"></span><h3>Partial String Indexing<a class="headerlink" href="#partial-string-indexing" title="Permalink to this headline">¶</a></h3>
<p>Dates and strings that parse to timestamps can be passed as indexing parameters:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [73]: </span><span class="n">ts</span><span class="p">[</span><span class="s1">&#39;1/31/2011&#39;</span><span class="p">]</span>
<span class="gh">Out[73]: </span><span class="go">-1.2812473076599531</span>

<span class="gp">In [74]: </span><span class="n">ts</span><span class="p">[</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2011</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">25</span><span class="p">):]</span>
<span class="go">                             Out[74]: </span>
<span class="go">2011-12-30    0.687738</span>
<span class="go">Freq: BM, dtype: float64</span>

<span class="gp">In [75]: </span><span class="n">ts</span><span class="p">[</span><span class="s1">&#39;10/31/2011&#39;</span><span class="p">:</span><span class="s1">&#39;12/31/2011&#39;</span><span class="p">]</span>
<span class="go">                                                                                       Out[75]: </span>
<span class="go">2011-10-31    0.149748</span>
<span class="go">2011-11-30   -0.732339</span>
<span class="go">2011-12-30    0.687738</span>
<span class="go">Freq: BM, dtype: float64</span>
</pre></div>
</div>
<p>To provide convenience for accessing longer time series, you can also pass in
the year or year and month as strings:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [76]: </span><span class="n">ts</span><span class="p">[</span><span class="s1">&#39;2011&#39;</span><span class="p">]</span>
<span class="gh">Out[76]: </span><span class="go"></span>
<span class="go">2011-01-31   -1.281247</span>
<span class="go">2011-02-28   -0.727707</span>
<span class="go">2011-03-31   -0.121306</span>
<span class="go">2011-04-29   -0.097883</span>
<span class="go">2011-05-31    0.695775</span>
<span class="go">2011-06-30    0.341734</span>
<span class="go">2011-07-29    0.959726</span>
<span class="go">2011-08-31   -1.110336</span>
<span class="go">2011-09-30   -0.619976</span>
<span class="go">2011-10-31    0.149748</span>
<span class="go">2011-11-30   -0.732339</span>
<span class="go">2011-12-30    0.687738</span>
<span class="go">Freq: BM, dtype: float64</span>

<span class="gp">In [77]: </span><span class="n">ts</span><span class="p">[</span><span class="s1">&#39;2011-6&#39;</span><span class="p">]</span>
<span class="go">                                                                                                                                                                                                                                                                                                                       Out[77]: </span>
<span class="go">2011-06-30    0.341734</span>
<span class="go">Freq: BM, dtype: float64</span>
</pre></div>
</div>
<p>This type of slicing will work on a <code class="docutils literal"><span class="pre">DataFrame</span></code> with a <code class="docutils literal"><span class="pre">DatetimeIndex</span></code> as well. Since the
partial string selection is a form of label slicing, the endpoints <strong>will be</strong> included. This
would include matching times on an included date:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [78]: </span><span class="n">dft</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">100000</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span>
<span class="gp">   ....: </span>                   <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">],</span>
<span class="gp">   ....: </span>                   <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;20130101&#39;</span><span class="p">,</span><span class="n">periods</span><span class="o">=</span><span class="mi">100000</span><span class="p">,</span><span class="n">freq</span><span class="o">=</span><span class="s1">&#39;T&#39;</span><span class="p">))</span>
<span class="gp">   ....: </span>

<span class="gp">In [79]: </span><span class="n">dft</span>
<span class="gh">Out[79]: </span><span class="go"></span>
<span class="go">                            A</span>
<span class="go">2013-01-01 00:00:00  0.176444</span>
<span class="go">2013-01-01 00:01:00  0.403310</span>
<span class="go">2013-01-01 00:02:00 -0.154951</span>
<span class="go">2013-01-01 00:03:00  0.301624</span>
<span class="go">2013-01-01 00:04:00 -2.179861</span>
<span class="go">2013-01-01 00:05:00 -1.369849</span>
<span class="go">2013-01-01 00:06:00 -0.954208</span>
<span class="go">...                       ...</span>
<span class="go">2013-03-11 10:33:00 -0.293083</span>
<span class="go">2013-03-11 10:34:00 -0.059881</span>
<span class="go">2013-03-11 10:35:00  1.252450</span>
<span class="go">2013-03-11 10:36:00  0.046611</span>
<span class="go">2013-03-11 10:37:00  0.059478</span>
<span class="go">2013-03-11 10:38:00 -0.286539</span>
<span class="go">2013-03-11 10:39:00  0.841669</span>

<span class="go">[100000 rows x 1 columns]</span>

<span class="gp">In [80]: </span><span class="n">dft</span><span class="p">[</span><span class="s1">&#39;2013&#39;</span><span class="p">]</span>
<span class="go">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     Out[80]: </span>
<span class="go">                            A</span>
<span class="go">2013-01-01 00:00:00  0.176444</span>
<span class="go">2013-01-01 00:01:00  0.403310</span>
<span class="go">2013-01-01 00:02:00 -0.154951</span>
<span class="go">2013-01-01 00:03:00  0.301624</span>
<span class="go">2013-01-01 00:04:00 -2.179861</span>
<span class="go">2013-01-01 00:05:00 -1.369849</span>
<span class="go">2013-01-01 00:06:00 -0.954208</span>
<span class="go">...                       ...</span>
<span class="go">2013-03-11 10:33:00 -0.293083</span>
<span class="go">2013-03-11 10:34:00 -0.059881</span>
<span class="go">2013-03-11 10:35:00  1.252450</span>
<span class="go">2013-03-11 10:36:00  0.046611</span>
<span class="go">2013-03-11 10:37:00  0.059478</span>
<span class="go">2013-03-11 10:38:00 -0.286539</span>
<span class="go">2013-03-11 10:39:00  0.841669</span>

<span class="go">[100000 rows x 1 columns]</span>
</pre></div>
</div>
<p>This starts on the very first time in the month, and includes the last date &amp; time for the month</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [81]: </span><span class="n">dft</span><span class="p">[</span><span class="s1">&#39;2013-1&#39;</span><span class="p">:</span><span class="s1">&#39;2013-2&#39;</span><span class="p">]</span>
<span class="gh">Out[81]: </span><span class="go"></span>
<span class="go">                            A</span>
<span class="go">2013-01-01 00:00:00  0.176444</span>
<span class="go">2013-01-01 00:01:00  0.403310</span>
<span class="go">2013-01-01 00:02:00 -0.154951</span>
<span class="go">2013-01-01 00:03:00  0.301624</span>
<span class="go">2013-01-01 00:04:00 -2.179861</span>
<span class="go">2013-01-01 00:05:00 -1.369849</span>
<span class="go">2013-01-01 00:06:00 -0.954208</span>
<span class="go">...                       ...</span>
<span class="go">2013-02-28 23:53:00  0.103114</span>
<span class="go">2013-02-28 23:54:00 -1.303422</span>
<span class="go">2013-02-28 23:55:00  0.451943</span>
<span class="go">2013-02-28 23:56:00  0.220534</span>
<span class="go">2013-02-28 23:57:00 -1.624220</span>
<span class="go">2013-02-28 23:58:00  0.093915</span>
<span class="go">2013-02-28 23:59:00 -1.087454</span>

<span class="go">[84960 rows x 1 columns]</span>
</pre></div>
</div>
<p>This specifies a stop time <strong>that includes all of the times on the last day</strong></p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [82]: </span><span class="n">dft</span><span class="p">[</span><span class="s1">&#39;2013-1&#39;</span><span class="p">:</span><span class="s1">&#39;2013-2-28&#39;</span><span class="p">]</span>
<span class="gh">Out[82]: </span><span class="go"></span>
<span class="go">                            A</span>
<span class="go">2013-01-01 00:00:00  0.176444</span>
<span class="go">2013-01-01 00:01:00  0.403310</span>
<span class="go">2013-01-01 00:02:00 -0.154951</span>
<span class="go">2013-01-01 00:03:00  0.301624</span>
<span class="go">2013-01-01 00:04:00 -2.179861</span>
<span class="go">2013-01-01 00:05:00 -1.369849</span>
<span class="go">2013-01-01 00:06:00 -0.954208</span>
<span class="go">...                       ...</span>
<span class="go">2013-02-28 23:53:00  0.103114</span>
<span class="go">2013-02-28 23:54:00 -1.303422</span>
<span class="go">2013-02-28 23:55:00  0.451943</span>
<span class="go">2013-02-28 23:56:00  0.220534</span>
<span class="go">2013-02-28 23:57:00 -1.624220</span>
<span class="go">2013-02-28 23:58:00  0.093915</span>
<span class="go">2013-02-28 23:59:00 -1.087454</span>

<span class="go">[84960 rows x 1 columns]</span>
</pre></div>
</div>
<p>This specifies an <strong>exact</strong> stop time (and is not the same as the above)</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [83]: </span><span class="n">dft</span><span class="p">[</span><span class="s1">&#39;2013-1&#39;</span><span class="p">:</span><span class="s1">&#39;2013-2-28 00:00:00&#39;</span><span class="p">]</span>
<span class="gh">Out[83]: </span><span class="go"></span>
<span class="go">                            A</span>
<span class="go">2013-01-01 00:00:00  0.176444</span>
<span class="go">2013-01-01 00:01:00  0.403310</span>
<span class="go">2013-01-01 00:02:00 -0.154951</span>
<span class="go">2013-01-01 00:03:00  0.301624</span>
<span class="go">2013-01-01 00:04:00 -2.179861</span>
<span class="go">2013-01-01 00:05:00 -1.369849</span>
<span class="go">2013-01-01 00:06:00 -0.954208</span>
<span class="go">...                       ...</span>
<span class="go">2013-02-27 23:54:00  0.897051</span>
<span class="go">2013-02-27 23:55:00 -0.309230</span>
<span class="go">2013-02-27 23:56:00  1.944713</span>
<span class="go">2013-02-27 23:57:00  0.369265</span>
<span class="go">2013-02-27 23:58:00  0.053071</span>
<span class="go">2013-02-27 23:59:00 -0.019734</span>
<span class="go">2013-02-28 00:00:00  1.388189</span>

<span class="go">[83521 rows x 1 columns]</span>
</pre></div>
</div>
<p>We are stopping on the included end-point as it is part of the index</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [84]: </span><span class="n">dft</span><span class="p">[</span><span class="s1">&#39;2013-1-15&#39;</span><span class="p">:</span><span class="s1">&#39;2013-1-15 12:30:00&#39;</span><span class="p">]</span>
<span class="gh">Out[84]: </span><span class="go"></span>
<span class="go">                            A</span>
<span class="go">2013-01-15 00:00:00  0.501288</span>
<span class="go">2013-01-15 00:01:00 -0.605198</span>
<span class="go">2013-01-15 00:02:00  0.215146</span>
<span class="go">2013-01-15 00:03:00  0.924732</span>
<span class="go">2013-01-15 00:04:00 -2.228519</span>
<span class="go">2013-01-15 00:05:00  1.517331</span>
<span class="go">2013-01-15 00:06:00 -1.188774</span>
<span class="go">...                       ...</span>
<span class="go">2013-01-15 12:24:00  1.358314</span>
<span class="go">2013-01-15 12:25:00 -0.737727</span>
<span class="go">2013-01-15 12:26:00  1.838323</span>
<span class="go">2013-01-15 12:27:00 -0.774090</span>
<span class="go">2013-01-15 12:28:00  0.622261</span>
<span class="go">2013-01-15 12:29:00 -0.631649</span>
<span class="go">2013-01-15 12:30:00  0.193284</span>

<span class="go">[751 rows x 1 columns]</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.18.0.</span></p>
</div>
<p><code class="docutils literal"><span class="pre">DatetimeIndex</span></code> partial string indexing also works on a <code class="docutils literal"><span class="pre">DataFrame</span></code> with a <code class="docutils literal"><span class="pre">MultiIndex</span></code>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [85]: </span><span class="n">dft2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
<span class="gp">   ....: </span>                    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">],</span>
<span class="gp">   ....: </span>                    <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_product</span><span class="p">([</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;20130101&#39;</span><span class="p">,</span>
<span class="gp">   ....: </span>                                                                    <span class="n">periods</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
<span class="gp">   ....: </span>                                                                    <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;12H&#39;</span><span class="p">),</span>
<span class="gp">   ....: </span>                                                     <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">]]))</span>
<span class="gp">   ....: </span>

<span class="gp">In [86]: </span><span class="n">dft2</span>
<span class="gh">Out[86]: </span><span class="go"></span>
<span class="go">                              A</span>
<span class="go">2013-01-01 00:00:00 a -0.659574</span>
<span class="go">                    b  1.494522</span>
<span class="go">2013-01-01 12:00:00 a -0.778425</span>
<span class="go">                    b -0.253355</span>
<span class="go">2013-01-02 00:00:00 a -2.816159</span>
<span class="go">                    b -1.210929</span>
<span class="go">2013-01-02 12:00:00 a  0.144669</span>
<span class="go">...                         ...</span>
<span class="go">2013-01-04 00:00:00 b -1.624463</span>
<span class="go">2013-01-04 12:00:00 a  0.056912</span>
<span class="go">                    b  0.149867</span>
<span class="go">2013-01-05 00:00:00 a -1.256173</span>
<span class="go">                    b  2.324544</span>
<span class="go">2013-01-05 12:00:00 a -1.067396</span>
<span class="go">                    b -0.660996</span>

<span class="go">[20 rows x 1 columns]</span>

<span class="gp">In [87]: </span><span class="n">dft2</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;2013-01-05&#39;</span><span class="p">]</span>
<span class="go">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 Out[87]: </span>
<span class="go">                              A</span>
<span class="go">2013-01-05 00:00:00 a -1.256173</span>
<span class="go">                    b  2.324544</span>
<span class="go">2013-01-05 12:00:00 a -1.067396</span>
<span class="go">                    b -0.660996</span>

<span class="gp">In [88]: </span><span class="n">idx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">IndexSlice</span>

<span class="gp">In [89]: </span><span class="n">dft2</span> <span class="o">=</span> <span class="n">dft2</span><span class="o">.</span><span class="n">swaplevel</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>

<span class="gp">In [90]: </span><span class="n">dft2</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">[:,</span> <span class="s1">&#39;2013-01-05&#39;</span><span class="p">],</span> <span class="p">:]</span>
<span class="gh">Out[90]: </span><span class="go"></span>
<span class="go">                              A</span>
<span class="go">a 2013-01-05 00:00:00 -1.256173</span>
<span class="go">  2013-01-05 12:00:00 -1.067396</span>
<span class="go">b 2013-01-05 00:00:00  2.324544</span>
<span class="go">  2013-01-05 12:00:00 -0.660996</span>
</pre></div>
</div>
</div>
<div class="section" id="slice-vs-exact-match">
<span id="timeseries-slice-vs-exact-match"></span><h3>Slice vs. Exact Match<a class="headerlink" href="#slice-vs-exact-match" title="Permalink to this headline">¶</a></h3>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.20.0.</span></p>
</div>
<p>The same string used as an indexing parameter can be treated either as a slice or as an exact match depending on the resolution of the index. If the string is less accurate than the index, it will be treated as a slice, otherwise as an exact match.</p>
<p>Consider a <code class="docutils literal"><span class="pre">Series</span></code> object with a minute resolution index:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [91]: </span><span class="n">series_minute</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="gp">   ....: </span>                          <span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span><span class="p">([</span><span class="s1">&#39;2011-12-31 23:59:00&#39;</span><span class="p">,</span>
<span class="gp">   ....: </span>                                            <span class="s1">&#39;2012-01-01 00:00:00&#39;</span><span class="p">,</span>
<span class="gp">   ....: </span>                                            <span class="s1">&#39;2012-01-01 00:02:00&#39;</span><span class="p">]))</span>
<span class="gp">   ....: </span>

<span class="gp">In [92]: </span><span class="n">series_minute</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">resolution</span>
<span class="gh">Out[92]: </span><span class="go">&#39;minute&#39;</span>
</pre></div>
</div>
<p>A timestamp string less accurate than a minute gives a <code class="docutils literal"><span class="pre">Series</span></code> object.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [93]: </span><span class="n">series_minute</span><span class="p">[</span><span class="s1">&#39;2011-12-31 23&#39;</span><span class="p">]</span>
<span class="gh">Out[93]: </span><span class="go"></span>
<span class="go">2011-12-31 23:59:00    1</span>
<span class="go">dtype: int64</span>
</pre></div>
</div>
<p>A timestamp string with minute resolution (or more accurate), gives a scalar instead, i.e. it is not casted to a slice.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [94]: </span><span class="n">series_minute</span><span class="p">[</span><span class="s1">&#39;2011-12-31 23:59&#39;</span><span class="p">]</span>
<span class="gh">Out[94]: </span><span class="go">1</span>

<span class="gp">In [95]: </span><span class="n">series_minute</span><span class="p">[</span><span class="s1">&#39;2011-12-31 23:59:00&#39;</span><span class="p">]</span>
<span class="go">           Out[95]: 1</span>
</pre></div>
</div>
<p>If index resolution is second, then, the minute-accurate timestamp gives a <code class="docutils literal"><span class="pre">Series</span></code>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [96]: </span><span class="n">series_second</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="gp">   ....: </span>                          <span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span><span class="p">([</span><span class="s1">&#39;2011-12-31 23:59:59&#39;</span><span class="p">,</span>
<span class="gp">   ....: </span>                                            <span class="s1">&#39;2012-01-01 00:00:00&#39;</span><span class="p">,</span>
<span class="gp">   ....: </span>                                            <span class="s1">&#39;2012-01-01 00:00:01&#39;</span><span class="p">]))</span>
<span class="gp">   ....: </span>

<span class="gp">In [97]: </span><span class="n">series_second</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">resolution</span>
<span class="gh">Out[97]: </span><span class="go">&#39;second&#39;</span>

<span class="gp">In [98]: </span><span class="n">series_second</span><span class="p">[</span><span class="s1">&#39;2011-12-31 23:59&#39;</span><span class="p">]</span>
<span class="go">                  Out[98]: </span>
<span class="go">2011-12-31 23:59:59    1</span>
<span class="go">dtype: int64</span>
</pre></div>
</div>
<p>If the timestamp string is treated as a slice, it can be used to index <code class="docutils literal"><span class="pre">DataFrame</span></code> with <code class="docutils literal"><span class="pre">[]</span></code> as well.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [99]: </span><span class="n">dft_minute</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]},</span>
<span class="gp">   ....: </span>                           <span class="n">index</span><span class="o">=</span><span class="n">series_minute</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [100]: </span><span class="n">dft_minute</span><span class="p">[</span><span class="s1">&#39;2011-12-31 23&#39;</span><span class="p">]</span>
<span class="gh">Out[100]: </span><span class="go"></span>
<span class="go">                     a  b</span>
<span class="go">2011-12-31 23:59:00  1  4</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>However, if the string is treated as an exact match, the selection in <code class="docutils literal"><span class="pre">DataFrame</span></code>&#8216;s <code class="docutils literal"><span class="pre">[]</span></code> will be column-wise and not row-wise, see <a class="reference internal" href="indexing.html#indexing-basics"><span class="std std-ref">Indexing Basics</span></a>. For example <code class="docutils literal"><span class="pre">dft_minute['2011-12-31</span> <span class="pre">23:59']</span></code> will raise <code class="docutils literal"><span class="pre">KeyError</span></code> as <code class="docutils literal"><span class="pre">'2012-12-31</span> <span class="pre">23:59'</span></code> has the same resolution as the index and there is no column with such name:</p>
<p>To <em>always</em> have unambiguous selection, whether the row is treated as a slice or a single selection, use <code class="docutils literal"><span class="pre">.loc</span></code>.</p>
<div class="last highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [101]: </span><span class="n">dft_minute</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;2011-12-31 23:59&#39;</span><span class="p">]</span>
<span class="gh">Out[101]: </span><span class="go"></span>
<span class="go">a    1</span>
<span class="go">b    4</span>
<span class="go">Name: 2011-12-31 23:59:00, dtype: int64</span>
</pre></div>
</div>
</div>
<p>Note also that <code class="docutils literal"><span class="pre">DatetimeIndex</span></code> resolution cannot be less precise than day.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [102]: </span><span class="n">series_monthly</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="gp">   .....: </span>                          <span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span><span class="p">([</span><span class="s1">&#39;2011-12&#39;</span><span class="p">,</span>
<span class="gp">   .....: </span>                                            <span class="s1">&#39;2012-01&#39;</span><span class="p">,</span>
<span class="gp">   .....: </span>                                            <span class="s1">&#39;2012-02&#39;</span><span class="p">]))</span>
<span class="gp">   .....: </span>

<span class="gp">In [103]: </span><span class="n">series_monthly</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">resolution</span>
<span class="gh">Out[103]: </span><span class="go">&#39;day&#39;</span>

<span class="gp">In [104]: </span><span class="n">series_monthly</span><span class="p">[</span><span class="s1">&#39;2011-12&#39;</span><span class="p">]</span> <span class="c1"># returns Series</span>
<span class="go">                Out[104]: </span>
<span class="go">2011-12-01    1</span>
<span class="go">dtype: int64</span>
</pre></div>
</div>
</div>
<div class="section" id="exact-indexing">
<h3>Exact Indexing<a class="headerlink" href="#exact-indexing" title="Permalink to this headline">¶</a></h3>
<p>As discussed in previous section, indexing a <code class="docutils literal"><span class="pre">DatetimeIndex</span></code> with a partial string depends on the &#8220;accuracy&#8221; of the period, in other words how specific the interval is in relation to the resolution of the index. In contrast, indexing with <code class="docutils literal"><span class="pre">Timestamp</span></code> or <code class="docutils literal"><span class="pre">datetime</span></code> objects is exact, because the objects have exact meaning. These also follow the semantics of <em>including both endpoints</em>.</p>
<p>These <code class="docutils literal"><span class="pre">Timestamp</span></code> and <code class="docutils literal"><span class="pre">datetime</span></code> objects have exact <code class="docutils literal"><span class="pre">hours,</span> <span class="pre">minutes,</span></code> and <code class="docutils literal"><span class="pre">seconds</span></code>, even though they were not explicitly specified (they are <code class="docutils literal"><span class="pre">0</span></code>).</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [105]: </span><span class="n">dft</span><span class="p">[</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">28</span><span class="p">)]</span>
<span class="gh">Out[105]: </span><span class="go"></span>
<span class="go">                            A</span>
<span class="go">2013-01-01 00:00:00  0.176444</span>
<span class="go">2013-01-01 00:01:00  0.403310</span>
<span class="go">2013-01-01 00:02:00 -0.154951</span>
<span class="go">2013-01-01 00:03:00  0.301624</span>
<span class="go">2013-01-01 00:04:00 -2.179861</span>
<span class="go">2013-01-01 00:05:00 -1.369849</span>
<span class="go">2013-01-01 00:06:00 -0.954208</span>
<span class="go">...                       ...</span>
<span class="go">2013-02-27 23:54:00  0.897051</span>
<span class="go">2013-02-27 23:55:00 -0.309230</span>
<span class="go">2013-02-27 23:56:00  1.944713</span>
<span class="go">2013-02-27 23:57:00  0.369265</span>
<span class="go">2013-02-27 23:58:00  0.053071</span>
<span class="go">2013-02-27 23:59:00 -0.019734</span>
<span class="go">2013-02-28 00:00:00  1.388189</span>

<span class="go">[83521 rows x 1 columns]</span>
</pre></div>
</div>
<p>With no defaults.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [106]: </span><span class="n">dft</span><span class="p">[</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>
<span class="gh">Out[106]: </span><span class="go"></span>
<span class="go">                            A</span>
<span class="go">2013-01-01 10:12:00 -0.246733</span>
<span class="go">2013-01-01 10:13:00 -1.429225</span>
<span class="go">2013-01-01 10:14:00 -1.265339</span>
<span class="go">2013-01-01 10:15:00  0.710986</span>
<span class="go">2013-01-01 10:16:00 -0.818200</span>
<span class="go">2013-01-01 10:17:00  0.543542</span>
<span class="go">2013-01-01 10:18:00  1.577713</span>
<span class="go">...                       ...</span>
<span class="go">2013-02-28 10:06:00  0.311249</span>
<span class="go">2013-02-28 10:07:00  2.366080</span>
<span class="go">2013-02-28 10:08:00 -0.490372</span>
<span class="go">2013-02-28 10:09:00  0.373340</span>
<span class="go">2013-02-28 10:10:00  0.638442</span>
<span class="go">2013-02-28 10:11:00  1.330135</span>
<span class="go">2013-02-28 10:12:00 -0.945450</span>

<span class="go">[83521 rows x 1 columns]</span>
</pre></div>
</div>
</div>
<div class="section" id="truncating-fancy-indexing">
<h3>Truncating &amp; Fancy Indexing<a class="headerlink" href="#truncating-fancy-indexing" title="Permalink to this headline">¶</a></h3>
<p>A <code class="docutils literal"><span class="pre">truncate</span></code> convenience function is provided that is similar to slicing.
Note that <code class="docutils literal"><span class="pre">truncate</span></code> assumes a 0 value for any unspecified date component
in a <code class="docutils literal"><span class="pre">DatetimeIndex</span></code> in contrast to slicing which returns any partially
matching dates:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [107]: </span><span class="n">rng2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;2011-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2012-01-01&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;W&#39;</span><span class="p">)</span>

<span class="gp">In [108]: </span><span class="n">ts2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">rng2</span><span class="p">)),</span> <span class="n">index</span><span class="o">=</span><span class="n">rng2</span><span class="p">)</span>

<span class="gp">In [109]: </span><span class="n">ts2</span><span class="o">.</span><span class="n">truncate</span><span class="p">(</span><span class="n">before</span><span class="o">=</span><span class="s1">&#39;2011-11&#39;</span><span class="p">,</span> <span class="n">after</span><span class="o">=</span><span class="s1">&#39;2011-12&#39;</span><span class="p">)</span>
<span class="gh">Out[109]: </span><span class="go"></span>
<span class="go">2011-11-06   -0.773743</span>
<span class="go">2011-11-13    0.247216</span>
<span class="go">2011-11-20    0.591308</span>
<span class="go">2011-11-27    2.228500</span>
<span class="go">Freq: W-SUN, dtype: float64</span>

<span class="gp">In [110]: </span><span class="n">ts2</span><span class="p">[</span><span class="s1">&#39;2011-11&#39;</span><span class="p">:</span><span class="s1">&#39;2011-12&#39;</span><span class="p">]</span>
<span class="go">                                                                                                                                   Out[110]: </span>
<span class="go">2011-11-06   -0.773743</span>
<span class="go">2011-11-13    0.247216</span>
<span class="go">2011-11-20    0.591308</span>
<span class="go">2011-11-27    2.228500</span>
<span class="go">2011-12-04    0.838769</span>
<span class="go">2011-12-11    0.658538</span>
<span class="go">2011-12-18    0.567353</span>
<span class="go">2011-12-25   -1.076735</span>
<span class="go">Freq: W-SUN, dtype: float64</span>
</pre></div>
</div>
<p>Even complicated fancy indexing that breaks the <code class="docutils literal"><span class="pre">DatetimeIndex</span></code> frequency
regularity will result in a <code class="docutils literal"><span class="pre">DatetimeIndex</span></code>, although frequency is lost:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [111]: </span><span class="n">ts2</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">]]</span><span class="o">.</span><span class="n">index</span>
<span class="gh">Out[111]: </span><span class="go">DatetimeIndex([&#39;2011-01-02&#39;, &#39;2011-01-16&#39;, &#39;2011-02-13&#39;], dtype=&#39;datetime64[ns]&#39;, freq=None)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="time-date-components">
<span id="timeseries-components"></span><h2>Time/Date Components<a class="headerlink" href="#time-date-components" title="Permalink to this headline">¶</a></h2>
<p>There are several time/date properties that one can access from <code class="docutils literal"><span class="pre">Timestamp</span></code> or a collection of timestamps like a <code class="docutils literal"><span class="pre">DatetimeIndex</span></code>.</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>year</td>
<td>The year of the datetime</td>
</tr>
<tr class="row-odd"><td>month</td>
<td>The month of the datetime</td>
</tr>
<tr class="row-even"><td>day</td>
<td>The days of the datetime</td>
</tr>
<tr class="row-odd"><td>hour</td>
<td>The hour of the datetime</td>
</tr>
<tr class="row-even"><td>minute</td>
<td>The minutes of the datetime</td>
</tr>
<tr class="row-odd"><td>second</td>
<td>The seconds of the datetime</td>
</tr>
<tr class="row-even"><td>microsecond</td>
<td>The microseconds of the datetime</td>
</tr>
<tr class="row-odd"><td>nanosecond</td>
<td>The nanoseconds of the datetime</td>
</tr>
<tr class="row-even"><td>date</td>
<td>Returns datetime.date (does not contain timezone information)</td>
</tr>
<tr class="row-odd"><td>time</td>
<td>Returns datetime.time (does not contain timezone information)</td>
</tr>
<tr class="row-even"><td>dayofyear</td>
<td>The ordinal day of year</td>
</tr>
<tr class="row-odd"><td>weekofyear</td>
<td>The week ordinal of the year</td>
</tr>
<tr class="row-even"><td>week</td>
<td>The week ordinal of the year</td>
</tr>
<tr class="row-odd"><td>dayofweek</td>
<td>The number of the day of the week with Monday=0, Sunday=6</td>
</tr>
<tr class="row-even"><td>weekday</td>
<td>The number of the day of the week with Monday=0, Sunday=6</td>
</tr>
<tr class="row-odd"><td>weekday_name</td>
<td>The name of the day in a week (ex: Friday)</td>
</tr>
<tr class="row-even"><td>quarter</td>
<td>Quarter of the date: Jan-Mar = 1, Apr-Jun = 2, etc.</td>
</tr>
<tr class="row-odd"><td>days_in_month</td>
<td>The number of days in the month of the datetime</td>
</tr>
<tr class="row-even"><td>is_month_start</td>
<td>Logical indicating if first day of month (defined by frequency)</td>
</tr>
<tr class="row-odd"><td>is_month_end</td>
<td>Logical indicating if last day of month (defined by frequency)</td>
</tr>
<tr class="row-even"><td>is_quarter_start</td>
<td>Logical indicating if first day of quarter (defined by frequency)</td>
</tr>
<tr class="row-odd"><td>is_quarter_end</td>
<td>Logical indicating if last day of quarter (defined by frequency)</td>
</tr>
<tr class="row-even"><td>is_year_start</td>
<td>Logical indicating if first day of year (defined by frequency)</td>
</tr>
<tr class="row-odd"><td>is_year_end</td>
<td>Logical indicating if last day of year (defined by frequency)</td>
</tr>
<tr class="row-even"><td>is_leap_year</td>
<td>Logical indicating if the date belongs to a leap year</td>
</tr>
</tbody>
</table>
<p>Furthermore, if you have a <code class="docutils literal"><span class="pre">Series</span></code> with datetimelike values, then you can access these properties via the <code class="docutils literal"><span class="pre">.dt</span></code> accessor, see the <a class="reference internal" href="basics.html#basics-dt-accessors"><span class="std std-ref">docs</span></a></p>
</div>
<div class="section" id="dateoffset-objects">
<span id="timeseries-offsets"></span><h2>DateOffset Objects<a class="headerlink" href="#dateoffset-objects" title="Permalink to this headline">¶</a></h2>
<p>In the preceding examples, we created <code class="docutils literal"><span class="pre">DatetimeIndex</span></code> objects at various
frequencies by passing in <a class="reference internal" href="#timeseries-offset-aliases"><span class="std std-ref">frequency strings</span></a>
like &#8216;M&#8217;, &#8216;W&#8217;, and &#8216;BM to the <code class="docutils literal"><span class="pre">freq</span></code> keyword. Under the hood, these frequency
strings are being translated into an instance of pandas <code class="docutils literal"><span class="pre">DateOffset</span></code>,
which represents a regular frequency increment. Specific offset logic like
&#8220;month&#8221;, &#8220;business day&#8221;, or &#8220;one hour&#8221; is represented in its various subclasses.</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Class name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>DateOffset</td>
<td>Generic offset class, defaults to 1 calendar day</td>
</tr>
<tr class="row-odd"><td>BDay</td>
<td>business day (weekday)</td>
</tr>
<tr class="row-even"><td>CDay</td>
<td>custom business day</td>
</tr>
<tr class="row-odd"><td>Week</td>
<td>one week, optionally anchored on a day of the week</td>
</tr>
<tr class="row-even"><td>WeekOfMonth</td>
<td>the x-th day of the y-th week of each month</td>
</tr>
<tr class="row-odd"><td>LastWeekOfMonth</td>
<td>the x-th day of the last week of each month</td>
</tr>
<tr class="row-even"><td>MonthEnd</td>
<td>calendar month end</td>
</tr>
<tr class="row-odd"><td>MonthBegin</td>
<td>calendar month begin</td>
</tr>
<tr class="row-even"><td>BMonthEnd</td>
<td>business month end</td>
</tr>
<tr class="row-odd"><td>BMonthBegin</td>
<td>business month begin</td>
</tr>
<tr class="row-even"><td>CBMonthEnd</td>
<td>custom business month end</td>
</tr>
<tr class="row-odd"><td>CBMonthBegin</td>
<td>custom business month begin</td>
</tr>
<tr class="row-even"><td>SemiMonthEnd</td>
<td>15th (or other day_of_month) and calendar month end</td>
</tr>
<tr class="row-odd"><td>SemiMonthBegin</td>
<td>15th (or other day_of_month) and calendar month begin</td>
</tr>
<tr class="row-even"><td>QuarterEnd</td>
<td>calendar quarter end</td>
</tr>
<tr class="row-odd"><td>QuarterBegin</td>
<td>calendar quarter begin</td>
</tr>
<tr class="row-even"><td>BQuarterEnd</td>
<td>business quarter end</td>
</tr>
<tr class="row-odd"><td>BQuarterBegin</td>
<td>business quarter begin</td>
</tr>
<tr class="row-even"><td>FY5253Quarter</td>
<td>retail (aka 52-53 week) quarter</td>
</tr>
<tr class="row-odd"><td>YearEnd</td>
<td>calendar year end</td>
</tr>
<tr class="row-even"><td>YearBegin</td>
<td>calendar year begin</td>
</tr>
<tr class="row-odd"><td>BYearEnd</td>
<td>business year end</td>
</tr>
<tr class="row-even"><td>BYearBegin</td>
<td>business year begin</td>
</tr>
<tr class="row-odd"><td>FY5253</td>
<td>retail (aka 52-53 week) year</td>
</tr>
<tr class="row-even"><td>BusinessHour</td>
<td>business hour</td>
</tr>
<tr class="row-odd"><td>CustomBusinessHour</td>
<td>custom business hour</td>
</tr>
<tr class="row-even"><td>Hour</td>
<td>one hour</td>
</tr>
<tr class="row-odd"><td>Minute</td>
<td>one minute</td>
</tr>
<tr class="row-even"><td>Second</td>
<td>one second</td>
</tr>
<tr class="row-odd"><td>Milli</td>
<td>one millisecond</td>
</tr>
<tr class="row-even"><td>Micro</td>
<td>one microsecond</td>
</tr>
<tr class="row-odd"><td>Nano</td>
<td>one nanosecond</td>
</tr>
</tbody>
</table>
<p>The basic <code class="docutils literal"><span class="pre">DateOffset</span></code> takes the same arguments as
<code class="docutils literal"><span class="pre">dateutil.relativedelta</span></code>, which works like:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [112]: </span><span class="n">d</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2008</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="gp">In [113]: </span><span class="n">d</span> <span class="o">+</span> <span class="n">relativedelta</span><span class="p">(</span><span class="n">months</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">days</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="gh">Out[113]: </span><span class="go">datetime.datetime(2008, 12, 23, 9, 0)</span>
</pre></div>
</div>
<p>We could have done the same thing with <code class="docutils literal"><span class="pre">DateOffset</span></code>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [114]: </span><span class="kn">from</span> <span class="nn">pandas.tseries.offsets</span> <span class="kn">import</span> <span class="o">*</span>

<span class="gp">In [115]: </span><span class="n">d</span> <span class="o">+</span> <span class="n">DateOffset</span><span class="p">(</span><span class="n">months</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">days</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="gh">Out[115]: </span><span class="go">Timestamp(&#39;2008-12-23 09:00:00&#39;)</span>
</pre></div>
</div>
<p>The key features of a <code class="docutils literal"><span class="pre">DateOffset</span></code> object are:</p>
<ul class="simple">
<li>it can be added / subtracted to/from a datetime object to obtain a
shifted date</li>
<li>it can be multiplied by an integer (positive or negative) so that the
increment will be applied multiple times</li>
<li>it has <code class="docutils literal"><span class="pre">rollforward</span></code> and <code class="docutils literal"><span class="pre">rollback</span></code> methods for moving a date forward
or backward to the next or previous &#8220;offset date&#8221;</li>
</ul>
<p>Subclasses of <code class="docutils literal"><span class="pre">DateOffset</span></code> define the <code class="docutils literal"><span class="pre">apply</span></code> function which dictates
custom date increment logic, such as adding business days:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">BDay</span><span class="p">(</span><span class="n">DateOffset</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;DateOffset increments between business days&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="o">...</span>
</pre></div>
</div>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [116]: </span><span class="n">d</span> <span class="o">-</span> <span class="mi">5</span> <span class="o">*</span> <span class="n">BDay</span><span class="p">()</span>
<span class="gh">Out[116]: </span><span class="go">Timestamp(&#39;2008-08-11 09:00:00&#39;)</span>

<span class="gp">In [117]: </span><span class="n">d</span> <span class="o">+</span> <span class="n">BMonthEnd</span><span class="p">()</span>
<span class="go">                                           Out[117]: Timestamp(&#39;2008-08-29 09:00:00&#39;)</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">rollforward</span></code> and <code class="docutils literal"><span class="pre">rollback</span></code> methods do exactly what you would expect:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [118]: </span><span class="n">d</span>
<span class="gh">Out[118]: </span><span class="go">datetime.datetime(2008, 8, 18, 9, 0)</span>

<span class="gp">In [119]: </span><span class="n">offset</span> <span class="o">=</span> <span class="n">BMonthEnd</span><span class="p">()</span>

<span class="gp">In [120]: </span><span class="n">offset</span><span class="o">.</span><span class="n">rollforward</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="gh">Out[120]: </span><span class="go">Timestamp(&#39;2008-08-29 09:00:00&#39;)</span>

<span class="gp">In [121]: </span><span class="n">offset</span><span class="o">.</span><span class="n">rollback</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="go">                                           Out[121]: Timestamp(&#39;2008-07-31 09:00:00&#39;)</span>
</pre></div>
</div>
<p>It&#8217;s definitely worth exploring the <code class="docutils literal"><span class="pre">pandas.tseries.offsets</span></code> module and the
various docstrings for the classes.</p>
<p>These operations (<code class="docutils literal"><span class="pre">apply</span></code>, <code class="docutils literal"><span class="pre">rollforward</span></code> and <code class="docutils literal"><span class="pre">rollback</span></code>) preserves time (hour, minute, etc) information by default. To reset time, use <code class="docutils literal"><span class="pre">normalize=True</span></code> keyword when creating the offset instance. If <code class="docutils literal"><span class="pre">normalize=True</span></code>, result is normalized after the function is applied.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [122]: </span><span class="n">day</span> <span class="o">=</span> <span class="n">Day</span><span class="p">()</span>

<span class="gp">In [123]: </span><span class="n">day</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-01-01 09:00&#39;</span><span class="p">))</span>
<span class="gh">Out[123]: </span><span class="go">Timestamp(&#39;2014-01-02 09:00:00&#39;)</span>

<span class="gp">In [124]: </span><span class="n">day</span> <span class="o">=</span> <span class="n">Day</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="gp">In [125]: </span><span class="n">day</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-01-01 09:00&#39;</span><span class="p">))</span>
<span class="gh">Out[125]: </span><span class="go">Timestamp(&#39;2014-01-02 00:00:00&#39;)</span>

<span class="gp">In [126]: </span><span class="n">hour</span> <span class="o">=</span> <span class="n">Hour</span><span class="p">()</span>

<span class="gp">In [127]: </span><span class="n">hour</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-01-01 22:00&#39;</span><span class="p">))</span>
<span class="gh">Out[127]: </span><span class="go">Timestamp(&#39;2014-01-01 23:00:00&#39;)</span>

<span class="gp">In [128]: </span><span class="n">hour</span> <span class="o">=</span> <span class="n">Hour</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="gp">In [129]: </span><span class="n">hour</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-01-01 22:00&#39;</span><span class="p">))</span>
<span class="gh">Out[129]: </span><span class="go">Timestamp(&#39;2014-01-01 00:00:00&#39;)</span>

<span class="gp">In [130]: </span><span class="n">hour</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-01-01 23:00&#39;</span><span class="p">))</span>
<span class="go">                                           Out[130]: Timestamp(&#39;2014-01-02 00:00:00&#39;)</span>
</pre></div>
</div>
<div class="section" id="parametric-offsets">
<h3>Parametric Offsets<a class="headerlink" href="#parametric-offsets" title="Permalink to this headline">¶</a></h3>
<p>Some of the offsets can be &#8220;parameterized&#8221; when created to result in different
behaviors. For example, the <code class="docutils literal"><span class="pre">Week</span></code> offset for generating weekly data accepts a
<code class="docutils literal"><span class="pre">weekday</span></code> parameter which results in the generated dates always lying on a
particular day of the week:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [131]: </span><span class="n">d</span>
<span class="gh">Out[131]: </span><span class="go">datetime.datetime(2008, 8, 18, 9, 0)</span>

<span class="gp">In [132]: </span><span class="n">d</span> <span class="o">+</span> <span class="n">Week</span><span class="p">()</span>
<span class="go">                                               Out[132]: Timestamp(&#39;2008-08-25 09:00:00&#39;)</span>

<span class="gp">In [133]: </span><span class="n">d</span> <span class="o">+</span> <span class="n">Week</span><span class="p">(</span><span class="n">weekday</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="go">                                                                                          Out[133]: Timestamp(&#39;2008-08-22 09:00:00&#39;)</span>

<span class="gp">In [134]: </span><span class="p">(</span><span class="n">d</span> <span class="o">+</span> <span class="n">Week</span><span class="p">(</span><span class="n">weekday</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span><span class="o">.</span><span class="n">weekday</span><span class="p">()</span>
<span class="go">                                                                                                                                     Out[134]: 4</span>

<span class="gp">In [135]: </span><span class="n">d</span> <span class="o">-</span> <span class="n">Week</span><span class="p">()</span>
<span class="go">                                                                                                                                                 Out[135]: Timestamp(&#39;2008-08-11 09:00:00&#39;)</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">normalize</span></code> option will be effective for addition and subtraction.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [136]: </span><span class="n">d</span> <span class="o">+</span> <span class="n">Week</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gh">Out[136]: </span><span class="go">Timestamp(&#39;2008-08-25 00:00:00&#39;)</span>

<span class="gp">In [137]: </span><span class="n">d</span> <span class="o">-</span> <span class="n">Week</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">                                           Out[137]: Timestamp(&#39;2008-08-11 00:00:00&#39;)</span>
</pre></div>
</div>
<p>Another example is parameterizing <code class="docutils literal"><span class="pre">YearEnd</span></code> with the specific ending month:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [138]: </span><span class="n">d</span> <span class="o">+</span> <span class="n">YearEnd</span><span class="p">()</span>
<span class="gh">Out[138]: </span><span class="go">Timestamp(&#39;2008-12-31 09:00:00&#39;)</span>

<span class="gp">In [139]: </span><span class="n">d</span> <span class="o">+</span> <span class="n">YearEnd</span><span class="p">(</span><span class="n">month</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
<span class="go">                                           Out[139]: Timestamp(&#39;2009-06-30 09:00:00&#39;)</span>
</pre></div>
</div>
</div>
<div class="section" id="using-offsets-with-series-datetimeindex">
<span id="timeseries-offsetseries"></span><h3>Using Offsets with <code class="docutils literal"><span class="pre">Series</span></code> / <code class="docutils literal"><span class="pre">DatetimeIndex</span></code><a class="headerlink" href="#using-offsets-with-series-datetimeindex" title="Permalink to this headline">¶</a></h3>
<p>Offsets can be used with either a <code class="docutils literal"><span class="pre">Series</span></code> or <code class="docutils literal"><span class="pre">DatetimeIndex</span></code> to
apply the offset to each element.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [140]: </span><span class="n">rng</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;2012-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2012-01-03&#39;</span><span class="p">)</span>

<span class="gp">In [141]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">rng</span><span class="p">)</span>

<span class="gp">In [142]: </span><span class="n">rng</span>
<span class="gh">Out[142]: </span><span class="go">DatetimeIndex([&#39;2012-01-01&#39;, &#39;2012-01-02&#39;, &#39;2012-01-03&#39;], dtype=&#39;datetime64[ns]&#39;, freq=&#39;D&#39;)</span>

<span class="gp">In [143]: </span><span class="n">rng</span> <span class="o">+</span> <span class="n">DateOffset</span><span class="p">(</span><span class="n">months</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="go">                                                                                                      Out[143]: DatetimeIndex([&#39;2012-03-01&#39;, &#39;2012-03-02&#39;, &#39;2012-03-03&#39;], dtype=&#39;datetime64[ns]&#39;, freq=&#39;D&#39;)</span>

<span class="gp">In [144]: </span><span class="n">s</span> <span class="o">+</span> <span class="n">DateOffset</span><span class="p">(</span><span class="n">months</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="go">                                                                                                                                                                                                            Out[144]: </span>
<span class="go">0   2012-03-01</span>
<span class="go">1   2012-03-02</span>
<span class="go">2   2012-03-03</span>
<span class="go">dtype: datetime64[ns]</span>

<span class="gp">In [145]: </span><span class="n">s</span> <span class="o">-</span> <span class="n">DateOffset</span><span class="p">(</span><span class="n">months</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="go">                                                                                                                                                                                                                                                                                          Out[145]: </span>
<span class="go">0   2011-11-01</span>
<span class="go">1   2011-11-02</span>
<span class="go">2   2011-11-03</span>
<span class="go">dtype: datetime64[ns]</span>
</pre></div>
</div>
<p>If the offset class maps directly to a <code class="docutils literal"><span class="pre">Timedelta</span></code> (<code class="docutils literal"><span class="pre">Day</span></code>, <code class="docutils literal"><span class="pre">Hour</span></code>,
<code class="docutils literal"><span class="pre">Minute</span></code>, <code class="docutils literal"><span class="pre">Second</span></code>, <code class="docutils literal"><span class="pre">Micro</span></code>, <code class="docutils literal"><span class="pre">Milli</span></code>, <code class="docutils literal"><span class="pre">Nano</span></code>) it can be
used exactly like a <code class="docutils literal"><span class="pre">Timedelta</span></code> - see the
<a class="reference internal" href="timedeltas.html#timedeltas-operations"><span class="std std-ref">Timedelta section</span></a> for more examples.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [146]: </span><span class="n">s</span> <span class="o">-</span> <span class="n">Day</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gh">Out[146]: </span><span class="go"></span>
<span class="go">0   2011-12-30</span>
<span class="go">1   2011-12-31</span>
<span class="go">2   2012-01-01</span>
<span class="go">dtype: datetime64[ns]</span>

<span class="gp">In [147]: </span><span class="n">td</span> <span class="o">=</span> <span class="n">s</span> <span class="o">-</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;2011-12-29&#39;</span><span class="p">,</span> <span class="s1">&#39;2011-12-31&#39;</span><span class="p">))</span>

<span class="gp">In [148]: </span><span class="n">td</span>
<span class="gh">Out[148]: </span><span class="go"></span>
<span class="go">0   3 days</span>
<span class="go">1   3 days</span>
<span class="go">2   3 days</span>
<span class="go">dtype: timedelta64[ns]</span>

<span class="gp">In [149]: </span><span class="n">td</span> <span class="o">+</span> <span class="n">Minute</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
<span class="go">                                                                   Out[149]: </span>
<span class="go">0   3 days 00:15:00</span>
<span class="go">1   3 days 00:15:00</span>
<span class="go">2   3 days 00:15:00</span>
<span class="go">dtype: timedelta64[ns]</span>
</pre></div>
</div>
<p>Note that some offsets (such as <code class="docutils literal"><span class="pre">BQuarterEnd</span></code>) do not have a
vectorized implementation.  They can still be used but may
calculate significantly slower and will show a <code class="docutils literal"><span class="pre">PerformanceWarning</span></code></p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [150]: </span><span class="n">rng</span> <span class="o">+</span> <span class="n">BQuarterEnd</span><span class="p">()</span>
<span class="gh">Out[150]: </span><span class="go">DatetimeIndex([&#39;2012-03-30&#39;, &#39;2012-03-30&#39;, &#39;2012-03-30&#39;], dtype=&#39;datetime64[ns]&#39;, freq=None)</span>
</pre></div>
</div>
</div>
<div class="section" id="custom-business-days">
<span id="timeseries-custombusinessdays"></span><h3>Custom Business Days<a class="headerlink" href="#custom-business-days" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">CDay</span></code> or <code class="docutils literal"><span class="pre">CustomBusinessDay</span></code> class provides a parametric
<code class="docutils literal"><span class="pre">BusinessDay</span></code> class which can be used to create customized business day
calendars which account for local holidays and local weekend conventions.</p>
<p>As an interesting example, let&#8217;s look at Egypt where a Friday-Saturday weekend is observed.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [151]: </span><span class="kn">from</span> <span class="nn">pandas.tseries.offsets</span> <span class="kn">import</span> <span class="n">CustomBusinessDay</span>

<span class="gp">In [152]: </span><span class="n">weekmask_egypt</span> <span class="o">=</span> <span class="s1">&#39;Sun Mon Tue Wed Thu&#39;</span>

<span class="go"># They also observe International Workers&#39; Day so let&#39;s</span>
<span class="go"># add that for a couple of years</span>
<span class="gp">In [153]: </span><span class="n">holidays</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;2012-05-01&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2014-05-01&#39;</span><span class="p">)]</span>

<span class="gp">In [154]: </span><span class="n">bday_egypt</span> <span class="o">=</span> <span class="n">CustomBusinessDay</span><span class="p">(</span><span class="n">holidays</span><span class="o">=</span><span class="n">holidays</span><span class="p">,</span> <span class="n">weekmask</span><span class="o">=</span><span class="n">weekmask_egypt</span><span class="p">)</span>

<span class="gp">In [155]: </span><span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>

<span class="gp">In [156]: </span><span class="n">dt</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">bday_egypt</span>
<span class="gh">Out[156]: </span><span class="go">Timestamp(&#39;2013-05-05 00:00:00&#39;)</span>
</pre></div>
</div>
<p>Let&#8217;s map to the weekday names</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [157]: </span><span class="n">dts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="n">bday_egypt</span><span class="p">)</span>

<span class="gp">In [158]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">dts</span><span class="o">.</span><span class="n">weekday</span><span class="p">,</span> <span class="n">dts</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="s1">&#39;Mon Tue Wed Thu Fri Sat Sun&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">()))</span>
<span class="gh">Out[158]: </span><span class="go"></span>
<span class="go">2013-04-30    Tue</span>
<span class="go">2013-05-02    Thu</span>
<span class="go">2013-05-05    Sun</span>
<span class="go">2013-05-06    Mon</span>
<span class="go">2013-05-07    Tue</span>
<span class="go">Freq: C, dtype: object</span>
</pre></div>
</div>
<p>Holiday calendars can be used to provide the list of holidays.  See the
<a class="reference internal" href="#timeseries-holiday"><span class="std std-ref">holiday calendar</span></a> section for more information.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [159]: </span><span class="kn">from</span> <span class="nn">pandas.tseries.holiday</span> <span class="kn">import</span> <span class="n">USFederalHolidayCalendar</span>

<span class="gp">In [160]: </span><span class="n">bday_us</span> <span class="o">=</span> <span class="n">CustomBusinessDay</span><span class="p">(</span><span class="n">calendar</span><span class="o">=</span><span class="n">USFederalHolidayCalendar</span><span class="p">())</span>

<span class="go"># Friday before MLK Day</span>
<span class="gp">In [161]: </span><span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2014</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">17</span><span class="p">)</span>

<span class="go"># Tuesday after MLK Day (Monday is skipped because it&#39;s a holiday)</span>
<span class="gp">In [162]: </span><span class="n">dt</span> <span class="o">+</span> <span class="n">bday_us</span>
<span class="gh">Out[162]: </span><span class="go">Timestamp(&#39;2014-01-21 00:00:00&#39;)</span>
</pre></div>
</div>
<p>Monthly offsets that respect a certain holiday calendar can be defined
in the usual way.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [163]: </span><span class="kn">from</span> <span class="nn">pandas.tseries.offsets</span> <span class="kn">import</span> <span class="n">CustomBusinessMonthBegin</span>

<span class="gp">In [164]: </span><span class="n">bmth_us</span> <span class="o">=</span> <span class="n">CustomBusinessMonthBegin</span><span class="p">(</span><span class="n">calendar</span><span class="o">=</span><span class="n">USFederalHolidayCalendar</span><span class="p">())</span>

<span class="go"># Skip new years</span>
<span class="gp">In [165]: </span><span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">17</span><span class="p">)</span>

<span class="gp">In [166]: </span><span class="n">dt</span> <span class="o">+</span> <span class="n">bmth_us</span>
<span class="gh">Out[166]: </span><span class="go">Timestamp(&#39;2014-01-02 00:00:00&#39;)</span>

<span class="go"># Define date index with custom offset</span>
<span class="gp">In [167]: </span><span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s1">&#39;20100101&#39;</span><span class="p">,</span><span class="n">end</span><span class="o">=</span><span class="s1">&#39;20120101&#39;</span><span class="p">,</span><span class="n">freq</span><span class="o">=</span><span class="n">bmth_us</span><span class="p">)</span>
<span class="go">                                           Out[167]: </span>
<span class="go">DatetimeIndex([&#39;2010-01-04&#39;, &#39;2010-02-01&#39;, &#39;2010-03-01&#39;, &#39;2010-04-01&#39;,</span>
<span class="go">               &#39;2010-05-03&#39;, &#39;2010-06-01&#39;, &#39;2010-07-01&#39;, &#39;2010-08-02&#39;,</span>
<span class="go">               &#39;2010-09-01&#39;, &#39;2010-10-01&#39;, &#39;2010-11-01&#39;, &#39;2010-12-01&#39;,</span>
<span class="go">               &#39;2011-01-03&#39;, &#39;2011-02-01&#39;, &#39;2011-03-01&#39;, &#39;2011-04-01&#39;,</span>
<span class="go">               &#39;2011-05-02&#39;, &#39;2011-06-01&#39;, &#39;2011-07-01&#39;, &#39;2011-08-01&#39;,</span>
<span class="go">               &#39;2011-09-01&#39;, &#39;2011-10-03&#39;, &#39;2011-11-01&#39;, &#39;2011-12-01&#39;],</span>
<span class="go">              dtype=&#39;datetime64[ns]&#39;, freq=&#39;CBMS&#39;)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The frequency string &#8216;C&#8217; is used to indicate that a CustomBusinessDay
DateOffset is used, it is important to note that since CustomBusinessDay is
a parameterised type, instances of CustomBusinessDay may differ and this is
not detectable from the &#8216;C&#8217; frequency string. The user therefore needs to
ensure that the &#8216;C&#8217; frequency string is used consistently within the user&#8217;s
application.</p>
</div>
</div>
<div class="section" id="business-hour">
<span id="timeseries-businesshour"></span><h3>Business Hour<a class="headerlink" href="#business-hour" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">BusinessHour</span></code> class provides a business hour representation on <code class="docutils literal"><span class="pre">BusinessDay</span></code>,
allowing to use specific start and end times.</p>
<p>By default, <code class="docutils literal"><span class="pre">BusinessHour</span></code> uses 9:00 - 17:00 as business hours.
Adding <code class="docutils literal"><span class="pre">BusinessHour</span></code> will increment <code class="docutils literal"><span class="pre">Timestamp</span></code> by hourly.
If target <code class="docutils literal"><span class="pre">Timestamp</span></code> is out of business hours, move to the next business hour then increment it.
If the result exceeds the business hours end, remaining is added to the next business day.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [168]: </span><span class="n">bh</span> <span class="o">=</span> <span class="n">BusinessHour</span><span class="p">()</span>

<span class="gp">In [169]: </span><span class="n">bh</span>
<span class="gh">Out[169]: </span><span class="go">&lt;BusinessHour: BH=09:00-17:00&gt;</span>

<span class="go"># 2014-08-01 is Friday</span>
<span class="gp">In [170]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-08-01 10:00&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">weekday</span><span class="p">()</span>
<span class="go">                                         Out[170]: 4</span>

<span class="gp">In [171]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-08-01 10:00&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">bh</span>
<span class="go">                                                     Out[171]: Timestamp(&#39;2014-08-01 11:00:00&#39;)</span>

<span class="go"># Below example is the same as: pd.Timestamp(&#39;2014-08-01 09:00&#39;) + bh</span>
<span class="gp">In [172]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-08-01 08:00&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">bh</span>
<span class="go">                                                                                                Out[172]: Timestamp(&#39;2014-08-01 10:00:00&#39;)</span>

<span class="go"># If the results is on the end time, move to the next business day</span>
<span class="gp">In [173]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-08-01 16:00&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">bh</span>
<span class="go">                                                                                                                                           Out[173]: Timestamp(&#39;2014-08-04 09:00:00&#39;)</span>

<span class="go"># Remainings are added to the next day</span>
<span class="gp">In [174]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-08-01 16:30&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">bh</span>
<span class="go">                                                                                                                                                                                      Out[174]: Timestamp(&#39;2014-08-04 09:30:00&#39;)</span>

<span class="go"># Adding 2 business hours</span>
<span class="gp">In [175]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-08-01 10:00&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">BusinessHour</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">                                                                                                                                                                                                                                 Out[175]: Timestamp(&#39;2014-08-01 12:00:00&#39;)</span>

<span class="go"># Subtracting 3 business hours</span>
<span class="gp">In [176]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-08-01 10:00&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">BusinessHour</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">)</span>
<span class="go">                                                                                                                                                                                                                                                                            Out[176]: Timestamp(&#39;2014-07-31 15:00:00&#39;)</span>
</pre></div>
</div>
<p>Also, you can specify <code class="docutils literal"><span class="pre">start</span></code> and <code class="docutils literal"><span class="pre">end</span></code> time by keywords.
Argument must be <code class="docutils literal"><span class="pre">str</span></code> which has <code class="docutils literal"><span class="pre">hour:minute</span></code> representation or <code class="docutils literal"><span class="pre">datetime.time</span></code> instance.
Specifying seconds, microseconds and nanoseconds as business hour results in <code class="docutils literal"><span class="pre">ValueError</span></code>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [177]: </span><span class="n">bh</span> <span class="o">=</span> <span class="n">BusinessHour</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s1">&#39;11:00&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="n">time</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>

<span class="gp">In [178]: </span><span class="n">bh</span>
<span class="gh">Out[178]: </span><span class="go">&lt;BusinessHour: BH=11:00-20:00&gt;</span>

<span class="gp">In [179]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-08-01 13:00&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">bh</span>
<span class="go">                                         Out[179]: Timestamp(&#39;2014-08-01 14:00:00&#39;)</span>

<span class="gp">In [180]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-08-01 09:00&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">bh</span>
<span class="go">                                                                                    Out[180]: Timestamp(&#39;2014-08-01 12:00:00&#39;)</span>

<span class="gp">In [181]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-08-01 18:00&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">bh</span>
<span class="go">                                                                                                                               Out[181]: Timestamp(&#39;2014-08-01 19:00:00&#39;)</span>
</pre></div>
</div>
<p>Passing <code class="docutils literal"><span class="pre">start</span></code> time later than <code class="docutils literal"><span class="pre">end</span></code> represents midnight business hour.
In this case, business hour exceeds midnight and overlap to the next day.
Valid business hours are distinguished by whether it started from valid <code class="docutils literal"><span class="pre">BusinessDay</span></code>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [182]: </span><span class="n">bh</span> <span class="o">=</span> <span class="n">BusinessHour</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s1">&#39;17:00&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;09:00&#39;</span><span class="p">)</span>

<span class="gp">In [183]: </span><span class="n">bh</span>
<span class="gh">Out[183]: </span><span class="go">&lt;BusinessHour: BH=17:00-09:00&gt;</span>

<span class="gp">In [184]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-08-01 17:00&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">bh</span>
<span class="go">                                         Out[184]: Timestamp(&#39;2014-08-01 18:00:00&#39;)</span>

<span class="gp">In [185]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-08-01 23:00&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">bh</span>
<span class="go">                                                                                    Out[185]: Timestamp(&#39;2014-08-02 00:00:00&#39;)</span>

<span class="go"># Although 2014-08-02 is Satuaday,</span>
<span class="go"># it is valid because it starts from 08-01 (Friday).</span>
<span class="gp">In [186]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-08-02 04:00&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">bh</span>
<span class="go">                                                                                                                               Out[186]: Timestamp(&#39;2014-08-02 05:00:00&#39;)</span>

<span class="go"># Although 2014-08-04 is Monday,</span>
<span class="go"># it is out of business hours because it starts from 08-03 (Sunday).</span>
<span class="gp">In [187]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-08-04 04:00&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">bh</span>
<span class="go">                                                                                                                                                                          Out[187]: Timestamp(&#39;2014-08-04 18:00:00&#39;)</span>
</pre></div>
</div>
<p>Applying <code class="docutils literal"><span class="pre">BusinessHour.rollforward</span></code> and <code class="docutils literal"><span class="pre">rollback</span></code> to out of business hours results in
the next business hour start or previous day&#8217;s end. Different from other offsets, <code class="docutils literal"><span class="pre">BusinessHour.rollforward</span></code>
may output different results from <code class="docutils literal"><span class="pre">apply</span></code> by definition.</p>
<p>This is because one day&#8217;s business hour end is equal to next day&#8217;s business hour start. For example,
under the default business hours (9:00 - 17:00), there is no gap (0 minutes) between <code class="docutils literal"><span class="pre">2014-08-01</span> <span class="pre">17:00</span></code> and
<code class="docutils literal"><span class="pre">2014-08-04</span> <span class="pre">09:00</span></code>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="go"># This adjusts a Timestamp to business hour edge</span>
<span class="gp">In [188]: </span><span class="n">BusinessHour</span><span class="p">()</span><span class="o">.</span><span class="n">rollback</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-08-02 15:00&#39;</span><span class="p">))</span>
<span class="gh">Out[188]: </span><span class="go">Timestamp(&#39;2014-08-01 17:00:00&#39;)</span>

<span class="gp">In [189]: </span><span class="n">BusinessHour</span><span class="p">()</span><span class="o">.</span><span class="n">rollforward</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-08-02 15:00&#39;</span><span class="p">))</span>
<span class="go">                                           Out[189]: Timestamp(&#39;2014-08-04 09:00:00&#39;)</span>

<span class="go"># It is the same as BusinessHour().apply(pd.Timestamp(&#39;2014-08-01 17:00&#39;)).</span>
<span class="go"># And it is the same as BusinessHour().apply(pd.Timestamp(&#39;2014-08-04 09:00&#39;))</span>
<span class="gp">In [190]: </span><span class="n">BusinessHour</span><span class="p">()</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-08-02 15:00&#39;</span><span class="p">))</span>
<span class="go">                                                                                      Out[190]: Timestamp(&#39;2014-08-04 10:00:00&#39;)</span>

<span class="go"># BusinessDay results (for reference)</span>
<span class="gp">In [191]: </span><span class="n">BusinessHour</span><span class="p">()</span><span class="o">.</span><span class="n">rollforward</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-08-02&#39;</span><span class="p">))</span>
<span class="go">                                                                                                                                 Out[191]: Timestamp(&#39;2014-08-04 09:00:00&#39;)</span>

<span class="go"># It is the same as BusinessDay().apply(pd.Timestamp(&#39;2014-08-01&#39;))</span>
<span class="go"># The result is the same as rollworward because BusinessDay never overlap.</span>
<span class="gp">In [192]: </span><span class="n">BusinessHour</span><span class="p">()</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-08-02&#39;</span><span class="p">))</span>
<span class="go">                                                                                                                                                                            Out[192]: Timestamp(&#39;2014-08-04 10:00:00&#39;)</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">BusinessHour</span></code> regards Saturday and Sunday as holidays. To use arbitrary holidays,
you can use <code class="docutils literal"><span class="pre">CustomBusinessHour</span></code> offset, see <a class="reference internal" href="#timeseries-custombusinesshour"><span class="std std-ref">Custom Business Hour</span></a>:</p>
</div>
<div class="section" id="custom-business-hour">
<span id="timeseries-custombusinesshour"></span><h3>Custom Business Hour<a class="headerlink" href="#custom-business-hour" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.18.1.</span></p>
</div>
<p>The <code class="docutils literal"><span class="pre">CustomBusinessHour</span></code> is a mixture of <code class="docutils literal"><span class="pre">BusinessHour</span></code> and <code class="docutils literal"><span class="pre">CustomBusinessDay</span></code> which
allows you to specify arbitrary holidays. <code class="docutils literal"><span class="pre">CustomBusinessHour</span></code> works as the same
as <code class="docutils literal"><span class="pre">BusinessHour</span></code> except that it skips specified custom holidays.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [193]: </span><span class="kn">from</span> <span class="nn">pandas.tseries.holiday</span> <span class="kn">import</span> <span class="n">USFederalHolidayCalendar</span>

<span class="gp">In [194]: </span><span class="n">bhour_us</span> <span class="o">=</span> <span class="n">CustomBusinessHour</span><span class="p">(</span><span class="n">calendar</span><span class="o">=</span><span class="n">USFederalHolidayCalendar</span><span class="p">())</span>

<span class="go"># Friday before MLK Day</span>
<span class="gp">In [195]: </span><span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2014</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>

<span class="gp">In [196]: </span><span class="n">dt</span> <span class="o">+</span> <span class="n">bhour_us</span>
<span class="gh">Out[196]: </span><span class="go">Timestamp(&#39;2014-01-17 16:00:00&#39;)</span>

<span class="go"># Tuesday after MLK Day (Monday is skipped because it&#39;s a holiday)</span>
<span class="gp">In [197]: </span><span class="n">dt</span> <span class="o">+</span> <span class="n">bhour_us</span> <span class="o">*</span> <span class="mi">2</span>
<span class="go">                                           Out[197]: Timestamp(&#39;2014-01-21 09:00:00&#39;)</span>
</pre></div>
</div>
<p>You can use keyword arguments supported by either <code class="docutils literal"><span class="pre">BusinessHour</span></code> and <code class="docutils literal"><span class="pre">CustomBusinessDay</span></code>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [198]: </span><span class="n">bhour_mon</span> <span class="o">=</span> <span class="n">CustomBusinessHour</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s1">&#39;10:00&#39;</span><span class="p">,</span> <span class="n">weekmask</span><span class="o">=</span><span class="s1">&#39;Tue Wed Thu Fri&#39;</span><span class="p">)</span>

<span class="go"># Monday is skipped because it&#39;s a holiday, business hour starts from 10:00</span>
<span class="gp">In [199]: </span><span class="n">dt</span> <span class="o">+</span> <span class="n">bhour_mon</span> <span class="o">*</span> <span class="mi">2</span>
<span class="gh">Out[199]: </span><span class="go">Timestamp(&#39;2014-01-21 10:00:00&#39;)</span>
</pre></div>
</div>
</div>
<div class="section" id="offset-aliases">
<span id="timeseries-offset-aliases"></span><h3>Offset Aliases<a class="headerlink" href="#offset-aliases" title="Permalink to this headline">¶</a></h3>
<p>A number of string aliases are given to useful common time series
frequencies. We will refer to these aliases as <em>offset aliases</em>.</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Alias</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>B</td>
<td>business day frequency</td>
</tr>
<tr class="row-odd"><td>C</td>
<td>custom business day frequency</td>
</tr>
<tr class="row-even"><td>D</td>
<td>calendar day frequency</td>
</tr>
<tr class="row-odd"><td>W</td>
<td>weekly frequency</td>
</tr>
<tr class="row-even"><td>M</td>
<td>month end frequency</td>
</tr>
<tr class="row-odd"><td>SM</td>
<td>semi-month end frequency (15th and end of month)</td>
</tr>
<tr class="row-even"><td>BM</td>
<td>business month end frequency</td>
</tr>
<tr class="row-odd"><td>CBM</td>
<td>custom business month end frequency</td>
</tr>
<tr class="row-even"><td>MS</td>
<td>month start frequency</td>
</tr>
<tr class="row-odd"><td>SMS</td>
<td>semi-month start frequency (1st and 15th)</td>
</tr>
<tr class="row-even"><td>BMS</td>
<td>business month start frequency</td>
</tr>
<tr class="row-odd"><td>CBMS</td>
<td>custom business month start frequency</td>
</tr>
<tr class="row-even"><td>Q</td>
<td>quarter end frequency</td>
</tr>
<tr class="row-odd"><td>BQ</td>
<td>business quarter end frequency</td>
</tr>
<tr class="row-even"><td>QS</td>
<td>quarter start frequency</td>
</tr>
<tr class="row-odd"><td>BQS</td>
<td>business quarter start frequency</td>
</tr>
<tr class="row-even"><td>A, Y</td>
<td>year end frequency</td>
</tr>
<tr class="row-odd"><td>BA, BY</td>
<td>business year end frequency</td>
</tr>
<tr class="row-even"><td>AS, YS</td>
<td>year start frequency</td>
</tr>
<tr class="row-odd"><td>BAS, BYS</td>
<td>business year start frequency</td>
</tr>
<tr class="row-even"><td>BH</td>
<td>business hour frequency</td>
</tr>
<tr class="row-odd"><td>H</td>
<td>hourly frequency</td>
</tr>
<tr class="row-even"><td>T, min</td>
<td>minutely frequency</td>
</tr>
<tr class="row-odd"><td>S</td>
<td>secondly frequency</td>
</tr>
<tr class="row-even"><td>L, ms</td>
<td>milliseconds</td>
</tr>
<tr class="row-odd"><td>U, us</td>
<td>microseconds</td>
</tr>
<tr class="row-even"><td>N</td>
<td>nanoseconds</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="combining-aliases">
<h3>Combining Aliases<a class="headerlink" href="#combining-aliases" title="Permalink to this headline">¶</a></h3>
<p>As we have seen previously, the alias and the offset instance are fungible in
most functions:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [200]: </span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;B&#39;</span><span class="p">)</span>
<span class="gh">Out[200]: </span><span class="go"></span>
<span class="go">DatetimeIndex([&#39;2011-01-03&#39;, &#39;2011-01-04&#39;, &#39;2011-01-05&#39;, &#39;2011-01-06&#39;,</span>
<span class="go">               &#39;2011-01-07&#39;],</span>
<span class="go">              dtype=&#39;datetime64[ns]&#39;, freq=&#39;B&#39;)</span>

<span class="gp">In [201]: </span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="n">BDay</span><span class="p">())</span>
<span class="go">                                                                                                                                                                Out[201]: </span>
<span class="go">DatetimeIndex([&#39;2011-01-03&#39;, &#39;2011-01-04&#39;, &#39;2011-01-05&#39;, &#39;2011-01-06&#39;,</span>
<span class="go">               &#39;2011-01-07&#39;],</span>
<span class="go">              dtype=&#39;datetime64[ns]&#39;, freq=&#39;B&#39;)</span>
</pre></div>
</div>
<p>You can combine together day and intraday offsets:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [202]: </span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;2h20min&#39;</span><span class="p">)</span>
<span class="gh">Out[202]: </span><span class="go"></span>
<span class="go">DatetimeIndex([&#39;2011-01-01 00:00:00&#39;, &#39;2011-01-01 02:20:00&#39;,</span>
<span class="go">               &#39;2011-01-01 04:40:00&#39;, &#39;2011-01-01 07:00:00&#39;,</span>
<span class="go">               &#39;2011-01-01 09:20:00&#39;, &#39;2011-01-01 11:40:00&#39;,</span>
<span class="go">               &#39;2011-01-01 14:00:00&#39;, &#39;2011-01-01 16:20:00&#39;,</span>
<span class="go">               &#39;2011-01-01 18:40:00&#39;, &#39;2011-01-01 21:00:00&#39;],</span>
<span class="go">              dtype=&#39;datetime64[ns]&#39;, freq=&#39;140T&#39;)</span>

<span class="gp">In [203]: </span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;1D10U&#39;</span><span class="p">)</span>
<span class="go">                                                                                                                                                                                                                                                                                                                                                                                Out[203]: </span>
<span class="go">DatetimeIndex([       &#39;2011-01-01 00:00:00&#39;, &#39;2011-01-02 00:00:00.000010&#39;,</span>
<span class="go">               &#39;2011-01-03 00:00:00.000020&#39;, &#39;2011-01-04 00:00:00.000030&#39;,</span>
<span class="go">               &#39;2011-01-05 00:00:00.000040&#39;, &#39;2011-01-06 00:00:00.000050&#39;,</span>
<span class="go">               &#39;2011-01-07 00:00:00.000060&#39;, &#39;2011-01-08 00:00:00.000070&#39;,</span>
<span class="go">               &#39;2011-01-09 00:00:00.000080&#39;, &#39;2011-01-10 00:00:00.000090&#39;],</span>
<span class="go">              dtype=&#39;datetime64[ns]&#39;, freq=&#39;86400000010U&#39;)</span>
</pre></div>
</div>
</div>
<div class="section" id="anchored-offsets">
<h3>Anchored Offsets<a class="headerlink" href="#anchored-offsets" title="Permalink to this headline">¶</a></h3>
<p>For some frequencies you can specify an anchoring suffix:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Alias</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>W-SUN</td>
<td>weekly frequency (Sundays). Same as &#8216;W&#8217;</td>
</tr>
<tr class="row-odd"><td>W-MON</td>
<td>weekly frequency (Mondays)</td>
</tr>
<tr class="row-even"><td>W-TUE</td>
<td>weekly frequency (Tuesdays)</td>
</tr>
<tr class="row-odd"><td>W-WED</td>
<td>weekly frequency (Wednesdays)</td>
</tr>
<tr class="row-even"><td>W-THU</td>
<td>weekly frequency (Thursdays)</td>
</tr>
<tr class="row-odd"><td>W-FRI</td>
<td>weekly frequency (Fridays)</td>
</tr>
<tr class="row-even"><td>W-SAT</td>
<td>weekly frequency (Saturdays)</td>
</tr>
<tr class="row-odd"><td>(B)Q(S)-DEC</td>
<td>quarterly frequency, year ends in December. Same as &#8216;Q&#8217;</td>
</tr>
<tr class="row-even"><td>(B)Q(S)-JAN</td>
<td>quarterly frequency, year ends in January</td>
</tr>
<tr class="row-odd"><td>(B)Q(S)-FEB</td>
<td>quarterly frequency, year ends in February</td>
</tr>
<tr class="row-even"><td>(B)Q(S)-MAR</td>
<td>quarterly frequency, year ends in March</td>
</tr>
<tr class="row-odd"><td>(B)Q(S)-APR</td>
<td>quarterly frequency, year ends in April</td>
</tr>
<tr class="row-even"><td>(B)Q(S)-MAY</td>
<td>quarterly frequency, year ends in May</td>
</tr>
<tr class="row-odd"><td>(B)Q(S)-JUN</td>
<td>quarterly frequency, year ends in June</td>
</tr>
<tr class="row-even"><td>(B)Q(S)-JUL</td>
<td>quarterly frequency, year ends in July</td>
</tr>
<tr class="row-odd"><td>(B)Q(S)-AUG</td>
<td>quarterly frequency, year ends in August</td>
</tr>
<tr class="row-even"><td>(B)Q(S)-SEP</td>
<td>quarterly frequency, year ends in September</td>
</tr>
<tr class="row-odd"><td>(B)Q(S)-OCT</td>
<td>quarterly frequency, year ends in October</td>
</tr>
<tr class="row-even"><td>(B)Q(S)-NOV</td>
<td>quarterly frequency, year ends in November</td>
</tr>
<tr class="row-odd"><td>(B)A(S)-DEC</td>
<td>annual frequency, anchored end of December. Same as &#8216;A&#8217;</td>
</tr>
<tr class="row-even"><td>(B)A(S)-JAN</td>
<td>annual frequency, anchored end of January</td>
</tr>
<tr class="row-odd"><td>(B)A(S)-FEB</td>
<td>annual frequency, anchored end of February</td>
</tr>
<tr class="row-even"><td>(B)A(S)-MAR</td>
<td>annual frequency, anchored end of March</td>
</tr>
<tr class="row-odd"><td>(B)A(S)-APR</td>
<td>annual frequency, anchored end of April</td>
</tr>
<tr class="row-even"><td>(B)A(S)-MAY</td>
<td>annual frequency, anchored end of May</td>
</tr>
<tr class="row-odd"><td>(B)A(S)-JUN</td>
<td>annual frequency, anchored end of June</td>
</tr>
<tr class="row-even"><td>(B)A(S)-JUL</td>
<td>annual frequency, anchored end of July</td>
</tr>
<tr class="row-odd"><td>(B)A(S)-AUG</td>
<td>annual frequency, anchored end of August</td>
</tr>
<tr class="row-even"><td>(B)A(S)-SEP</td>
<td>annual frequency, anchored end of September</td>
</tr>
<tr class="row-odd"><td>(B)A(S)-OCT</td>
<td>annual frequency, anchored end of October</td>
</tr>
<tr class="row-even"><td>(B)A(S)-NOV</td>
<td>annual frequency, anchored end of November</td>
</tr>
</tbody>
</table>
<p>These can be used as arguments to <code class="docutils literal"><span class="pre">date_range</span></code>, <code class="docutils literal"><span class="pre">bdate_range</span></code>, constructors
for <code class="docutils literal"><span class="pre">DatetimeIndex</span></code>, as well as various other timeseries-related functions
in pandas.</p>
</div>
<div class="section" id="anchored-offset-semantics">
<h3>Anchored Offset Semantics<a class="headerlink" href="#anchored-offset-semantics" title="Permalink to this headline">¶</a></h3>
<p>For those offsets that are anchored to the start or end of specific
frequency (<code class="docutils literal"><span class="pre">MonthEnd</span></code>, <code class="docutils literal"><span class="pre">MonthBegin</span></code>, <code class="docutils literal"><span class="pre">WeekEnd</span></code>, etc) the following
rules apply to rolling forward and backwards.</p>
<p>When <code class="docutils literal"><span class="pre">n</span></code> is not 0, if the given date is not on an anchor point, it snapped to the next(previous)
anchor point, and moved <code class="docutils literal"><span class="pre">|n|-1</span></code> additional steps forwards or backwards.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [204]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-01-02&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">MonthBegin</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gh">Out[204]: </span><span class="go">Timestamp(&#39;2014-02-01 00:00:00&#39;)</span>

<span class="gp">In [205]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-01-02&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">MonthEnd</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">                                           Out[205]: Timestamp(&#39;2014-01-31 00:00:00&#39;)</span>

<span class="gp">In [206]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-01-02&#39;</span><span class="p">)</span> <span class="o">-</span> <span class="n">MonthBegin</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">                                                                                      Out[206]: Timestamp(&#39;2014-01-01 00:00:00&#39;)</span>

<span class="gp">In [207]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-01-02&#39;</span><span class="p">)</span> <span class="o">-</span> <span class="n">MonthEnd</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">                                                                                                                                 Out[207]: Timestamp(&#39;2013-12-31 00:00:00&#39;)</span>

<span class="gp">In [208]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-01-02&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">MonthBegin</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="go">                                                                                                                                                                            Out[208]: Timestamp(&#39;2014-05-01 00:00:00&#39;)</span>

<span class="gp">In [209]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-01-02&#39;</span><span class="p">)</span> <span class="o">-</span> <span class="n">MonthBegin</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="go">                                                                                                                                                                                                                       Out[209]: Timestamp(&#39;2013-10-01 00:00:00&#39;)</span>
</pre></div>
</div>
<p>If the given date <em>is</em> on an anchor point, it is moved <code class="docutils literal"><span class="pre">|n|</span></code> points forwards
or backwards.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [210]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-01-01&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">MonthBegin</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gh">Out[210]: </span><span class="go">Timestamp(&#39;2014-02-01 00:00:00&#39;)</span>

<span class="gp">In [211]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-01-31&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">MonthEnd</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">                                           Out[211]: Timestamp(&#39;2014-02-28 00:00:00&#39;)</span>

<span class="gp">In [212]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-01-01&#39;</span><span class="p">)</span> <span class="o">-</span> <span class="n">MonthBegin</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">                                                                                      Out[212]: Timestamp(&#39;2013-12-01 00:00:00&#39;)</span>

<span class="gp">In [213]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-01-31&#39;</span><span class="p">)</span> <span class="o">-</span> <span class="n">MonthEnd</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">                                                                                                                                 Out[213]: Timestamp(&#39;2013-12-31 00:00:00&#39;)</span>

<span class="gp">In [214]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-01-01&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">MonthBegin</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="go">                                                                                                                                                                            Out[214]: Timestamp(&#39;2014-05-01 00:00:00&#39;)</span>

<span class="gp">In [215]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-01-31&#39;</span><span class="p">)</span> <span class="o">-</span> <span class="n">MonthBegin</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="go">                                                                                                                                                                                                                       Out[215]: Timestamp(&#39;2013-10-01 00:00:00&#39;)</span>
</pre></div>
</div>
<p>For the case when <code class="docutils literal"><span class="pre">n=0</span></code>, the date is not moved if on an anchor point, otherwise
it is rolled forward to the next anchor point.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [216]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-01-02&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">MonthBegin</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gh">Out[216]: </span><span class="go">Timestamp(&#39;2014-02-01 00:00:00&#39;)</span>

<span class="gp">In [217]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-01-02&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">MonthEnd</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">                                           Out[217]: Timestamp(&#39;2014-01-31 00:00:00&#39;)</span>

<span class="gp">In [218]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-01-01&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">MonthBegin</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">                                                                                      Out[218]: Timestamp(&#39;2014-01-01 00:00:00&#39;)</span>

<span class="gp">In [219]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-01-31&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">MonthEnd</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">                                                                                                                                 Out[219]: Timestamp(&#39;2014-01-31 00:00:00&#39;)</span>
</pre></div>
</div>
</div>
<div class="section" id="holidays-holiday-calendars">
<span id="timeseries-holiday"></span><h3>Holidays / Holiday Calendars<a class="headerlink" href="#holidays-holiday-calendars" title="Permalink to this headline">¶</a></h3>
<p>Holidays and calendars provide a simple way to define holiday rules to be used
with <code class="docutils literal"><span class="pre">CustomBusinessDay</span></code> or in other analysis that requires a predefined
set of holidays.  The <code class="docutils literal"><span class="pre">AbstractHolidayCalendar</span></code> class provides all the necessary
methods to return a list of holidays and only <code class="docutils literal"><span class="pre">rules</span></code> need to be defined
in a specific holiday calendar class.  Further, <code class="docutils literal"><span class="pre">start_date</span></code> and <code class="docutils literal"><span class="pre">end_date</span></code>
class attributes determine over what date range holidays are generated.  These
should be overwritten on the <code class="docutils literal"><span class="pre">AbstractHolidayCalendar</span></code> class to have the range
apply to all calendar subclasses.  <code class="docutils literal"><span class="pre">USFederalHolidayCalendar</span></code> is the
only calendar that exists and primarily serves as an example for developing
other calendars.</p>
<p>For holidays that occur on fixed dates (e.g., US Memorial Day or July 4th) an
observance rule determines when that holiday is observed if it falls on a weekend
or some other non-observed day.  Defined observance rules are:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="18%" />
<col width="82%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Rule</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>nearest_workday</td>
<td>move Saturday to Friday and Sunday to Monday</td>
</tr>
<tr class="row-odd"><td>sunday_to_monday</td>
<td>move Sunday to following Monday</td>
</tr>
<tr class="row-even"><td>next_monday_or_tuesday</td>
<td>move Saturday to Monday and Sunday/Monday to Tuesday</td>
</tr>
<tr class="row-odd"><td>previous_friday</td>
<td>move Saturday and Sunday to previous Friday&#8221;</td>
</tr>
<tr class="row-even"><td>next_monday</td>
<td>move Saturday and Sunday to following Monday</td>
</tr>
</tbody>
</table>
<p>An example of how holidays and holiday calendars are defined:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [220]: </span><span class="kn">from</span> <span class="nn">pandas.tseries.holiday</span> <span class="kn">import</span> <span class="n">Holiday</span><span class="p">,</span> <span class="n">USMemorialDay</span><span class="p">,</span>\
<span class="gp">   .....: </span>    <span class="n">AbstractHolidayCalendar</span><span class="p">,</span> <span class="n">nearest_workday</span><span class="p">,</span> <span class="n">MO</span>
<span class="gp">   .....: </span>

<span class="gp">In [221]: </span><span class="k">class</span> <span class="nc">ExampleCalendar</span><span class="p">(</span><span class="n">AbstractHolidayCalendar</span><span class="p">):</span>
<span class="gp">   .....: </span>    <span class="n">rules</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">   .....: </span>        <span class="n">USMemorialDay</span><span class="p">,</span>
<span class="gp">   .....: </span>        <span class="n">Holiday</span><span class="p">(</span><span class="s1">&#39;July 4th&#39;</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">observance</span><span class="o">=</span><span class="n">nearest_workday</span><span class="p">),</span>
<span class="gp">   .....: </span>        <span class="n">Holiday</span><span class="p">(</span><span class="s1">&#39;Columbus Day&#39;</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="gp">   .....: </span>            <span class="n">offset</span><span class="o">=</span><span class="n">DateOffset</span><span class="p">(</span><span class="n">weekday</span><span class="o">=</span><span class="n">MO</span><span class="p">(</span><span class="mi">2</span><span class="p">))),</span> <span class="c1">#same as 2*Week(weekday=2)</span>
<span class="gp">   .....: </span>        <span class="p">]</span>
<span class="gp">   .....: </span>

<span class="gp">In [222]: </span><span class="n">cal</span> <span class="o">=</span> <span class="n">ExampleCalendar</span><span class="p">()</span>

<span class="gp">In [223]: </span><span class="n">cal</span><span class="o">.</span><span class="n">holidays</span><span class="p">(</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">))</span>
<span class="gh">Out[223]: </span><span class="go">DatetimeIndex([&#39;2012-05-28&#39;, &#39;2012-07-04&#39;, &#39;2012-10-08&#39;], dtype=&#39;datetime64[ns]&#39;, freq=None)</span>
</pre></div>
</div>
<p>Using this calendar, creating an index or doing offset arithmetic skips weekends
and holidays (i.e., Memorial Day/July 4th).  For example, the below defines
a custom business day offset using the <code class="docutils literal"><span class="pre">ExampleCalendar</span></code>.  Like any other offset,
it can be used to create a <code class="docutils literal"><span class="pre">DatetimeIndex</span></code> or added to <code class="docutils literal"><span class="pre">datetime</span></code>
or <code class="docutils literal"><span class="pre">Timestamp</span></code> objects.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [224]: </span><span class="kn">from</span> <span class="nn">pandas.tseries.offsets</span> <span class="kn">import</span> <span class="n">CDay</span>

<span class="gp">In [225]: </span><span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s1">&#39;7/1/2012&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;7/10/2012&#39;</span><span class="p">,</span>
<span class="gp">   .....: </span>    <span class="n">freq</span><span class="o">=</span><span class="n">CDay</span><span class="p">(</span><span class="n">calendar</span><span class="o">=</span><span class="n">cal</span><span class="p">))</span><span class="o">.</span><span class="n">to_pydatetime</span><span class="p">()</span>
<span class="gp">   .....: </span>
<span class="gh">Out[225]: </span><span class="go"></span>
<span class="go">array([datetime.datetime(2012, 7, 2, 0, 0),</span>
<span class="go">       datetime.datetime(2012, 7, 3, 0, 0),</span>
<span class="go">       datetime.datetime(2012, 7, 5, 0, 0),</span>
<span class="go">       datetime.datetime(2012, 7, 6, 0, 0),</span>
<span class="go">       datetime.datetime(2012, 7, 9, 0, 0),</span>
<span class="go">       datetime.datetime(2012, 7, 10, 0, 0)], dtype=object)</span>

<span class="gp">In [226]: </span><span class="n">offset</span> <span class="o">=</span> <span class="n">CustomBusinessDay</span><span class="p">(</span><span class="n">calendar</span><span class="o">=</span><span class="n">cal</span><span class="p">)</span>

<span class="gp">In [227]: </span><span class="n">datetime</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span> <span class="o">+</span> <span class="n">offset</span>
<span class="gh">Out[227]: </span><span class="go">Timestamp(&#39;2012-05-29 00:00:00&#39;)</span>

<span class="gp">In [228]: </span><span class="n">datetime</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">+</span> <span class="n">offset</span>
<span class="go">                                           Out[228]: Timestamp(&#39;2012-07-05 00:00:00&#39;)</span>

<span class="gp">In [229]: </span><span class="n">datetime</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">offset</span>
<span class="go">                                                                                      Out[229]: Timestamp(&#39;2012-07-06 00:00:00&#39;)</span>

<span class="gp">In [230]: </span><span class="n">datetime</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span> <span class="o">+</span> <span class="n">offset</span>
<span class="go">                                                                                                                                 Out[230]: Timestamp(&#39;2012-07-09 00:00:00&#39;)</span>
</pre></div>
</div>
<p>Ranges are defined by the <code class="docutils literal"><span class="pre">start_date</span></code> and <code class="docutils literal"><span class="pre">end_date</span></code> class attributes
of <code class="docutils literal"><span class="pre">AbstractHolidayCalendar</span></code>.  The defaults are below.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [231]: </span><span class="n">AbstractHolidayCalendar</span><span class="o">.</span><span class="n">start_date</span>
<span class="gh">Out[231]: </span><span class="go">Timestamp(&#39;1970-01-01 00:00:00&#39;)</span>

<span class="gp">In [232]: </span><span class="n">AbstractHolidayCalendar</span><span class="o">.</span><span class="n">end_date</span>
<span class="go">                                           Out[232]: Timestamp(&#39;2030-12-31 00:00:00&#39;)</span>
</pre></div>
</div>
<p>These dates can be overwritten by setting the attributes as
datetime/Timestamp/string.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [233]: </span><span class="n">AbstractHolidayCalendar</span><span class="o">.</span><span class="n">start_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="gp">In [234]: </span><span class="n">AbstractHolidayCalendar</span><span class="o">.</span><span class="n">end_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">)</span>

<span class="gp">In [235]: </span><span class="n">cal</span><span class="o">.</span><span class="n">holidays</span><span class="p">()</span>
<span class="gh">Out[235]: </span><span class="go">DatetimeIndex([&#39;2012-05-28&#39;, &#39;2012-07-04&#39;, &#39;2012-10-08&#39;], dtype=&#39;datetime64[ns]&#39;, freq=None)</span>
</pre></div>
</div>
<p>Every calendar class is accessible by name using the <code class="docutils literal"><span class="pre">get_calendar</span></code> function
which returns a holiday class instance.  Any imported calendar class will
automatically be available by this function.  Also, <code class="docutils literal"><span class="pre">HolidayCalendarFactory</span></code>
provides an easy interface to create calendars that are combinations of calendars
or calendars with additional rules.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [236]: </span><span class="kn">from</span> <span class="nn">pandas.tseries.holiday</span> <span class="kn">import</span> <span class="n">get_calendar</span><span class="p">,</span> <span class="n">HolidayCalendarFactory</span><span class="p">,</span>\
<span class="gp">   .....: </span>    <span class="n">USLaborDay</span>
<span class="gp">   .....: </span>

<span class="gp">In [237]: </span><span class="n">cal</span> <span class="o">=</span> <span class="n">get_calendar</span><span class="p">(</span><span class="s1">&#39;ExampleCalendar&#39;</span><span class="p">)</span>

<span class="gp">In [238]: </span><span class="n">cal</span><span class="o">.</span><span class="n">rules</span>
<span class="gh">Out[238]: </span><span class="go"></span>
<span class="go">[Holiday: MemorialDay (month=5, day=31, offset=&lt;DateOffset: kwds={&#39;weekday&#39;: MO(-1)}&gt;),</span>
<span class="go"> Holiday: July 4th (month=7, day=4, observance=&lt;function nearest_workday at 0x1243842f0&gt;),</span>
<span class="go"> Holiday: Columbus Day (month=10, day=1, offset=&lt;DateOffset: kwds={&#39;weekday&#39;: MO(+2)}&gt;)]</span>

<span class="gp">In [239]: </span><span class="n">new_cal</span> <span class="o">=</span> <span class="n">HolidayCalendarFactory</span><span class="p">(</span><span class="s1">&#39;NewExampleCalendar&#39;</span><span class="p">,</span> <span class="n">cal</span><span class="p">,</span> <span class="n">USLaborDay</span><span class="p">)</span>

<span class="gp">In [240]: </span><span class="n">new_cal</span><span class="o">.</span><span class="n">rules</span>
<span class="gh">Out[240]: </span><span class="go"></span>
<span class="go">[Holiday: Labor Day (month=9, day=1, offset=&lt;DateOffset: kwds={&#39;weekday&#39;: MO(+1)}&gt;),</span>
<span class="go"> Holiday: MemorialDay (month=5, day=31, offset=&lt;DateOffset: kwds={&#39;weekday&#39;: MO(-1)}&gt;),</span>
<span class="go"> Holiday: July 4th (month=7, day=4, observance=&lt;function nearest_workday at 0x1243842f0&gt;),</span>
<span class="go"> Holiday: Columbus Day (month=10, day=1, offset=&lt;DateOffset: kwds={&#39;weekday&#39;: MO(+2)}&gt;)]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="time-series-related-instance-methods">
<span id="timeseries-advanced-datetime"></span><h2>Time Series-Related Instance Methods<a class="headerlink" href="#time-series-related-instance-methods" title="Permalink to this headline">¶</a></h2>
<div class="section" id="shifting-lagging">
<h3>Shifting / Lagging<a class="headerlink" href="#shifting-lagging" title="Permalink to this headline">¶</a></h3>
<p>One may want to <em>shift</em> or <em>lag</em> the values in a time series back and forward in
time. The method for this is <code class="docutils literal"><span class="pre">shift</span></code>, which is available on all of the pandas
objects.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [241]: </span><span class="n">ts</span> <span class="o">=</span> <span class="n">ts</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>

<span class="gp">In [242]: </span><span class="n">ts</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gh">Out[242]: </span><span class="go"></span>
<span class="go">2011-01-31         NaN</span>
<span class="go">2011-02-28   -1.281247</span>
<span class="go">2011-03-31   -0.727707</span>
<span class="go">2011-04-29   -0.121306</span>
<span class="go">2011-05-31   -0.097883</span>
<span class="go">Freq: BM, dtype: float64</span>
</pre></div>
</div>
<p>The shift method accepts an <code class="docutils literal"><span class="pre">freq</span></code> argument which can accept a
<code class="docutils literal"><span class="pre">DateOffset</span></code> class or other <code class="docutils literal"><span class="pre">timedelta</span></code>-like object or also a <a class="reference internal" href="#timeseries-offset-aliases"><span class="std std-ref">offset alias</span></a>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [243]: </span><span class="n">ts</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="n">offsets</span><span class="o">.</span><span class="n">BDay</span><span class="p">())</span>
<span class="gh">Out[243]: </span><span class="go"></span>
<span class="go">2011-02-07   -1.281247</span>
<span class="go">2011-03-07   -0.727707</span>
<span class="go">2011-04-07   -0.121306</span>
<span class="go">2011-05-06   -0.097883</span>
<span class="go">2011-06-07    0.695775</span>
<span class="go">dtype: float64</span>

<span class="gp">In [244]: </span><span class="n">ts</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;BM&#39;</span><span class="p">)</span>
<span class="go">                                                                                                                                             Out[244]: </span>
<span class="go">2011-06-30   -1.281247</span>
<span class="go">2011-07-29   -0.727707</span>
<span class="go">2011-08-31   -0.121306</span>
<span class="go">2011-09-30   -0.097883</span>
<span class="go">2011-10-31    0.695775</span>
<span class="go">Freq: BM, dtype: float64</span>
</pre></div>
</div>
<p>Rather than changing the alignment of the data and the index, <code class="docutils literal"><span class="pre">DataFrame</span></code> and
<code class="docutils literal"><span class="pre">Series</span></code> objects also have a <code class="docutils literal"><span class="pre">tshift</span></code> convenience method that changes
all the dates in the index by a specified number of offsets:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [245]: </span><span class="n">ts</span><span class="o">.</span><span class="n">tshift</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">)</span>
<span class="gh">Out[245]: </span><span class="go"></span>
<span class="go">2011-02-05   -1.281247</span>
<span class="go">2011-03-05   -0.727707</span>
<span class="go">2011-04-05   -0.121306</span>
<span class="go">2011-05-04   -0.097883</span>
<span class="go">2011-06-05    0.695775</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<p>Note that with <code class="docutils literal"><span class="pre">tshift</span></code>, the leading entry is no longer NaN because the data
is not being realigned.</p>
</div>
<div class="section" id="frequency-conversion">
<h3>Frequency Conversion<a class="headerlink" href="#frequency-conversion" title="Permalink to this headline">¶</a></h3>
<p>The primary function for changing frequencies is the <code class="docutils literal"><span class="pre">asfreq</span></code> function.
For a <code class="docutils literal"><span class="pre">DatetimeIndex</span></code>, this is basically just a thin, but convenient wrapper
around <code class="docutils literal"><span class="pre">reindex</span></code> which generates a <code class="docutils literal"><span class="pre">date_range</span></code> and calls <code class="docutils literal"><span class="pre">reindex</span></code>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [246]: </span><span class="n">dr</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;1/1/2010&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="mi">3</span> <span class="o">*</span> <span class="n">offsets</span><span class="o">.</span><span class="n">BDay</span><span class="p">())</span>

<span class="gp">In [247]: </span><span class="n">ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">dr</span><span class="p">)</span>

<span class="gp">In [248]: </span><span class="n">ts</span>
<span class="gh">Out[248]: </span><span class="go"></span>
<span class="go">2010-01-01    0.155932</span>
<span class="go">2010-01-06    1.486218</span>
<span class="go">2010-01-11   -2.148675</span>
<span class="go">Freq: 3B, dtype: float64</span>

<span class="gp">In [249]: </span><span class="n">ts</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="n">BDay</span><span class="p">())</span>
<span class="go">                                                                                                         Out[249]: </span>
<span class="go">2010-01-01    0.155932</span>
<span class="go">2010-01-04         NaN</span>
<span class="go">2010-01-05         NaN</span>
<span class="go">2010-01-06    1.486218</span>
<span class="go">2010-01-07         NaN</span>
<span class="go">2010-01-08         NaN</span>
<span class="go">2010-01-11   -2.148675</span>
<span class="go">Freq: B, dtype: float64</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">asfreq</span></code> provides a further convenience so you can specify an interpolation
method for any gaps that may appear after the frequency conversion</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [250]: </span><span class="n">ts</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="n">BDay</span><span class="p">(),</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;pad&#39;</span><span class="p">)</span>
<span class="gh">Out[250]: </span><span class="go"></span>
<span class="go">2010-01-01    0.155932</span>
<span class="go">2010-01-04    0.155932</span>
<span class="go">2010-01-05    0.155932</span>
<span class="go">2010-01-06    1.486218</span>
<span class="go">2010-01-07    1.486218</span>
<span class="go">2010-01-08    1.486218</span>
<span class="go">2010-01-11   -2.148675</span>
<span class="go">Freq: B, dtype: float64</span>
</pre></div>
</div>
</div>
<div class="section" id="filling-forward-backward">
<h3>Filling Forward / Backward<a class="headerlink" href="#filling-forward-backward" title="Permalink to this headline">¶</a></h3>
<p>Related to <code class="docutils literal"><span class="pre">asfreq</span></code> and <code class="docutils literal"><span class="pre">reindex</span></code> is the <code class="docutils literal"><span class="pre">fillna</span></code> function documented in
the <a class="reference internal" href="missing_data.html#missing-data-fillna"><span class="std std-ref">missing data section</span></a>.</p>
</div>
<div class="section" id="converting-to-python-datetimes">
<h3>Converting to Python Datetimes<a class="headerlink" href="#converting-to-python-datetimes" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">DatetimeIndex</span></code> can be converted to an array of Python native datetime.datetime objects using the
<code class="docutils literal"><span class="pre">to_pydatetime</span></code> method.</p>
</div>
</div>
<div class="section" id="resampling">
<span id="timeseries-resampling"></span><h2>Resampling<a class="headerlink" href="#resampling" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The interface to <code class="docutils literal"><span class="pre">.resample</span></code> has changed in 0.18.0 to be more groupby-like and hence more flexible.
See the <a class="reference internal" href="whatsnew.html#whatsnew-0180-breaking-resample"><span class="std std-ref">whatsnew docs</span></a> for a comparison with prior versions.</p>
</div>
<p>Pandas has a simple, powerful, and efficient functionality for
performing resampling operations during frequency conversion (e.g., converting
secondly data into 5-minutely data). This is extremely common in, but not
limited to, financial applications.</p>
<p><code class="docutils literal"><span class="pre">.resample()</span></code> is a time-based groupby, followed by a reduction method on each of its groups.
See some <a class="reference internal" href="cookbook.html#cookbook-resample"><span class="std std-ref">cookbook examples</span></a> for some advanced strategies</p>
<p>Starting in version 0.18.1, the <code class="docutils literal"><span class="pre">resample()</span></code> function can be used directly from
<code class="docutils literal"><span class="pre">DataFrameGroupBy</span></code> objects, see the <a class="reference internal" href="groupby.html#groupby-transform-window-resample"><span class="std std-ref">groupby docs</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><code class="docutils literal"><span class="pre">.resample()</span></code> is similar to using a <code class="docutils literal"><span class="pre">.rolling()</span></code> operation with a time-based offset, see a discussion <a class="reference internal" href="computation.html#stats-moments-ts-versus-resampling"><span class="std std-ref">here</span></a></p>
</div>
<div class="section" id="basics">
<h3>Basics<a class="headerlink" href="#basics" title="Permalink to this headline">¶</a></h3>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [251]: </span><span class="n">rng</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;1/1/2012&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;S&#39;</span><span class="p">)</span>

<span class="gp">In [252]: </span><span class="n">ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">rng</span><span class="p">)),</span> <span class="n">index</span><span class="o">=</span><span class="n">rng</span><span class="p">)</span>

<span class="gp">In [253]: </span><span class="n">ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;5Min&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gh">Out[253]: </span><span class="go"></span>
<span class="go">2012-01-01    25653</span>
<span class="go">Freq: 5T, dtype: int64</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">resample</span></code> function is very flexible and allows you to specify many
different parameters to control the frequency conversion and resampling
operation.</p>
<p>Any function available via <a class="reference internal" href="groupby.html#groupby-dispatch"><span class="std std-ref">dispatching</span></a> is available as
a method of the returned object, including <code class="docutils literal"><span class="pre">sum</span></code>, <code class="docutils literal"><span class="pre">mean</span></code>, <code class="docutils literal"><span class="pre">std</span></code>, <code class="docutils literal"><span class="pre">sem</span></code>,
<code class="docutils literal"><span class="pre">max</span></code>, <code class="docutils literal"><span class="pre">min</span></code>, <code class="docutils literal"><span class="pre">median</span></code>, <code class="docutils literal"><span class="pre">first</span></code>, <code class="docutils literal"><span class="pre">last</span></code>, <code class="docutils literal"><span class="pre">ohlc</span></code>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [254]: </span><span class="n">ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;5Min&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="gh">Out[254]: </span><span class="go"></span>
<span class="go">2012-01-01    256.53</span>
<span class="go">Freq: 5T, dtype: float64</span>

<span class="gp">In [255]: </span><span class="n">ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;5Min&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">ohlc</span><span class="p">()</span>
<span class="go">                                                         Out[255]: </span>
<span class="go">            open  high  low  close</span>
<span class="go">2012-01-01   296   496    6    449</span>

<span class="gp">In [256]: </span><span class="n">ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;5Min&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
<span class="go">                                                                                                                                          Out[256]: </span>
<span class="go">2012-01-01    496</span>
<span class="go">Freq: 5T, dtype: int64</span>
</pre></div>
</div>
<p>For downsampling, <code class="docutils literal"><span class="pre">closed</span></code> can be set to &#8216;left&#8217; or &#8216;right&#8217; to specify which
end of the interval is closed:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [257]: </span><span class="n">ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;5Min&#39;</span><span class="p">,</span> <span class="n">closed</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="gh">Out[257]: </span><span class="go"></span>
<span class="go">2011-12-31 23:55:00    296.000000</span>
<span class="go">2012-01-01 00:00:00    256.131313</span>
<span class="go">Freq: 5T, dtype: float64</span>

<span class="gp">In [258]: </span><span class="n">ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;5Min&#39;</span><span class="p">,</span> <span class="n">closed</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="go">                                                                                                        Out[258]: </span>
<span class="go">2012-01-01    256.53</span>
<span class="go">Freq: 5T, dtype: float64</span>
</pre></div>
</div>
<p>Parameters like <code class="docutils literal"><span class="pre">label</span></code> and <code class="docutils literal"><span class="pre">loffset</span></code> are used to manipulate the resulting
labels. <code class="docutils literal"><span class="pre">label</span></code> specifies whether the result is labeled with the beginning or
the end of the interval. <code class="docutils literal"><span class="pre">loffset</span></code> performs a time adjustment on the output
labels.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [259]: </span><span class="n">ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;5Min&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="c1"># by default label=&#39;left&#39;</span>
<span class="gh">Out[259]: </span><span class="go"></span>
<span class="go">2012-01-01    256.53</span>
<span class="go">Freq: 5T, dtype: float64</span>

<span class="gp">In [260]: </span><span class="n">ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;5Min&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="go">                                                         Out[260]: </span>
<span class="go">2012-01-01    256.53</span>
<span class="go">Freq: 5T, dtype: float64</span>

<span class="gp">In [261]: </span><span class="n">ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;5Min&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">loffset</span><span class="o">=</span><span class="s1">&#39;1s&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="go">                                                                                                                  Out[261]: </span>
<span class="go">2012-01-01 00:00:01    256.53</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The default values for <code class="docutils literal"><span class="pre">label</span></code> and <code class="docutils literal"><span class="pre">closed</span></code> is &#8216;left&#8217; for all
frequency offsets except for &#8216;M&#8217;, &#8216;A&#8217;, &#8216;Q&#8217;, &#8216;BM&#8217;, &#8216;BA&#8217;, &#8216;BQ&#8217;, and &#8216;W&#8217;
which all have a default of &#8216;right&#8217;.</p>
<div class="last highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [262]: </span><span class="n">rng2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;1/1/2012&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;3/31/2012&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">)</span>

<span class="gp">In [263]: </span><span class="n">ts2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">rng2</span><span class="p">)),</span> <span class="n">index</span><span class="o">=</span><span class="n">rng2</span><span class="p">)</span>

<span class="go"># default: label=&#39;right&#39;, closed=&#39;right&#39;</span>
<span class="gp">In [264]: </span><span class="n">ts2</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
<span class="gh">Out[264]: </span><span class="go"></span>
<span class="go">2012-01-31    30</span>
<span class="go">2012-02-29    59</span>
<span class="go">2012-03-31    90</span>
<span class="go">Freq: M, dtype: int64</span>

<span class="go"># default: label=&#39;left&#39;, closed=&#39;left&#39;</span>
<span class="gp">In [265]: </span><span class="n">ts2</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;SM&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
<span class="go">                                                                                    Out[265]: </span>
<span class="go">2011-12-31    13</span>
<span class="go">2012-01-15    29</span>
<span class="go">2012-01-31    44</span>
<span class="go">2012-02-15    58</span>
<span class="go">2012-02-29    73</span>
<span class="go">2012-03-15    89</span>
<span class="go">2012-03-31    90</span>
<span class="go">Freq: SM-15, dtype: int64</span>

<span class="gp">In [266]: </span><span class="n">ts2</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;SM&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="n">closed</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
<span class="go">                                                                                                                                                                                                                                                Out[266]: </span>
<span class="go">2012-01-15    14.0</span>
<span class="go">2012-01-31    30.0</span>
<span class="go">2012-02-15    45.0</span>
<span class="go">2012-02-29    59.0</span>
<span class="go">2012-03-15    74.0</span>
<span class="go">2012-03-31    90.0</span>
<span class="go">2012-04-15     NaN</span>
<span class="go">Freq: SM-15, dtype: float64</span>
</pre></div>
</div>
</div>
<p>The <code class="docutils literal"><span class="pre">axis</span></code> parameter can be set to 0 or 1 and allows you to resample the
specified axis for a <code class="docutils literal"><span class="pre">DataFrame</span></code>.</p>
<p><code class="docutils literal"><span class="pre">kind</span></code> can be set to &#8216;timestamp&#8217; or &#8216;period&#8217; to convert the resulting index
to/from timestamp and time span representations. By default <code class="docutils literal"><span class="pre">resample</span></code>
retains the input representation.</p>
<p><code class="docutils literal"><span class="pre">convention</span></code> can be set to &#8216;start&#8217; or &#8216;end&#8217; when resampling period data
(detail below). It specifies how low frequency periods are converted to higher
frequency periods.</p>
</div>
<div class="section" id="upsampling">
<h3>Upsampling<a class="headerlink" href="#upsampling" title="Permalink to this headline">¶</a></h3>
<p>For upsampling, you can specify a way to upsample and the <code class="docutils literal"><span class="pre">limit</span></code> parameter to interpolate over the gaps that are created:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="go"># from secondly to every 250 milliseconds</span>
<span class="gp">In [267]: </span><span class="n">ts</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;250L&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">asfreq</span><span class="p">()</span>
<span class="gh">Out[267]: </span><span class="go"></span>
<span class="go">2012-01-01 00:00:00.000    296.0</span>
<span class="go">2012-01-01 00:00:00.250      NaN</span>
<span class="go">2012-01-01 00:00:00.500      NaN</span>
<span class="go">2012-01-01 00:00:00.750      NaN</span>
<span class="go">2012-01-01 00:00:01.000    199.0</span>
<span class="go">Freq: 250L, dtype: float64</span>

<span class="gp">In [268]: </span><span class="n">ts</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;250L&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">ffill</span><span class="p">()</span>
<span class="go">                                                                                                                                                                                                           Out[268]: </span>
<span class="go">2012-01-01 00:00:00.000    296</span>
<span class="go">2012-01-01 00:00:00.250    296</span>
<span class="go">2012-01-01 00:00:00.500    296</span>
<span class="go">2012-01-01 00:00:00.750    296</span>
<span class="go">2012-01-01 00:00:01.000    199</span>
<span class="go">Freq: 250L, dtype: int64</span>

<span class="gp">In [269]: </span><span class="n">ts</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;250L&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">ffill</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="go">                                                                                                                                                                                                                                                                                                                                                                                                          Out[269]: </span>
<span class="go">2012-01-01 00:00:00.000    296.0</span>
<span class="go">2012-01-01 00:00:00.250    296.0</span>
<span class="go">2012-01-01 00:00:00.500    296.0</span>
<span class="go">2012-01-01 00:00:00.750      NaN</span>
<span class="go">2012-01-01 00:00:01.000    199.0</span>
<span class="go">Freq: 250L, dtype: float64</span>
</pre></div>
</div>
</div>
<div class="section" id="sparse-resampling">
<h3>Sparse Resampling<a class="headerlink" href="#sparse-resampling" title="Permalink to this headline">¶</a></h3>
<p>Sparse timeseries are ones where you have a lot fewer points relative
to the amount of time you are looking to resample. Naively upsampling a sparse series can potentially
generate lots of intermediate values. When you don&#8217;t want to use a method to fill these values, e.g. <code class="docutils literal"><span class="pre">fill_method</span></code> is <code class="docutils literal"><span class="pre">None</span></code>,
then intermediate values will be filled with <code class="docutils literal"><span class="pre">NaN</span></code>.</p>
<p>Since <code class="docutils literal"><span class="pre">resample</span></code> is a time-based groupby, the following is a method to efficiently
resample only the groups that are not all <code class="docutils literal"><span class="pre">NaN</span></code></p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [270]: </span><span class="n">rng</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;2014-1-1&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="s1">&#39;1s&#39;</span><span class="p">)</span>

<span class="gp">In [271]: </span><span class="n">ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">rng</span><span class="p">)</span>
</pre></div>
</div>
<p>If we want to resample to the full range of the series</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [272]: </span><span class="n">ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;3T&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gh">Out[272]: </span><span class="go"></span>
<span class="go">2014-01-01 00:00:00     0</span>
<span class="go">2014-01-01 00:03:00     0</span>
<span class="go">2014-01-01 00:06:00     0</span>
<span class="go">2014-01-01 00:09:00     0</span>
<span class="go">2014-01-01 00:12:00     0</span>
<span class="go">2014-01-01 00:15:00     0</span>
<span class="go">2014-01-01 00:18:00     0</span>
<span class="go">                       ..</span>
<span class="go">2014-04-09 23:42:00     0</span>
<span class="go">2014-04-09 23:45:00     0</span>
<span class="go">2014-04-09 23:48:00     0</span>
<span class="go">2014-04-09 23:51:00     0</span>
<span class="go">2014-04-09 23:54:00     0</span>
<span class="go">2014-04-09 23:57:00     0</span>
<span class="go">2014-04-10 00:00:00    99</span>
<span class="go">Freq: 3T, Length: 47521, dtype: int64</span>
</pre></div>
</div>
<p>We can instead only resample those groups where we have points as follows:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [273]: </span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>

<span class="gp">In [274]: </span><span class="kn">from</span> <span class="nn">pandas.tseries.frequencies</span> <span class="kn">import</span> <span class="n">to_offset</span>

<span class="gp">In [275]: </span><span class="k">def</span> <span class="nf">round</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">freq</span><span class="p">):</span>
<span class="gp">   .....: </span>    <span class="n">freq</span> <span class="o">=</span> <span class="n">to_offset</span><span class="p">(</span><span class="n">freq</span><span class="p">)</span>
<span class="gp">   .....: </span>    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">((</span><span class="n">t</span><span class="o">.</span><span class="n">value</span> <span class="o">//</span> <span class="n">freq</span><span class="o">.</span><span class="n">delta</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">*</span> <span class="n">freq</span><span class="o">.</span><span class="n">delta</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [276]: </span><span class="n">ts</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="nb">round</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;3T&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gh">Out[276]: </span><span class="go"></span>
<span class="go">2014-01-01     0</span>
<span class="go">2014-01-02     1</span>
<span class="go">2014-01-03     2</span>
<span class="go">2014-01-04     3</span>
<span class="go">2014-01-05     4</span>
<span class="go">2014-01-06     5</span>
<span class="go">2014-01-07     6</span>
<span class="go">              ..</span>
<span class="go">2014-04-04    93</span>
<span class="go">2014-04-05    94</span>
<span class="go">2014-04-06    95</span>
<span class="go">2014-04-07    96</span>
<span class="go">2014-04-08    97</span>
<span class="go">2014-04-09    98</span>
<span class="go">2014-04-10    99</span>
<span class="go">Length: 100, dtype: int64</span>
</pre></div>
</div>
</div>
<div class="section" id="aggregation">
<span id="timeseries-aggregate"></span><h3>Aggregation<a class="headerlink" href="#aggregation" title="Permalink to this headline">¶</a></h3>
<p>Similar to the <a class="reference internal" href="basics.html#basics-aggregate"><span class="std std-ref">aggregating API</span></a>, <a class="reference internal" href="groupby.html#groupby-aggregate"><span class="std std-ref">groupby API</span></a>, and  the <a class="reference internal" href="computation.html#stats-aggregate"><span class="std std-ref">window functions API</span></a>,
a <code class="docutils literal"><span class="pre">Resampler</span></code> can be selectively resampled.</p>
<p>Resampling a <code class="docutils literal"><span class="pre">DataFrame</span></code>, the default will be to act on all columns with the same function.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [277]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
<span class="gp">   .....: </span>                  <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;1/1/2012&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;S&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">1000</span><span class="p">),</span>
<span class="gp">   .....: </span>                  <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">])</span>
<span class="gp">   .....: </span>

<span class="gp">In [278]: </span><span class="n">r</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;3T&#39;</span><span class="p">)</span>

<span class="gp">In [279]: </span><span class="n">r</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="gh">Out[279]: </span><span class="go"></span>
<span class="go">                            A         B         C</span>
<span class="go">2012-01-01 00:00:00 -0.038580 -0.085117 -0.024750</span>
<span class="go">2012-01-01 00:03:00  0.052387 -0.061477  0.029548</span>
<span class="go">2012-01-01 00:06:00  0.121377 -0.010630 -0.043691</span>
<span class="go">2012-01-01 00:09:00 -0.106814 -0.053819  0.097222</span>
<span class="go">2012-01-01 00:12:00  0.032560  0.080543  0.167380</span>
<span class="go">2012-01-01 00:15:00  0.060486 -0.057602 -0.106213</span>
</pre></div>
</div>
<p>We can select a specific column or columns using standard getitem.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [280]: </span><span class="n">r</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="gh">Out[280]: </span><span class="go"></span>
<span class="go">2012-01-01 00:00:00   -0.038580</span>
<span class="go">2012-01-01 00:03:00    0.052387</span>
<span class="go">2012-01-01 00:06:00    0.121377</span>
<span class="go">2012-01-01 00:09:00   -0.106814</span>
<span class="go">2012-01-01 00:12:00    0.032560</span>
<span class="go">2012-01-01 00:15:00    0.060486</span>
<span class="go">Freq: 3T, Name: A, dtype: float64</span>

<span class="gp">In [281]: </span><span class="n">r</span><span class="p">[[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="go">                                                                                                                                                                                                                                             Out[281]: </span>
<span class="go">                            A         B</span>
<span class="go">2012-01-01 00:00:00 -0.038580 -0.085117</span>
<span class="go">2012-01-01 00:03:00  0.052387 -0.061477</span>
<span class="go">2012-01-01 00:06:00  0.121377 -0.010630</span>
<span class="go">2012-01-01 00:09:00 -0.106814 -0.053819</span>
<span class="go">2012-01-01 00:12:00  0.032560  0.080543</span>
<span class="go">2012-01-01 00:15:00  0.060486 -0.057602</span>
</pre></div>
</div>
<p>You can pass a list or dict of functions to do aggregation with, outputting a <code class="docutils literal"><span class="pre">DataFrame</span></code>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [282]: </span><span class="n">r</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">])</span>
<span class="gh">Out[282]: </span><span class="go"></span>
<span class="go">                           sum      mean       std</span>
<span class="go">2012-01-01 00:00:00  -6.944481 -0.038580  0.985150</span>
<span class="go">2012-01-01 00:03:00   9.429707  0.052387  1.078022</span>
<span class="go">2012-01-01 00:06:00  21.847876  0.121377  0.996365</span>
<span class="go">2012-01-01 00:09:00 -19.226593 -0.106814  0.914070</span>
<span class="go">2012-01-01 00:12:00   5.860874  0.032560  1.100055</span>
<span class="go">2012-01-01 00:15:00   6.048588  0.060486  1.001532</span>
</pre></div>
</div>
<p>On a resampled <code class="docutils literal"><span class="pre">DataFrame</span></code>, you can pass a list of functions to apply to each
column, which produces an aggregated result with a hierarchical index:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [283]: </span><span class="n">r</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">])</span>
<span class="gh">Out[283]: </span><span class="go"></span>
<span class="go">                             A                    B                    C  \</span>
<span class="go">                           sum      mean        sum      mean        sum   </span>
<span class="go">2012-01-01 00:00:00  -6.944481 -0.038580 -15.320993 -0.085117  -4.454941   </span>
<span class="go">2012-01-01 00:03:00   9.429707  0.052387 -11.065916 -0.061477   5.318688   </span>
<span class="go">2012-01-01 00:06:00  21.847876  0.121377  -1.913420 -0.010630  -7.864429   </span>
<span class="go">2012-01-01 00:09:00 -19.226593 -0.106814  -9.687468 -0.053819  17.499920   </span>
<span class="go">2012-01-01 00:12:00   5.860874  0.032560  14.497725  0.080543  30.128432   </span>
<span class="go">2012-01-01 00:15:00   6.048588  0.060486  -5.760208 -0.057602 -10.621260   </span>

<span class="go">                               </span>
<span class="go">                         mean  </span>
<span class="go">2012-01-01 00:00:00 -0.024750  </span>
<span class="go">2012-01-01 00:03:00  0.029548  </span>
<span class="go">2012-01-01 00:06:00 -0.043691  </span>
<span class="go">2012-01-01 00:09:00  0.097222  </span>
<span class="go">2012-01-01 00:12:00  0.167380  </span>
<span class="go">2012-01-01 00:15:00 -0.106213  </span>
</pre></div>
</div>
<p>By passing a dict to <code class="docutils literal"><span class="pre">aggregate</span></code> you can apply a different aggregation to the
columns of a <code class="docutils literal"><span class="pre">DataFrame</span></code>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [284]: </span><span class="n">r</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">&#39;A&#39;</span> <span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">,</span>
<span class="gp">   .....: </span>       <span class="s1">&#39;B&#39;</span> <span class="p">:</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">ddof</span><span class="o">=</span><span class="mi">1</span><span class="p">)})</span>
<span class="gp">   .....: </span>
<span class="gh">Out[284]: </span><span class="go"></span>
<span class="go">                             A         B</span>
<span class="go">2012-01-01 00:00:00  -6.944481  1.087752</span>
<span class="go">2012-01-01 00:03:00   9.429707  1.014552</span>
<span class="go">2012-01-01 00:06:00  21.847876  0.954588</span>
<span class="go">2012-01-01 00:09:00 -19.226593  1.027990</span>
<span class="go">2012-01-01 00:12:00   5.860874  1.021503</span>
<span class="go">2012-01-01 00:15:00   6.048588  1.004984</span>
</pre></div>
</div>
<p>The function names can also be strings. In order for a string to be valid it
must be implemented on the Resampled object</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [285]: </span><span class="n">r</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">&#39;A&#39;</span> <span class="p">:</span> <span class="s1">&#39;sum&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span> <span class="p">:</span> <span class="s1">&#39;std&#39;</span><span class="p">})</span>
<span class="gh">Out[285]: </span><span class="go"></span>
<span class="go">                             A         B</span>
<span class="go">2012-01-01 00:00:00  -6.944481  1.087752</span>
<span class="go">2012-01-01 00:03:00   9.429707  1.014552</span>
<span class="go">2012-01-01 00:06:00  21.847876  0.954588</span>
<span class="go">2012-01-01 00:09:00 -19.226593  1.027990</span>
<span class="go">2012-01-01 00:12:00   5.860874  1.021503</span>
<span class="go">2012-01-01 00:15:00   6.048588  1.004984</span>
</pre></div>
</div>
<p>Furthermore, you can also specify multiple aggregation functions for each column separately.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [286]: </span><span class="n">r</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">&#39;A&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;sum&#39;</span><span class="p">,</span><span class="s1">&#39;std&#39;</span><span class="p">],</span> <span class="s1">&#39;B&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span><span class="s1">&#39;std&#39;</span><span class="p">]</span> <span class="p">})</span>
<span class="gh">Out[286]: </span><span class="go"></span>
<span class="go">                             A                   B          </span>
<span class="go">                           sum       std      mean       std</span>
<span class="go">2012-01-01 00:00:00  -6.944481  0.985150 -0.085117  1.087752</span>
<span class="go">2012-01-01 00:03:00   9.429707  1.078022 -0.061477  1.014552</span>
<span class="go">2012-01-01 00:06:00  21.847876  0.996365 -0.010630  0.954588</span>
<span class="go">2012-01-01 00:09:00 -19.226593  0.914070 -0.053819  1.027990</span>
<span class="go">2012-01-01 00:12:00   5.860874  1.100055  0.080543  1.021503</span>
<span class="go">2012-01-01 00:15:00   6.048588  1.001532 -0.057602  1.004984</span>
</pre></div>
</div>
<p>If a <code class="docutils literal"><span class="pre">DataFrame</span></code> does not have a datetimelike index, but instead you want
to resample based on datetimelike column in the frame, it can passed to the
<code class="docutils literal"><span class="pre">on</span></code> keyword.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [287]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;2015-01-01&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;W&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
<span class="gp">   .....: </span>                   <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">)},</span>
<span class="gp">   .....: </span>                  <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_arrays</span><span class="p">([</span>
<span class="gp">   .....: </span>                           <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span>
<span class="gp">   .....: </span>                           <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;2015-01-01&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;W&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">5</span><span class="p">)],</span>
<span class="gp">   .....: </span>                       <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;v&#39;</span><span class="p">,</span><span class="s1">&#39;d&#39;</span><span class="p">]))</span>
<span class="gp">   .....: </span>

<span class="gp">In [288]: </span><span class="n">df</span>
<span class="gh">Out[288]: </span><span class="go"></span>
<span class="go">              a       date</span>
<span class="go">v d                       </span>
<span class="go">1 2015-01-04  0 2015-01-04</span>
<span class="go">2 2015-01-11  1 2015-01-11</span>
<span class="go">3 2015-01-18  2 2015-01-18</span>
<span class="go">4 2015-01-25  3 2015-01-25</span>
<span class="go">5 2015-02-01  4 2015-02-01</span>

<span class="gp">In [289]: </span><span class="n">df</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;date&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="go">                                                                                                                                                                                                        Out[289]: </span>
<span class="go">            a</span>
<span class="go">date         </span>
<span class="go">2015-01-31  6</span>
<span class="go">2015-02-28  4</span>
</pre></div>
</div>
<p>Similarly, if you instead want to resample by a datetimelike
level of <code class="docutils literal"><span class="pre">MultiIndex</span></code>, its name or location can be passed to the
<code class="docutils literal"><span class="pre">level</span></code> keyword.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [290]: </span><span class="n">df</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s1">&#39;d&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gh">Out[290]: </span><span class="go"></span>
<span class="go">            a</span>
<span class="go">d            </span>
<span class="go">2015-01-31  6</span>
<span class="go">2015-02-28  4</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="time-span-representation">
<span id="timeseries-periods"></span><h2>Time Span Representation<a class="headerlink" href="#time-span-representation" title="Permalink to this headline">¶</a></h2>
<p>Regular intervals of time are represented by <code class="docutils literal"><span class="pre">Period</span></code> objects in pandas while
sequences of <code class="docutils literal"><span class="pre">Period</span></code> objects are collected in a <code class="docutils literal"><span class="pre">PeriodIndex</span></code>, which can
be created with the convenience function <code class="docutils literal"><span class="pre">period_range</span></code>.</p>
<div class="section" id="period">
<h3>Period<a class="headerlink" href="#period" title="Permalink to this headline">¶</a></h3>
<p>A <code class="docutils literal"><span class="pre">Period</span></code> represents a span of time (e.g., a day, a month, a quarter, etc).
You can specify the span via <code class="docutils literal"><span class="pre">freq</span></code> keyword using a frequency alias like below.
Because <code class="docutils literal"><span class="pre">freq</span></code> represents a span of <code class="docutils literal"><span class="pre">Period</span></code>, it cannot be negative like &#8220;-3D&#8221;.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [291]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">&#39;2012&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;A-DEC&#39;</span><span class="p">)</span>
<span class="gh">Out[291]: </span><span class="go">Period(&#39;2012&#39;, &#39;A-DEC&#39;)</span>

<span class="gp">In [292]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">&#39;2012-1-1&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">)</span>
<span class="go">                                  Out[292]: Period(&#39;2012-01-01&#39;, &#39;D&#39;)</span>

<span class="gp">In [293]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">&#39;2012-1-1 19:00&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;H&#39;</span><span class="p">)</span>
<span class="go">                                                                      Out[293]: Period(&#39;2012-01-01 19:00&#39;, &#39;H&#39;)</span>

<span class="gp">In [294]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">&#39;2012-1-1 19:00&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;5H&#39;</span><span class="p">)</span>
<span class="go">                                                                                                                Out[294]: Period(&#39;2012-01-01 19:00&#39;, &#39;5H&#39;)</span>
</pre></div>
</div>
<p>Adding and subtracting integers from periods shifts the period by its own
frequency. Arithmetic is not allowed between <code class="docutils literal"><span class="pre">Period</span></code> with different <code class="docutils literal"><span class="pre">freq</span></code> (span).</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [295]: </span><span class="n">p</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">&#39;2012&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;A-DEC&#39;</span><span class="p">)</span>

<span class="gp">In [296]: </span><span class="n">p</span> <span class="o">+</span> <span class="mi">1</span>
<span class="gh">Out[296]: </span><span class="go">Period(&#39;2013&#39;, &#39;A-DEC&#39;)</span>

<span class="gp">In [297]: </span><span class="n">p</span> <span class="o">-</span> <span class="mi">3</span>
<span class="go">                                  Out[297]: Period(&#39;2009&#39;, &#39;A-DEC&#39;)</span>

<span class="gp">In [298]: </span><span class="n">p</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">&#39;2012-01&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;2M&#39;</span><span class="p">)</span>

<span class="gp">In [299]: </span><span class="n">p</span> <span class="o">+</span> <span class="mi">2</span>
<span class="gh">Out[299]: </span><span class="go">Period(&#39;2012-05&#39;, &#39;2M&#39;)</span>

<span class="gp">In [300]: </span><span class="n">p</span> <span class="o">-</span> <span class="mi">1</span>
<span class="go">                                  Out[300]: Period(&#39;2011-11&#39;, &#39;2M&#39;)</span>

<span class="gp">In [301]: </span><span class="n">p</span> <span class="o">==</span> <span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">&#39;2012-01&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;3M&#39;</span><span class="p">)</span>
<span class="go">                                                                    ---------------------------------------------------------------------------</span>
<span class="go">IncompatibleFrequency                     Traceback (most recent call last)</span>
<span class="go">&lt;ipython-input-301-4b67dc0b596c&gt; in &lt;module&gt;()</span>
<span class="go">----&gt; 1 p == pd.Period(&#39;2012-01&#39;, freq=&#39;3M&#39;)</span>

<span class="go">~/Envs/pandas-dev/lib/python3.6/site-packages/pandas/pandas/_libs/period.pyx in pandas._libs.period._Period.__richcmp__()</span>

<span class="go">IncompatibleFrequency: Input has different freq=3M from Period(freq=2M)</span>
</pre></div>
</div>
<p>If <code class="docutils literal"><span class="pre">Period</span></code> freq is daily or higher (<code class="docutils literal"><span class="pre">D</span></code>, <code class="docutils literal"><span class="pre">H</span></code>, <code class="docutils literal"><span class="pre">T</span></code>, <code class="docutils literal"><span class="pre">S</span></code>, <code class="docutils literal"><span class="pre">L</span></code>, <code class="docutils literal"><span class="pre">U</span></code>, <code class="docutils literal"><span class="pre">N</span></code>), <code class="docutils literal"><span class="pre">offsets</span></code> and <code class="docutils literal"><span class="pre">timedelta</span></code>-like can be added if the result can have the same freq. Otherwise, <code class="docutils literal"><span class="pre">ValueError</span></code> will be raised.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [302]: </span><span class="n">p</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">&#39;2014-07-01 09:00&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;H&#39;</span><span class="p">)</span>

<span class="gp">In [303]: </span><span class="n">p</span> <span class="o">+</span> <span class="n">Hour</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gh">Out[303]: </span><span class="go">Period(&#39;2014-07-01 11:00&#39;, &#39;H&#39;)</span>

<span class="gp">In [304]: </span><span class="n">p</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">120</span><span class="p">)</span>
<span class="go">                                          Out[304]: Period(&#39;2014-07-01 11:00&#39;, &#39;H&#39;)</span>

<span class="gp">In [305]: </span><span class="n">p</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">timedelta64</span><span class="p">(</span><span class="mi">7200</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">)</span>
<span class="go">                                                                                    Out[305]: Period(&#39;2014-07-01 11:00&#39;, &#39;H&#39;)</span>
</pre></div>
</div>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">p</span> <span class="o">+</span> <span class="n">Minute</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="go">Traceback</span>
<span class="go">   ...</span>
<span class="go">ValueError: Input has different freq from Period(freq=H)</span>
</pre></div>
</div>
<p>If <code class="docutils literal"><span class="pre">Period</span></code> has other freqs, only the same <code class="docutils literal"><span class="pre">offsets</span></code> can be added. Otherwise, <code class="docutils literal"><span class="pre">ValueError</span></code> will be raised.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [306]: </span><span class="n">p</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">&#39;2014-07&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;M&#39;</span><span class="p">)</span>

<span class="gp">In [307]: </span><span class="n">p</span> <span class="o">+</span> <span class="n">MonthEnd</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gh">Out[307]: </span><span class="go">Period(&#39;2014-10&#39;, &#39;M&#39;)</span>
</pre></div>
</div>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">p</span> <span class="o">+</span> <span class="n">MonthBegin</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">Traceback</span>
<span class="go">   ...</span>
<span class="go">ValueError: Input has different freq from Period(freq=M)</span>
</pre></div>
</div>
<p>Taking the difference of <code class="docutils literal"><span class="pre">Period</span></code> instances with the same frequency will
return the number of frequency units between them:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [308]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">&#39;2012&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;A-DEC&#39;</span><span class="p">)</span> <span class="o">-</span> <span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">&#39;2002&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;A-DEC&#39;</span><span class="p">)</span>
<span class="gh">Out[308]: </span><span class="go">10</span>
</pre></div>
</div>
</div>
<div class="section" id="periodindex-and-period-range">
<h3>PeriodIndex and period_range<a class="headerlink" href="#periodindex-and-period-range" title="Permalink to this headline">¶</a></h3>
<p>Regular sequences of <code class="docutils literal"><span class="pre">Period</span></code> objects can be collected in a <code class="docutils literal"><span class="pre">PeriodIndex</span></code>,
which can be constructed using the <code class="docutils literal"><span class="pre">period_range</span></code> convenience function:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [309]: </span><span class="n">prng</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">period_range</span><span class="p">(</span><span class="s1">&#39;1/1/2011&#39;</span><span class="p">,</span> <span class="s1">&#39;1/1/2012&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;M&#39;</span><span class="p">)</span>

<span class="gp">In [310]: </span><span class="n">prng</span>
<span class="gh">Out[310]: </span><span class="go"></span>
<span class="go">PeriodIndex([&#39;2011-01&#39;, &#39;2011-02&#39;, &#39;2011-03&#39;, &#39;2011-04&#39;, &#39;2011-05&#39;, &#39;2011-06&#39;,</span>
<span class="go">             &#39;2011-07&#39;, &#39;2011-08&#39;, &#39;2011-09&#39;, &#39;2011-10&#39;, &#39;2011-11&#39;, &#39;2011-12&#39;,</span>
<span class="go">             &#39;2012-01&#39;],</span>
<span class="go">            dtype=&#39;period[M]&#39;, freq=&#39;M&#39;)</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">PeriodIndex</span></code> constructor can also be used directly:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [311]: </span><span class="n">pd</span><span class="o">.</span><span class="n">PeriodIndex</span><span class="p">([</span><span class="s1">&#39;2011-1&#39;</span><span class="p">,</span> <span class="s1">&#39;2011-2&#39;</span><span class="p">,</span> <span class="s1">&#39;2011-3&#39;</span><span class="p">],</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;M&#39;</span><span class="p">)</span>
<span class="gh">Out[311]: </span><span class="go">PeriodIndex([&#39;2011-01&#39;, &#39;2011-02&#39;, &#39;2011-03&#39;], dtype=&#39;period[M]&#39;, freq=&#39;M&#39;)</span>
</pre></div>
</div>
<p>Passing multiplied frequency outputs a sequence of <code class="docutils literal"><span class="pre">Period</span></code> which
has multiplied span.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [312]: </span><span class="n">pd</span><span class="o">.</span><span class="n">PeriodIndex</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s1">&#39;2014-01&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;3M&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="gh">Out[312]: </span><span class="go">PeriodIndex([&#39;2014-01&#39;, &#39;2014-04&#39;, &#39;2014-07&#39;, &#39;2014-10&#39;], dtype=&#39;period[3M]&#39;, freq=&#39;3M&#39;)</span>
</pre></div>
</div>
<p>If <code class="docutils literal"><span class="pre">start</span></code> or <code class="docutils literal"><span class="pre">end</span></code> are <code class="docutils literal"><span class="pre">Period</span></code> objects, they will be used as anchor
endpoints for a <code class="docutils literal"><span class="pre">PeriodIndex</span></code> with frequency matching that of the
<code class="docutils literal"><span class="pre">PeriodIndex</span></code> constructor.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [313]: </span><span class="n">pd</span><span class="o">.</span><span class="n">PeriodIndex</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">&#39;2017Q1&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;Q&#39;</span><span class="p">),</span>
<span class="gp">   .....: </span>               <span class="n">end</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">&#39;2017Q2&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;Q&#39;</span><span class="p">),</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;M&#39;</span><span class="p">)</span>
<span class="gp">   .....: </span>
<span class="gh">Out[313]: </span><span class="go">PeriodIndex([&#39;2017-03&#39;, &#39;2017-04&#39;, &#39;2017-05&#39;, &#39;2017-06&#39;], dtype=&#39;period[M]&#39;, freq=&#39;M&#39;)</span>
</pre></div>
</div>
<p>Just like <code class="docutils literal"><span class="pre">DatetimeIndex</span></code>, a <code class="docutils literal"><span class="pre">PeriodIndex</span></code> can also be used to index pandas
objects:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [314]: </span><span class="n">ps</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">prng</span><span class="p">)),</span> <span class="n">prng</span><span class="p">)</span>

<span class="gp">In [315]: </span><span class="n">ps</span>
<span class="gh">Out[315]: </span><span class="go"></span>
<span class="go">2011-01    0.258318</span>
<span class="go">2011-02   -2.503700</span>
<span class="go">2011-03   -0.303053</span>
<span class="go">2011-04    0.270509</span>
<span class="go">2011-05    1.004841</span>
<span class="go">2011-06   -0.129044</span>
<span class="go">2011-07   -1.406335</span>
<span class="go">2011-08   -1.310412</span>
<span class="go">2011-09    0.769439</span>
<span class="go">2011-10   -0.542325</span>
<span class="go">2011-11    2.010541</span>
<span class="go">2011-12    1.001558</span>
<span class="go">2012-01   -0.087453</span>
<span class="go">Freq: M, dtype: float64</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">PeriodIndex</span></code> supports addition and subtraction with the same rule as <code class="docutils literal"><span class="pre">Period</span></code>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [316]: </span><span class="n">idx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">period_range</span><span class="p">(</span><span class="s1">&#39;2014-07-01 09:00&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;H&#39;</span><span class="p">)</span>

<span class="gp">In [317]: </span><span class="n">idx</span>
<span class="gh">Out[317]: </span><span class="go"></span>
<span class="go">PeriodIndex([&#39;2014-07-01 09:00&#39;, &#39;2014-07-01 10:00&#39;, &#39;2014-07-01 11:00&#39;,</span>
<span class="go">             &#39;2014-07-01 12:00&#39;, &#39;2014-07-01 13:00&#39;],</span>
<span class="go">            dtype=&#39;period[H]&#39;, freq=&#39;H&#39;)</span>

<span class="gp">In [318]: </span><span class="n">idx</span> <span class="o">+</span> <span class="n">Hour</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">                                                                                                                                                                                   Out[318]: </span>
<span class="go">PeriodIndex([&#39;2014-07-01 11:00&#39;, &#39;2014-07-01 12:00&#39;, &#39;2014-07-01 13:00&#39;,</span>
<span class="go">             &#39;2014-07-01 14:00&#39;, &#39;2014-07-01 15:00&#39;],</span>
<span class="go">            dtype=&#39;period[H]&#39;, freq=&#39;H&#39;)</span>

<span class="gp">In [319]: </span><span class="n">idx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">period_range</span><span class="p">(</span><span class="s1">&#39;2014-07&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;M&#39;</span><span class="p">)</span>

<span class="gp">In [320]: </span><span class="n">idx</span>
<span class="gh">Out[320]: </span><span class="go">PeriodIndex([&#39;2014-07&#39;, &#39;2014-08&#39;, &#39;2014-09&#39;, &#39;2014-10&#39;, &#39;2014-11&#39;], dtype=&#39;period[M]&#39;, freq=&#39;M&#39;)</span>

<span class="gp">In [321]: </span><span class="n">idx</span> <span class="o">+</span> <span class="n">MonthEnd</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">                                                                                                            Out[321]: PeriodIndex([&#39;2014-10&#39;, &#39;2014-11&#39;, &#39;2014-12&#39;, &#39;2015-01&#39;, &#39;2015-02&#39;], dtype=&#39;period[M]&#39;, freq=&#39;M&#39;)</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">PeriodIndex</span></code> has its own dtype named <code class="docutils literal"><span class="pre">period</span></code>, refer to <a class="reference internal" href="#timeseries-period-dtype"><span class="std std-ref">Period Dtypes</span></a>.</p>
</div>
<div class="section" id="period-dtypes">
<span id="timeseries-period-dtype"></span><h3>Period Dtypes<a class="headerlink" href="#period-dtypes" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.19.0.</span></p>
</div>
<p><code class="docutils literal"><span class="pre">PeriodIndex</span></code> has a custom <code class="docutils literal"><span class="pre">period</span></code> dtype. This is a pandas extension
dtype similar to the <a class="reference internal" href="#timeseries-timezone-series"><span class="std std-ref">timezone aware dtype</span></a> (<code class="docutils literal"><span class="pre">datetime64[ns,</span> <span class="pre">tz]</span></code>).</p>
<p>The <code class="docutils literal"><span class="pre">period</span></code> dtype holds the <code class="docutils literal"><span class="pre">freq</span></code> attribute and is represented with
<code class="docutils literal"><span class="pre">period[freq]</span></code> like <code class="docutils literal"><span class="pre">period[D]</span></code> or <code class="docutils literal"><span class="pre">period[M]</span></code>, using <a class="reference internal" href="#timeseries-offset-aliases"><span class="std std-ref">frequency strings</span></a>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [322]: </span><span class="n">pi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">period_range</span><span class="p">(</span><span class="s1">&#39;2016-01-01&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;M&#39;</span><span class="p">)</span>

<span class="gp">In [323]: </span><span class="n">pi</span>
<span class="gh">Out[323]: </span><span class="go">PeriodIndex([&#39;2016-01&#39;, &#39;2016-02&#39;, &#39;2016-03&#39;], dtype=&#39;period[M]&#39;, freq=&#39;M&#39;)</span>

<span class="gp">In [324]: </span><span class="n">pi</span><span class="o">.</span><span class="n">dtype</span>
<span class="go">                                                                                      Out[324]: period[M]</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">period</span></code> dtype can be used in <code class="docutils literal"><span class="pre">.astype(...)</span></code>. It allows one to change the
<code class="docutils literal"><span class="pre">freq</span></code> of a <code class="docutils literal"><span class="pre">PeriodIndex</span></code> like <code class="docutils literal"><span class="pre">.asfreq()</span></code> and convert a
<code class="docutils literal"><span class="pre">DatetimeIndex</span></code> to <code class="docutils literal"><span class="pre">PeriodIndex</span></code> like <code class="docutils literal"><span class="pre">to_period()</span></code>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="go"># change monthly freq to daily freq</span>
<span class="gp">In [325]: </span><span class="n">pi</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;period[D]&#39;</span><span class="p">)</span>
<span class="gh">Out[325]: </span><span class="go">PeriodIndex([&#39;2016-01-31&#39;, &#39;2016-02-29&#39;, &#39;2016-03-31&#39;], dtype=&#39;period[D]&#39;, freq=&#39;D&#39;)</span>

<span class="go"># convert to DatetimeIndex</span>
<span class="gp">In [326]: </span><span class="n">pi</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;datetime64[ns]&#39;</span><span class="p">)</span>
<span class="go">                                                                                               Out[326]: DatetimeIndex([&#39;2016-01-01&#39;, &#39;2016-02-01&#39;, &#39;2016-03-01&#39;], dtype=&#39;datetime64[ns]&#39;, freq=&#39;MS&#39;)</span>

<span class="go"># convert to PeriodIndex</span>
<span class="gp">In [327]: </span><span class="n">dti</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;2011-01-01&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;M&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

<span class="gp">In [328]: </span><span class="n">dti</span>
<span class="gh">Out[328]: </span><span class="go">DatetimeIndex([&#39;2011-01-31&#39;, &#39;2011-02-28&#39;, &#39;2011-03-31&#39;], dtype=&#39;datetime64[ns]&#39;, freq=&#39;M&#39;)</span>

<span class="gp">In [329]: </span><span class="n">dti</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;period[M]&#39;</span><span class="p">)</span>
<span class="go">                                                                                                      Out[329]: PeriodIndex([&#39;2011-01&#39;, &#39;2011-02&#39;, &#39;2011-03&#39;], dtype=&#39;period[M]&#39;, freq=&#39;M&#39;)</span>
</pre></div>
</div>
</div>
<div class="section" id="periodindex-partial-string-indexing">
<h3>PeriodIndex Partial String Indexing<a class="headerlink" href="#periodindex-partial-string-indexing" title="Permalink to this headline">¶</a></h3>
<p>You can pass in dates and strings to <code class="docutils literal"><span class="pre">Series</span></code> and <code class="docutils literal"><span class="pre">DataFrame</span></code> with <code class="docutils literal"><span class="pre">PeriodIndex</span></code>, in the same manner as <code class="docutils literal"><span class="pre">DatetimeIndex</span></code>. For details, refer to <a class="reference internal" href="#timeseries-partialindexing"><span class="std std-ref">DatetimeIndex Partial String Indexing</span></a>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [330]: </span><span class="n">ps</span><span class="p">[</span><span class="s1">&#39;2011-01&#39;</span><span class="p">]</span>
<span class="gh">Out[330]: </span><span class="go">0.25831819727391592</span>

<span class="gp">In [331]: </span><span class="n">ps</span><span class="p">[</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2011</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">25</span><span class="p">):]</span>
<span class="go">                              Out[331]: </span>
<span class="go">2011-12    1.001558</span>
<span class="go">2012-01   -0.087453</span>
<span class="go">Freq: M, dtype: float64</span>

<span class="gp">In [332]: </span><span class="n">ps</span><span class="p">[</span><span class="s1">&#39;10/31/2011&#39;</span><span class="p">:</span><span class="s1">&#39;12/31/2011&#39;</span><span class="p">]</span>
<span class="go">                                                                                                         Out[332]: </span>
<span class="go">2011-10   -0.542325</span>
<span class="go">2011-11    2.010541</span>
<span class="go">2011-12    1.001558</span>
<span class="go">Freq: M, dtype: float64</span>
</pre></div>
</div>
<p>Passing a string representing a lower frequency than <code class="docutils literal"><span class="pre">PeriodIndex</span></code> returns partial sliced data.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [333]: </span><span class="n">ps</span><span class="p">[</span><span class="s1">&#39;2011&#39;</span><span class="p">]</span>
<span class="gh">Out[333]: </span><span class="go"></span>
<span class="go">2011-01    0.258318</span>
<span class="go">2011-02   -2.503700</span>
<span class="go">2011-03   -0.303053</span>
<span class="go">2011-04    0.270509</span>
<span class="go">2011-05    1.004841</span>
<span class="go">2011-06   -0.129044</span>
<span class="go">2011-07   -1.406335</span>
<span class="go">2011-08   -1.310412</span>
<span class="go">2011-09    0.769439</span>
<span class="go">2011-10   -0.542325</span>
<span class="go">2011-11    2.010541</span>
<span class="go">2011-12    1.001558</span>
<span class="go">Freq: M, dtype: float64</span>

<span class="gp">In [334]: </span><span class="n">dfp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">600</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span>
<span class="gp">   .....: </span>                   <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">],</span>
<span class="gp">   .....: </span>                   <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">period_range</span><span class="p">(</span><span class="s1">&#39;2013-01-01 9:00&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;T&#39;</span><span class="p">))</span>
<span class="gp">   .....: </span>

<span class="gp">In [335]: </span><span class="n">dfp</span>
<span class="gh">Out[335]: </span><span class="go"></span>
<span class="go">                         A</span>
<span class="go">2013-01-01 09:00  0.005210</span>
<span class="go">2013-01-01 09:01 -0.014385</span>
<span class="go">2013-01-01 09:02 -0.212404</span>
<span class="go">2013-01-01 09:03 -1.227760</span>
<span class="go">2013-01-01 09:04 -0.809722</span>
<span class="go">2013-01-01 09:05 -1.719723</span>
<span class="go">2013-01-01 09:06 -0.808486</span>
<span class="go">...                    ...</span>
<span class="go">2013-01-01 18:53 -0.783098</span>
<span class="go">2013-01-01 18:54  0.755005</span>
<span class="go">2013-01-01 18:55 -1.116732</span>
<span class="go">2013-01-01 18:56 -0.940692</span>
<span class="go">2013-01-01 18:57  0.228536</span>
<span class="go">2013-01-01 18:58  0.109472</span>
<span class="go">2013-01-01 18:59  0.235414</span>

<span class="go">[600 rows x 1 columns]</span>

<span class="gp">In [336]: </span><span class="n">dfp</span><span class="p">[</span><span class="s1">&#39;2013-01-01 10H&#39;</span><span class="p">]</span>
<span class="go">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   Out[336]: </span>
<span class="go">                         A</span>
<span class="go">2013-01-01 10:00 -0.148998</span>
<span class="go">2013-01-01 10:01  2.154810</span>
<span class="go">2013-01-01 10:02 -1.605646</span>
<span class="go">2013-01-01 10:03  0.021024</span>
<span class="go">2013-01-01 10:04 -0.623737</span>
<span class="go">2013-01-01 10:05  1.451612</span>
<span class="go">2013-01-01 10:06  1.062463</span>
<span class="go">...                    ...</span>
<span class="go">2013-01-01 10:53  0.273119</span>
<span class="go">2013-01-01 10:54 -0.994071</span>
<span class="go">2013-01-01 10:55 -1.222179</span>
<span class="go">2013-01-01 10:56 -1.167118</span>
<span class="go">2013-01-01 10:57  0.262822</span>
<span class="go">2013-01-01 10:58 -0.283786</span>
<span class="go">2013-01-01 10:59  1.190726</span>

<span class="go">[60 rows x 1 columns]</span>
</pre></div>
</div>
<p>As with <code class="docutils literal"><span class="pre">DatetimeIndex</span></code>, the endpoints will be included in the result. The example below slices data starting from 10:00 to 11:59.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [337]: </span><span class="n">dfp</span><span class="p">[</span><span class="s1">&#39;2013-01-01 10H&#39;</span><span class="p">:</span><span class="s1">&#39;2013-01-01 11H&#39;</span><span class="p">]</span>
<span class="gh">Out[337]: </span><span class="go"></span>
<span class="go">                         A</span>
<span class="go">2013-01-01 10:00 -0.148998</span>
<span class="go">2013-01-01 10:01  2.154810</span>
<span class="go">2013-01-01 10:02 -1.605646</span>
<span class="go">2013-01-01 10:03  0.021024</span>
<span class="go">2013-01-01 10:04 -0.623737</span>
<span class="go">2013-01-01 10:05  1.451612</span>
<span class="go">2013-01-01 10:06  1.062463</span>
<span class="go">...                    ...</span>
<span class="go">2013-01-01 11:53 -1.477914</span>
<span class="go">2013-01-01 11:54  0.594465</span>
<span class="go">2013-01-01 11:55 -0.903243</span>
<span class="go">2013-01-01 11:56  1.182131</span>
<span class="go">2013-01-01 11:57  0.621345</span>
<span class="go">2013-01-01 11:58 -0.996113</span>
<span class="go">2013-01-01 11:59 -0.191659</span>

<span class="go">[120 rows x 1 columns]</span>
</pre></div>
</div>
</div>
<div class="section" id="frequency-conversion-and-resampling-with-periodindex">
<h3>Frequency Conversion and Resampling with PeriodIndex<a class="headerlink" href="#frequency-conversion-and-resampling-with-periodindex" title="Permalink to this headline">¶</a></h3>
<p>The frequency of <code class="docutils literal"><span class="pre">Period</span></code> and <code class="docutils literal"><span class="pre">PeriodIndex</span></code> can be converted via the <code class="docutils literal"><span class="pre">asfreq</span></code>
method. Let&#8217;s start with the fiscal year 2011, ending in December:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [338]: </span><span class="n">p</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">&#39;2011&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;A-DEC&#39;</span><span class="p">)</span>

<span class="gp">In [339]: </span><span class="n">p</span>
<span class="gh">Out[339]: </span><span class="go">Period(&#39;2011&#39;, &#39;A-DEC&#39;)</span>
</pre></div>
</div>
<p>We can convert it to a monthly frequency. Using the <code class="docutils literal"><span class="pre">how</span></code> parameter, we can
specify whether to return the starting or ending month:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [340]: </span><span class="n">p</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;start&#39;</span><span class="p">)</span>
<span class="gh">Out[340]: </span><span class="go">Period(&#39;2011-01&#39;, &#39;M&#39;)</span>

<span class="gp">In [341]: </span><span class="n">p</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;end&#39;</span><span class="p">)</span>
<span class="go">                                 Out[341]: Period(&#39;2011-12&#39;, &#39;M&#39;)</span>
</pre></div>
</div>
<p>The shorthands &#8216;s&#8217; and &#8216;e&#8217; are provided for convenience:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [342]: </span><span class="n">p</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">)</span>
<span class="gh">Out[342]: </span><span class="go">Period(&#39;2011-01&#39;, &#39;M&#39;)</span>

<span class="gp">In [343]: </span><span class="n">p</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">)</span>
<span class="go">                                 Out[343]: Period(&#39;2011-12&#39;, &#39;M&#39;)</span>
</pre></div>
</div>
<p>Converting to a &#8220;super-period&#8221; (e.g., annual frequency is a super-period of
quarterly frequency) automatically returns the super-period that includes the
input period:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [344]: </span><span class="n">p</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">&#39;2011-12&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;M&#39;</span><span class="p">)</span>

<span class="gp">In [345]: </span><span class="n">p</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s1">&#39;A-NOV&#39;</span><span class="p">)</span>
<span class="gh">Out[345]: </span><span class="go">Period(&#39;2012&#39;, &#39;A-NOV&#39;)</span>
</pre></div>
</div>
<p>Note that since we converted to an annual frequency that ends the year in
November, the monthly period of December 2011 is actually in the 2012 A-NOV
period.</p>
<p id="timeseries-quarterly">Period conversions with anchored frequencies are particularly useful for
working with various quarterly data common to economics, business, and other
fields. Many organizations define quarters relative to the month in which their
fiscal year starts and ends. Thus, first quarter of 2011 could start in 2010 or
a few months into 2011. Via anchored frequencies, pandas works for all quarterly
frequencies <code class="docutils literal"><span class="pre">Q-JAN</span></code> through <code class="docutils literal"><span class="pre">Q-DEC</span></code>.</p>
<p><code class="docutils literal"><span class="pre">Q-DEC</span></code> define regular calendar quarters:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [346]: </span><span class="n">p</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">&#39;2012Q1&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;Q-DEC&#39;</span><span class="p">)</span>

<span class="gp">In [347]: </span><span class="n">p</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">)</span>
<span class="gh">Out[347]: </span><span class="go">Period(&#39;2012-01-01&#39;, &#39;D&#39;)</span>

<span class="gp">In [348]: </span><span class="n">p</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">)</span>
<span class="go">                                    Out[348]: Period(&#39;2012-03-31&#39;, &#39;D&#39;)</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">Q-MAR</span></code> defines fiscal year end in March:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [349]: </span><span class="n">p</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">&#39;2011Q4&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;Q-MAR&#39;</span><span class="p">)</span>

<span class="gp">In [350]: </span><span class="n">p</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">)</span>
<span class="gh">Out[350]: </span><span class="go">Period(&#39;2011-01-01&#39;, &#39;D&#39;)</span>

<span class="gp">In [351]: </span><span class="n">p</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">)</span>
<span class="go">                                    Out[351]: Period(&#39;2011-03-31&#39;, &#39;D&#39;)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="converting-between-representations">
<span id="timeseries-interchange"></span><h2>Converting Between Representations<a class="headerlink" href="#converting-between-representations" title="Permalink to this headline">¶</a></h2>
<p>Timestamped data can be converted to PeriodIndex-ed data using <code class="docutils literal"><span class="pre">to_period</span></code>
and vice-versa using <code class="docutils literal"><span class="pre">to_timestamp</span></code>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [352]: </span><span class="n">rng</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;1/1/2012&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;M&#39;</span><span class="p">)</span>

<span class="gp">In [353]: </span><span class="n">ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">rng</span><span class="p">)),</span> <span class="n">index</span><span class="o">=</span><span class="n">rng</span><span class="p">)</span>

<span class="gp">In [354]: </span><span class="n">ts</span>
<span class="gh">Out[354]: </span><span class="go"></span>
<span class="go">2012-01-31   -0.898547</span>
<span class="go">2012-02-29   -1.332247</span>
<span class="go">2012-03-31   -0.741645</span>
<span class="go">2012-04-30    0.094321</span>
<span class="go">2012-05-31   -0.438813</span>
<span class="go">Freq: M, dtype: float64</span>

<span class="gp">In [355]: </span><span class="n">ps</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">to_period</span><span class="p">()</span>

<span class="gp">In [356]: </span><span class="n">ps</span>
<span class="gh">Out[356]: </span><span class="go"></span>
<span class="go">2012-01   -0.898547</span>
<span class="go">2012-02   -1.332247</span>
<span class="go">2012-03   -0.741645</span>
<span class="go">2012-04    0.094321</span>
<span class="go">2012-05   -0.438813</span>
<span class="go">Freq: M, dtype: float64</span>

<span class="gp">In [357]: </span><span class="n">ps</span><span class="o">.</span><span class="n">to_timestamp</span><span class="p">()</span>
<span class="go">                                                                                                                                       Out[357]: </span>
<span class="go">2012-01-01   -0.898547</span>
<span class="go">2012-02-01   -1.332247</span>
<span class="go">2012-03-01   -0.741645</span>
<span class="go">2012-04-01    0.094321</span>
<span class="go">2012-05-01   -0.438813</span>
<span class="go">Freq: MS, dtype: float64</span>
</pre></div>
</div>
<p>Remember that &#8216;s&#8217; and &#8216;e&#8217; can be used to return the timestamps at the start or
end of the period:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [358]: </span><span class="n">ps</span><span class="o">.</span><span class="n">to_timestamp</span><span class="p">(</span><span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">)</span>
<span class="gh">Out[358]: </span><span class="go"></span>
<span class="go">2012-01-01   -0.898547</span>
<span class="go">2012-02-01   -1.332247</span>
<span class="go">2012-03-01   -0.741645</span>
<span class="go">2012-04-01    0.094321</span>
<span class="go">2012-05-01   -0.438813</span>
<span class="go">Freq: MS, dtype: float64</span>
</pre></div>
</div>
<p>Converting between period and timestamp enables some convenient arithmetic
functions to be used. In the following example, we convert a quarterly
frequency with year ending in November to 9am of the end of the month following
the quarter end:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [359]: </span><span class="n">prng</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">period_range</span><span class="p">(</span><span class="s1">&#39;1990Q1&#39;</span><span class="p">,</span> <span class="s1">&#39;2000Q4&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;Q-NOV&#39;</span><span class="p">)</span>

<span class="gp">In [360]: </span><span class="n">ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">prng</span><span class="p">)),</span> <span class="n">prng</span><span class="p">)</span>

<span class="gp">In [361]: </span><span class="n">ts</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="p">(</span><span class="n">prng</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">9</span>

<span class="gp">In [362]: </span><span class="n">ts</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="gh">Out[362]: </span><span class="go"></span>
<span class="go">1990-03-01 09:00   -0.564874</span>
<span class="go">1990-06-01 09:00   -1.426510</span>
<span class="go">1990-09-01 09:00    1.295437</span>
<span class="go">1990-12-01 09:00    1.124017</span>
<span class="go">1991-03-01 09:00    0.840428</span>
<span class="go">Freq: H, dtype: float64</span>
</pre></div>
</div>
</div>
<div class="section" id="representing-out-of-bounds-spans">
<span id="timeseries-oob"></span><h2>Representing Out-of-Bounds Spans<a class="headerlink" href="#representing-out-of-bounds-spans" title="Permalink to this headline">¶</a></h2>
<p>If you have data that is outside of the <code class="docutils literal"><span class="pre">Timestamp</span></code> bounds, see <a class="reference internal" href="#timeseries-timestamp-limits"><span class="std std-ref">Timestamp limitations</span></a>,
then you can use a <code class="docutils literal"><span class="pre">PeriodIndex</span></code> and/or <code class="docutils literal"><span class="pre">Series</span></code> of <code class="docutils literal"><span class="pre">Periods</span></code> to do computations.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [363]: </span><span class="n">span</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">period_range</span><span class="p">(</span><span class="s1">&#39;1215-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;1381-01-01&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">)</span>

<span class="gp">In [364]: </span><span class="n">span</span>
<span class="gh">Out[364]: </span><span class="go"></span>
<span class="go">PeriodIndex([&#39;1215-01-01&#39;, &#39;1215-01-02&#39;, &#39;1215-01-03&#39;, &#39;1215-01-04&#39;,</span>
<span class="go">             &#39;1215-01-05&#39;, &#39;1215-01-06&#39;, &#39;1215-01-07&#39;, &#39;1215-01-08&#39;,</span>
<span class="go">             &#39;1215-01-09&#39;, &#39;1215-01-10&#39;,</span>
<span class="go">             ...</span>
<span class="go">             &#39;1380-12-23&#39;, &#39;1380-12-24&#39;, &#39;1380-12-25&#39;, &#39;1380-12-26&#39;,</span>
<span class="go">             &#39;1380-12-27&#39;, &#39;1380-12-28&#39;, &#39;1380-12-29&#39;, &#39;1380-12-30&#39;,</span>
<span class="go">             &#39;1380-12-31&#39;, &#39;1381-01-01&#39;],</span>
<span class="go">            dtype=&#39;period[D]&#39;, length=60632, freq=&#39;D&#39;)</span>
</pre></div>
</div>
<p>To convert from an <code class="docutils literal"><span class="pre">int64</span></code> based YYYYMMDD representation.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [365]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">20121231</span><span class="p">,</span> <span class="mi">20141130</span><span class="p">,</span> <span class="mi">99991231</span><span class="p">])</span>

<span class="gp">In [366]: </span><span class="n">s</span>
<span class="gh">Out[366]: </span><span class="go"></span>
<span class="go">0    20121231</span>
<span class="go">1    20141130</span>
<span class="go">2    99991231</span>
<span class="go">dtype: int64</span>

<span class="gp">In [367]: </span><span class="k">def</span> <span class="nf">conv</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="gp">   .....: </span>    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="n">year</span> <span class="o">=</span> <span class="n">x</span> <span class="o">//</span> <span class="mi">10000</span><span class="p">,</span> <span class="n">month</span> <span class="o">=</span> <span class="n">x</span><span class="o">//</span><span class="mi">100</span> <span class="o">%</span> <span class="mi">100</span><span class="p">,</span> <span class="n">day</span> <span class="o">=</span> <span class="n">x</span><span class="o">%</span><span class="k">100</span>, freq=&#39;D&#39;)
<span class="gp">   .....: </span>

<span class="gp">In [368]: </span><span class="n">s</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">conv</span><span class="p">)</span>
<span class="gh">Out[368]: </span><span class="go"></span>
<span class="go">0   2012-12-31</span>
<span class="go">1   2014-11-30</span>
<span class="go">2   9999-12-31</span>
<span class="go">dtype: object</span>

<span class="gp">In [369]: </span><span class="n">s</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">conv</span><span class="p">)[</span><span class="mi">2</span><span class="p">]</span>
<span class="go">                                                                      Out[369]: Period(&#39;9999-12-31&#39;, &#39;D&#39;)</span>
</pre></div>
</div>
<p>These can easily be converted to a <code class="docutils literal"><span class="pre">PeriodIndex</span></code></p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [370]: </span><span class="n">span</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">PeriodIndex</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">conv</span><span class="p">))</span>

<span class="gp">In [371]: </span><span class="n">span</span>
<span class="gh">Out[371]: </span><span class="go">PeriodIndex([&#39;2012-12-31&#39;, &#39;2014-11-30&#39;, &#39;9999-12-31&#39;], dtype=&#39;period[D]&#39;, freq=&#39;D&#39;)</span>
</pre></div>
</div>
</div>
<div class="section" id="time-zone-handling">
<span id="timeseries-timezone"></span><h2>Time Zone Handling<a class="headerlink" href="#time-zone-handling" title="Permalink to this headline">¶</a></h2>
<p>Pandas provides rich support for working with timestamps in different time
zones using <code class="docutils literal"><span class="pre">pytz</span></code> and <code class="docutils literal"><span class="pre">dateutil</span></code> libraries. <code class="docutils literal"><span class="pre">dateutil</span></code> currently is only
supported for fixed offset and tzfile zones. The default library is <code class="docutils literal"><span class="pre">pytz</span></code>.
Support for <code class="docutils literal"><span class="pre">dateutil</span></code> is provided for compatibility with other
applications e.g. if you use <code class="docutils literal"><span class="pre">dateutil</span></code> in other python packages.</p>
<div class="section" id="working-with-time-zones">
<h3>Working with Time Zones<a class="headerlink" href="#working-with-time-zones" title="Permalink to this headline">¶</a></h3>
<p>By default, pandas objects are time zone unaware:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [372]: </span><span class="n">rng</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;3/6/2012 00:00&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">)</span>

<span class="gp">In [373]: </span><span class="n">rng</span><span class="o">.</span><span class="n">tz</span> <span class="ow">is</span> <span class="bp">None</span>
<span class="gh">Out[373]: </span><span class="go">True</span>
</pre></div>
</div>
<p>To supply the time zone, you can use the <code class="docutils literal"><span class="pre">tz</span></code> keyword to <code class="docutils literal"><span class="pre">date_range</span></code> and
other functions. Dateutil time zone strings are distinguished from <code class="docutils literal"><span class="pre">pytz</span></code>
time zones by starting with <code class="docutils literal"><span class="pre">dateutil/</span></code>.</p>
<ul class="simple">
<li>In <code class="docutils literal"><span class="pre">pytz</span></code> you can find a list of common (and less common) time zones using
<code class="docutils literal"><span class="pre">from</span> <span class="pre">pytz</span> <span class="pre">import</span> <span class="pre">common_timezones,</span> <span class="pre">all_timezones</span></code>.</li>
<li><code class="docutils literal"><span class="pre">dateutil</span></code> uses the OS timezones so there isn&#8217;t a fixed list available. For
common zones, the names are the same as <code class="docutils literal"><span class="pre">pytz</span></code>.</li>
</ul>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="go"># pytz</span>
<span class="gp">In [374]: </span><span class="n">rng_pytz</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;3/6/2012 00:00&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">,</span>
<span class="gp">   .....: </span>                         <span class="n">tz</span><span class="o">=</span><span class="s1">&#39;Europe/London&#39;</span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [375]: </span><span class="n">rng_pytz</span><span class="o">.</span><span class="n">tz</span>
<span class="gh">Out[375]: </span><span class="go">&lt;DstTzInfo &#39;Europe/London&#39; LMT-1 day, 23:59:00 STD&gt;</span>

<span class="go"># dateutil</span>
<span class="gp">In [376]: </span><span class="n">rng_dateutil</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;3/6/2012 00:00&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">,</span>
<span class="gp">   .....: </span>                             <span class="n">tz</span><span class="o">=</span><span class="s1">&#39;dateutil/Europe/London&#39;</span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [377]: </span><span class="n">rng_dateutil</span><span class="o">.</span><span class="n">tz</span>
<span class="gh">Out[377]: </span><span class="go">tzfile(&#39;/usr/share/zoneinfo/Europe/London&#39;)</span>

<span class="go"># dateutil - utc special case</span>
<span class="gp">In [378]: </span><span class="n">rng_utc</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;3/6/2012 00:00&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">,</span>
<span class="gp">   .....: </span>                        <span class="n">tz</span><span class="o">=</span><span class="n">dateutil</span><span class="o">.</span><span class="n">tz</span><span class="o">.</span><span class="n">tzutc</span><span class="p">())</span>
<span class="gp">   .....: </span>

<span class="gp">In [379]: </span><span class="n">rng_utc</span><span class="o">.</span><span class="n">tz</span>
<span class="gh">Out[379]: </span><span class="go">tzutc()</span>
</pre></div>
</div>
<p>Note that the <code class="docutils literal"><span class="pre">UTC</span></code> timezone is a special case in <code class="docutils literal"><span class="pre">dateutil</span></code> and should be constructed explicitly
as an instance of <code class="docutils literal"><span class="pre">dateutil.tz.tzutc</span></code>. You can also construct other timezones explicitly first,
which gives you more control over which time zone is used:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="go"># pytz</span>
<span class="gp">In [380]: </span><span class="n">tz_pytz</span> <span class="o">=</span> <span class="n">pytz</span><span class="o">.</span><span class="n">timezone</span><span class="p">(</span><span class="s1">&#39;Europe/London&#39;</span><span class="p">)</span>

<span class="gp">In [381]: </span><span class="n">rng_pytz</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;3/6/2012 00:00&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">,</span>
<span class="gp">   .....: </span>                         <span class="n">tz</span><span class="o">=</span><span class="n">tz_pytz</span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [382]: </span><span class="n">rng_pytz</span><span class="o">.</span><span class="n">tz</span> <span class="o">==</span> <span class="n">tz_pytz</span>
<span class="gh">Out[382]: </span><span class="go">True</span>

<span class="go"># dateutil</span>
<span class="gp">In [383]: </span><span class="n">tz_dateutil</span> <span class="o">=</span> <span class="n">dateutil</span><span class="o">.</span><span class="n">tz</span><span class="o">.</span><span class="n">gettz</span><span class="p">(</span><span class="s1">&#39;Europe/London&#39;</span><span class="p">)</span>

<span class="gp">In [384]: </span><span class="n">rng_dateutil</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;3/6/2012 00:00&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">,</span>
<span class="gp">   .....: </span>                             <span class="n">tz</span><span class="o">=</span><span class="n">tz_dateutil</span><span class="p">)</span>
<span class="gp">   .....: </span>

<span class="gp">In [385]: </span><span class="n">rng_dateutil</span><span class="o">.</span><span class="n">tz</span> <span class="o">==</span> <span class="n">tz_dateutil</span>
<span class="gh">Out[385]: </span><span class="go">True</span>
</pre></div>
</div>
<p>Timestamps, like Python&#8217;s <code class="docutils literal"><span class="pre">datetime.datetime</span></code> object can be either time zone
naive or time zone aware. Naive time series and <code class="docutils literal"><span class="pre">DatetimeIndex</span></code> objects can be
<em>localized</em> using <code class="docutils literal"><span class="pre">tz_localize</span></code>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [386]: </span><span class="n">ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">rng</span><span class="p">)),</span> <span class="n">rng</span><span class="p">)</span>

<span class="gp">In [387]: </span><span class="n">ts_utc</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="s1">&#39;UTC&#39;</span><span class="p">)</span>

<span class="gp">In [388]: </span><span class="n">ts_utc</span>
<span class="gh">Out[388]: </span><span class="go"></span>
<span class="go">2012-03-06 00:00:00+00:00    0.037206</span>
<span class="go">2012-03-07 00:00:00+00:00    2.313998</span>
<span class="go">2012-03-08 00:00:00+00:00    1.458296</span>
<span class="go">2012-03-09 00:00:00+00:00   -0.620431</span>
<span class="go">2012-03-10 00:00:00+00:00   -0.000111</span>
<span class="go">2012-03-11 00:00:00+00:00   -0.342783</span>
<span class="go">2012-03-12 00:00:00+00:00   -0.664322</span>
<span class="go">2012-03-13 00:00:00+00:00    0.654814</span>
<span class="go">2012-03-14 00:00:00+00:00    1.550680</span>
<span class="go">2012-03-15 00:00:00+00:00    0.174511</span>
<span class="go">2012-03-16 00:00:00+00:00    1.360491</span>
<span class="go">2012-03-17 00:00:00+00:00    0.799737</span>
<span class="go">2012-03-18 00:00:00+00:00    0.449149</span>
<span class="go">2012-03-19 00:00:00+00:00    0.111346</span>
<span class="go">2012-03-20 00:00:00+00:00   -0.435531</span>
<span class="go">Freq: D, dtype: float64</span>
</pre></div>
</div>
<p>Again, you can explicitly construct the timezone object first.
You can use the <code class="docutils literal"><span class="pre">tz_convert</span></code> method to convert pandas objects to convert
tz-aware data to another time zone:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [389]: </span><span class="n">ts_utc</span><span class="o">.</span><span class="n">tz_convert</span><span class="p">(</span><span class="s1">&#39;US/Eastern&#39;</span><span class="p">)</span>
<span class="gh">Out[389]: </span><span class="go"></span>
<span class="go">2012-03-05 19:00:00-05:00    0.037206</span>
<span class="go">2012-03-06 19:00:00-05:00    2.313998</span>
<span class="go">2012-03-07 19:00:00-05:00    1.458296</span>
<span class="go">2012-03-08 19:00:00-05:00   -0.620431</span>
<span class="go">2012-03-09 19:00:00-05:00   -0.000111</span>
<span class="go">2012-03-10 19:00:00-05:00   -0.342783</span>
<span class="go">2012-03-11 20:00:00-04:00   -0.664322</span>
<span class="go">2012-03-12 20:00:00-04:00    0.654814</span>
<span class="go">2012-03-13 20:00:00-04:00    1.550680</span>
<span class="go">2012-03-14 20:00:00-04:00    0.174511</span>
<span class="go">2012-03-15 20:00:00-04:00    1.360491</span>
<span class="go">2012-03-16 20:00:00-04:00    0.799737</span>
<span class="go">2012-03-17 20:00:00-04:00    0.449149</span>
<span class="go">2012-03-18 20:00:00-04:00    0.111346</span>
<span class="go">2012-03-19 20:00:00-04:00   -0.435531</span>
<span class="go">Freq: D, dtype: float64</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Be wary of conversions between libraries. For some zones <code class="docutils literal"><span class="pre">pytz</span></code> and <code class="docutils literal"><span class="pre">dateutil</span></code> have different
definitions of the zone. This is more of a problem for unusual timezones than for
&#8216;standard&#8217; zones like <code class="docutils literal"><span class="pre">US/Eastern</span></code>.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Be aware that a timezone definition across versions of timezone libraries may not
be considered equal.  This may cause problems when working with stored data that
is localized using one version and operated on with a different version.
See <a class="reference internal" href="io.html#io-hdf5-notes"><span class="std std-ref">here</span></a> for how to handle such a situation.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">It is incorrect to pass a timezone directly into the <code class="docutils literal"><span class="pre">datetime.datetime</span></code> constructor (e.g.,
<code class="docutils literal"><span class="pre">datetime.datetime(2011,</span> <span class="pre">1,</span> <span class="pre">1,</span> <span class="pre">tz=timezone('US/Eastern'))</span></code>.  Instead, the datetime
needs to be localized using the the localize method on the timezone.</p>
</div>
<p>Under the hood, all timestamps are stored in UTC. Scalar values from a
<code class="docutils literal"><span class="pre">DatetimeIndex</span></code> with a time zone will have their fields (day, hour, minute)
localized to the time zone. However, timestamps with the same UTC value are
still considered to be equal even if they are in different time zones:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [390]: </span><span class="n">rng_eastern</span> <span class="o">=</span> <span class="n">rng_utc</span><span class="o">.</span><span class="n">tz_convert</span><span class="p">(</span><span class="s1">&#39;US/Eastern&#39;</span><span class="p">)</span>

<span class="gp">In [391]: </span><span class="n">rng_berlin</span> <span class="o">=</span> <span class="n">rng_utc</span><span class="o">.</span><span class="n">tz_convert</span><span class="p">(</span><span class="s1">&#39;Europe/Berlin&#39;</span><span class="p">)</span>

<span class="gp">In [392]: </span><span class="n">rng_eastern</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
<span class="gh">Out[392]: </span><span class="go">Timestamp(&#39;2012-03-10 19:00:00-0500&#39;, tz=&#39;US/Eastern&#39;, freq=&#39;D&#39;)</span>

<span class="gp">In [393]: </span><span class="n">rng_berlin</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
<span class="go">                                                                           Out[393]: Timestamp(&#39;2012-03-11 01:00:00+0100&#39;, tz=&#39;Europe/Berlin&#39;, freq=&#39;D&#39;)</span>

<span class="gp">In [394]: </span><span class="n">rng_eastern</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">==</span> <span class="n">rng_berlin</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
<span class="go">                                                                                                                                                         Out[394]: True</span>
</pre></div>
</div>
<p>Like <code class="docutils literal"><span class="pre">Series</span></code>, <code class="docutils literal"><span class="pre">DataFrame</span></code>, and <code class="docutils literal"><span class="pre">DatetimeIndex</span></code>, <code class="docutils literal"><span class="pre">Timestamp``s</span> <span class="pre">can</span> <span class="pre">be</span> <span class="pre">converted</span> <span class="pre">to</span> <span class="pre">other</span>
<span class="pre">time</span> <span class="pre">zones</span> <span class="pre">using</span> <span class="pre">``tz_convert</span></code>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [395]: </span><span class="n">rng_eastern</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
<span class="gh">Out[395]: </span><span class="go">Timestamp(&#39;2012-03-10 19:00:00-0500&#39;, tz=&#39;US/Eastern&#39;, freq=&#39;D&#39;)</span>

<span class="gp">In [396]: </span><span class="n">rng_berlin</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
<span class="go">                                                                           Out[396]: Timestamp(&#39;2012-03-11 01:00:00+0100&#39;, tz=&#39;Europe/Berlin&#39;, freq=&#39;D&#39;)</span>

<span class="gp">In [397]: </span><span class="n">rng_eastern</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">tz_convert</span><span class="p">(</span><span class="s1">&#39;Europe/Berlin&#39;</span><span class="p">)</span>
<span class="go">                                                                                                                                                         Out[397]: Timestamp(&#39;2012-03-11 01:00:00+0100&#39;, tz=&#39;Europe/Berlin&#39;)</span>
</pre></div>
</div>
<p>Localization of <code class="docutils literal"><span class="pre">Timestamp</span></code> functions just like <code class="docutils literal"><span class="pre">DatetimeIndex</span></code> and <code class="docutils literal"><span class="pre">Series</span></code>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [398]: </span><span class="n">rng</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
<span class="gh">Out[398]: </span><span class="go">Timestamp(&#39;2012-03-11 00:00:00&#39;, freq=&#39;D&#39;)</span>

<span class="gp">In [399]: </span><span class="n">rng</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="s1">&#39;Asia/Shanghai&#39;</span><span class="p">)</span>
<span class="go">                                                     Out[399]: Timestamp(&#39;2012-03-11 00:00:00+0800&#39;, tz=&#39;Asia/Shanghai&#39;)</span>
</pre></div>
</div>
<p>Operations between <code class="docutils literal"><span class="pre">Series</span></code> in different time zones will yield UTC
<code class="docutils literal"><span class="pre">Series</span></code>, aligning the data on the UTC timestamps:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [400]: </span><span class="n">eastern</span> <span class="o">=</span> <span class="n">ts_utc</span><span class="o">.</span><span class="n">tz_convert</span><span class="p">(</span><span class="s1">&#39;US/Eastern&#39;</span><span class="p">)</span>

<span class="gp">In [401]: </span><span class="n">berlin</span> <span class="o">=</span> <span class="n">ts_utc</span><span class="o">.</span><span class="n">tz_convert</span><span class="p">(</span><span class="s1">&#39;Europe/Berlin&#39;</span><span class="p">)</span>

<span class="gp">In [402]: </span><span class="n">result</span> <span class="o">=</span> <span class="n">eastern</span> <span class="o">+</span> <span class="n">berlin</span>

<span class="gp">In [403]: </span><span class="n">result</span>
<span class="gh">Out[403]: </span><span class="go"></span>
<span class="go">2012-03-06 00:00:00+00:00    0.074412</span>
<span class="go">2012-03-07 00:00:00+00:00    4.627997</span>
<span class="go">2012-03-08 00:00:00+00:00    2.916592</span>
<span class="go">2012-03-09 00:00:00+00:00   -1.240863</span>
<span class="go">2012-03-10 00:00:00+00:00   -0.000221</span>
<span class="go">2012-03-11 00:00:00+00:00   -0.685566</span>
<span class="go">2012-03-12 00:00:00+00:00   -1.328643</span>
<span class="go">2012-03-13 00:00:00+00:00    1.309628</span>
<span class="go">2012-03-14 00:00:00+00:00    3.101359</span>
<span class="go">2012-03-15 00:00:00+00:00    0.349022</span>
<span class="go">2012-03-16 00:00:00+00:00    2.720983</span>
<span class="go">2012-03-17 00:00:00+00:00    1.599475</span>
<span class="go">2012-03-18 00:00:00+00:00    0.898297</span>
<span class="go">2012-03-19 00:00:00+00:00    0.222691</span>
<span class="go">2012-03-20 00:00:00+00:00   -0.871062</span>
<span class="go">Freq: D, dtype: float64</span>

<span class="gp">In [404]: </span><span class="n">result</span><span class="o">.</span><span class="n">index</span>
<span class="go">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             Out[404]: </span>
<span class="go">DatetimeIndex([&#39;2012-03-06&#39;, &#39;2012-03-07&#39;, &#39;2012-03-08&#39;, &#39;2012-03-09&#39;,</span>
<span class="go">               &#39;2012-03-10&#39;, &#39;2012-03-11&#39;, &#39;2012-03-12&#39;, &#39;2012-03-13&#39;,</span>
<span class="go">               &#39;2012-03-14&#39;, &#39;2012-03-15&#39;, &#39;2012-03-16&#39;, &#39;2012-03-17&#39;,</span>
<span class="go">               &#39;2012-03-18&#39;, &#39;2012-03-19&#39;, &#39;2012-03-20&#39;],</span>
<span class="go">              dtype=&#39;datetime64[ns, UTC]&#39;, freq=&#39;D&#39;)</span>
</pre></div>
</div>
<p>To remove timezone from tz-aware <code class="docutils literal"><span class="pre">DatetimeIndex</span></code>, use <code class="docutils literal"><span class="pre">tz_localize(None)</span></code> or <code class="docutils literal"><span class="pre">tz_convert(None)</span></code>.
<code class="docutils literal"><span class="pre">tz_localize(None)</span></code> will remove timezone holding local time representations.
<code class="docutils literal"><span class="pre">tz_convert(None)</span></code> will remove timezone after converting to UTC time.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [405]: </span><span class="n">didx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s1">&#39;2014-08-01 09:00&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">&#39;US/Eastern&#39;</span><span class="p">)</span>

<span class="gp">In [406]: </span><span class="n">didx</span>
<span class="gh">Out[406]: </span><span class="go"></span>
<span class="go">DatetimeIndex([&#39;2014-08-01 09:00:00-04:00&#39;, &#39;2014-08-01 10:00:00-04:00&#39;,</span>
<span class="go">               &#39;2014-08-01 11:00:00-04:00&#39;, &#39;2014-08-01 12:00:00-04:00&#39;,</span>
<span class="go">               &#39;2014-08-01 13:00:00-04:00&#39;, &#39;2014-08-01 14:00:00-04:00&#39;,</span>
<span class="go">               &#39;2014-08-01 15:00:00-04:00&#39;, &#39;2014-08-01 16:00:00-04:00&#39;,</span>
<span class="go">               &#39;2014-08-01 17:00:00-04:00&#39;, &#39;2014-08-01 18:00:00-04:00&#39;],</span>
<span class="go">              dtype=&#39;datetime64[ns, US/Eastern]&#39;, freq=&#39;H&#39;)</span>

<span class="gp">In [407]: </span><span class="n">didx</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
<span class="go">                                                                                                                                                                                                                                                                                                                                                                                                                                                     Out[407]: </span>
<span class="go">DatetimeIndex([&#39;2014-08-01 09:00:00&#39;, &#39;2014-08-01 10:00:00&#39;,</span>
<span class="go">               &#39;2014-08-01 11:00:00&#39;, &#39;2014-08-01 12:00:00&#39;,</span>
<span class="go">               &#39;2014-08-01 13:00:00&#39;, &#39;2014-08-01 14:00:00&#39;,</span>
<span class="go">               &#39;2014-08-01 15:00:00&#39;, &#39;2014-08-01 16:00:00&#39;,</span>
<span class="go">               &#39;2014-08-01 17:00:00&#39;, &#39;2014-08-01 18:00:00&#39;],</span>
<span class="go">              dtype=&#39;datetime64[ns]&#39;, freq=&#39;H&#39;)</span>

<span class="gp">In [408]: </span><span class="n">didx</span><span class="o">.</span><span class="n">tz_convert</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
<span class="go">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  Out[408]: </span>
<span class="go">DatetimeIndex([&#39;2014-08-01 13:00:00&#39;, &#39;2014-08-01 14:00:00&#39;,</span>
<span class="go">               &#39;2014-08-01 15:00:00&#39;, &#39;2014-08-01 16:00:00&#39;,</span>
<span class="go">               &#39;2014-08-01 17:00:00&#39;, &#39;2014-08-01 18:00:00&#39;,</span>
<span class="go">               &#39;2014-08-01 19:00:00&#39;, &#39;2014-08-01 20:00:00&#39;,</span>
<span class="go">               &#39;2014-08-01 21:00:00&#39;, &#39;2014-08-01 22:00:00&#39;],</span>
<span class="go">              dtype=&#39;datetime64[ns]&#39;, freq=&#39;H&#39;)</span>

<span class="go"># tz_convert(None) is identical with tz_convert(&#39;UTC&#39;).tz_localize(None)</span>
<span class="gp">In [409]: </span><span class="n">didx</span><span class="o">.</span><span class="n">tz_convert</span><span class="p">(</span><span class="s1">&#39;UCT&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
<span class="go">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               Out[409]: </span>
<span class="go">DatetimeIndex([&#39;2014-08-01 13:00:00&#39;, &#39;2014-08-01 14:00:00&#39;,</span>
<span class="go">               &#39;2014-08-01 15:00:00&#39;, &#39;2014-08-01 16:00:00&#39;,</span>
<span class="go">               &#39;2014-08-01 17:00:00&#39;, &#39;2014-08-01 18:00:00&#39;,</span>
<span class="go">               &#39;2014-08-01 19:00:00&#39;, &#39;2014-08-01 20:00:00&#39;,</span>
<span class="go">               &#39;2014-08-01 21:00:00&#39;, &#39;2014-08-01 22:00:00&#39;],</span>
<span class="go">              dtype=&#39;datetime64[ns]&#39;, freq=&#39;H&#39;)</span>
</pre></div>
</div>
</div>
<div class="section" id="ambiguous-times-when-localizing">
<span id="timeseries-timezone-ambiguous"></span><h3>Ambiguous Times when Localizing<a class="headerlink" href="#ambiguous-times-when-localizing" title="Permalink to this headline">¶</a></h3>
<p>In some cases, localize cannot determine the DST and non-DST hours when there are
duplicates.  This often happens when reading files or database records that simply
duplicate the hours.  Passing <code class="docutils literal"><span class="pre">ambiguous='infer'</span></code> (<code class="docutils literal"><span class="pre">infer_dst</span></code> argument in prior
releases) into <code class="docutils literal"><span class="pre">tz_localize</span></code> will attempt to determine the right offset.  Below
the top example will fail as it contains ambiguous times and the bottom will
infer the right offset.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [410]: </span><span class="n">rng_hourly</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span><span class="p">([</span><span class="s1">&#39;11/06/2011 00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;11/06/2011 01:00&#39;</span><span class="p">,</span>
<span class="gp">   .....: </span>                               <span class="s1">&#39;11/06/2011 01:00&#39;</span><span class="p">,</span> <span class="s1">&#39;11/06/2011 02:00&#39;</span><span class="p">,</span>
<span class="gp">   .....: </span>                               <span class="s1">&#39;11/06/2011 03:00&#39;</span><span class="p">])</span>
<span class="gp">   .....: </span>
</pre></div>
</div>
<p>This will fail as there are ambiguous times</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="n">rng_hourly</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="s1">&#39;US/Eastern&#39;</span><span class="p">)</span>
<span class="go">AmbiguousTimeError: Cannot infer dst time from Timestamp(&#39;2011-11-06 01:00:00&#39;), try using the &#39;ambiguous&#39; argument</span>
</pre></div>
</div>
<p>Infer the ambiguous times</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [411]: </span><span class="n">rng_hourly_eastern</span> <span class="o">=</span> <span class="n">rng_hourly</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="s1">&#39;US/Eastern&#39;</span><span class="p">,</span> <span class="n">ambiguous</span><span class="o">=</span><span class="s1">&#39;infer&#39;</span><span class="p">)</span>

<span class="gp">In [412]: </span><span class="n">rng_hourly_eastern</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="gh">Out[412]: </span><span class="go"></span>
<span class="go">[Timestamp(&#39;2011-11-06 00:00:00-0400&#39;, tz=&#39;US/Eastern&#39;),</span>
<span class="go"> Timestamp(&#39;2011-11-06 01:00:00-0400&#39;, tz=&#39;US/Eastern&#39;),</span>
<span class="go"> Timestamp(&#39;2011-11-06 01:00:00-0500&#39;, tz=&#39;US/Eastern&#39;),</span>
<span class="go"> Timestamp(&#39;2011-11-06 02:00:00-0500&#39;, tz=&#39;US/Eastern&#39;),</span>
<span class="go"> Timestamp(&#39;2011-11-06 03:00:00-0500&#39;, tz=&#39;US/Eastern&#39;)]</span>
</pre></div>
</div>
<p>In addition to &#8216;infer&#8217;, there are several other arguments supported.  Passing
an array-like of bools or 0s/1s where True represents a DST hour and False a
non-DST hour, allows for distinguishing more than one DST
transition (e.g., if you have multiple records in a database each with their
own DST transition).  Or passing &#8216;NaT&#8217; will fill in transition times
with not-a-time values.  These methods are available in the <code class="docutils literal"><span class="pre">DatetimeIndex</span></code>
constructor as well as <code class="docutils literal"><span class="pre">tz_localize</span></code>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [413]: </span><span class="n">rng_hourly_dst</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>

<span class="gp">In [414]: </span><span class="n">rng_hourly</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="s1">&#39;US/Eastern&#39;</span><span class="p">,</span> <span class="n">ambiguous</span><span class="o">=</span><span class="n">rng_hourly_dst</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="gh">Out[414]: </span><span class="go"></span>
<span class="go">[Timestamp(&#39;2011-11-06 00:00:00-0400&#39;, tz=&#39;US/Eastern&#39;),</span>
<span class="go"> Timestamp(&#39;2011-11-06 01:00:00-0400&#39;, tz=&#39;US/Eastern&#39;),</span>
<span class="go"> Timestamp(&#39;2011-11-06 01:00:00-0500&#39;, tz=&#39;US/Eastern&#39;),</span>
<span class="go"> Timestamp(&#39;2011-11-06 02:00:00-0500&#39;, tz=&#39;US/Eastern&#39;),</span>
<span class="go"> Timestamp(&#39;2011-11-06 03:00:00-0500&#39;, tz=&#39;US/Eastern&#39;)]</span>

<span class="gp">In [415]: </span><span class="n">rng_hourly</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="s1">&#39;US/Eastern&#39;</span><span class="p">,</span> <span class="n">ambiguous</span><span class="o">=</span><span class="s1">&#39;NaT&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="go">                                                                                                                                                                                                                                                                                                        Out[415]: </span>
<span class="go">[Timestamp(&#39;2011-11-06 00:00:00-0400&#39;, tz=&#39;US/Eastern&#39;),</span>
<span class="go"> NaT,</span>
<span class="go"> NaT,</span>
<span class="go"> Timestamp(&#39;2011-11-06 02:00:00-0500&#39;, tz=&#39;US/Eastern&#39;),</span>
<span class="go"> Timestamp(&#39;2011-11-06 03:00:00-0500&#39;, tz=&#39;US/Eastern&#39;)]</span>

<span class="gp">In [416]: </span><span class="n">didx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s1">&#39;2014-08-01 09:00&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">&#39;US/Eastern&#39;</span><span class="p">)</span>

<span class="gp">In [417]: </span><span class="n">didx</span>
<span class="gh">Out[417]: </span><span class="go"></span>
<span class="go">DatetimeIndex([&#39;2014-08-01 09:00:00-04:00&#39;, &#39;2014-08-01 10:00:00-04:00&#39;,</span>
<span class="go">               &#39;2014-08-01 11:00:00-04:00&#39;, &#39;2014-08-01 12:00:00-04:00&#39;,</span>
<span class="go">               &#39;2014-08-01 13:00:00-04:00&#39;, &#39;2014-08-01 14:00:00-04:00&#39;,</span>
<span class="go">               &#39;2014-08-01 15:00:00-04:00&#39;, &#39;2014-08-01 16:00:00-04:00&#39;,</span>
<span class="go">               &#39;2014-08-01 17:00:00-04:00&#39;, &#39;2014-08-01 18:00:00-04:00&#39;],</span>
<span class="go">              dtype=&#39;datetime64[ns, US/Eastern]&#39;, freq=&#39;H&#39;)</span>

<span class="gp">In [418]: </span><span class="n">didx</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
<span class="go">                                                                                                                                                                                                                                                                                                                                                                                                                                                     Out[418]: </span>
<span class="go">DatetimeIndex([&#39;2014-08-01 09:00:00&#39;, &#39;2014-08-01 10:00:00&#39;,</span>
<span class="go">               &#39;2014-08-01 11:00:00&#39;, &#39;2014-08-01 12:00:00&#39;,</span>
<span class="go">               &#39;2014-08-01 13:00:00&#39;, &#39;2014-08-01 14:00:00&#39;,</span>
<span class="go">               &#39;2014-08-01 15:00:00&#39;, &#39;2014-08-01 16:00:00&#39;,</span>
<span class="go">               &#39;2014-08-01 17:00:00&#39;, &#39;2014-08-01 18:00:00&#39;],</span>
<span class="go">              dtype=&#39;datetime64[ns]&#39;, freq=&#39;H&#39;)</span>

<span class="gp">In [419]: </span><span class="n">didx</span><span class="o">.</span><span class="n">tz_convert</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
<span class="go">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  Out[419]: </span>
<span class="go">DatetimeIndex([&#39;2014-08-01 13:00:00&#39;, &#39;2014-08-01 14:00:00&#39;,</span>
<span class="go">               &#39;2014-08-01 15:00:00&#39;, &#39;2014-08-01 16:00:00&#39;,</span>
<span class="go">               &#39;2014-08-01 17:00:00&#39;, &#39;2014-08-01 18:00:00&#39;,</span>
<span class="go">               &#39;2014-08-01 19:00:00&#39;, &#39;2014-08-01 20:00:00&#39;,</span>
<span class="go">               &#39;2014-08-01 21:00:00&#39;, &#39;2014-08-01 22:00:00&#39;],</span>
<span class="go">              dtype=&#39;datetime64[ns]&#39;, freq=&#39;H&#39;)</span>

<span class="go"># tz_convert(None) is identical with tz_convert(&#39;UTC&#39;).tz_localize(None)</span>
<span class="gp">In [420]: </span><span class="n">didx</span><span class="o">.</span><span class="n">tz_convert</span><span class="p">(</span><span class="s1">&#39;UCT&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
<span class="go">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               Out[420]: </span>
<span class="go">DatetimeIndex([&#39;2014-08-01 13:00:00&#39;, &#39;2014-08-01 14:00:00&#39;,</span>
<span class="go">               &#39;2014-08-01 15:00:00&#39;, &#39;2014-08-01 16:00:00&#39;,</span>
<span class="go">               &#39;2014-08-01 17:00:00&#39;, &#39;2014-08-01 18:00:00&#39;,</span>
<span class="go">               &#39;2014-08-01 19:00:00&#39;, &#39;2014-08-01 20:00:00&#39;,</span>
<span class="go">               &#39;2014-08-01 21:00:00&#39;, &#39;2014-08-01 22:00:00&#39;],</span>
<span class="go">              dtype=&#39;datetime64[ns]&#39;, freq=&#39;H&#39;)</span>
</pre></div>
</div>
</div>
<div class="section" id="tz-aware-dtypes">
<span id="timeseries-timezone-series"></span><h3>TZ Aware Dtypes<a class="headerlink" href="#tz-aware-dtypes" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.17.0.</span></p>
</div>
<p><code class="docutils literal"><span class="pre">Series/DatetimeIndex</span></code> with a timezone <strong>naive</strong> value are represented with a dtype of <code class="docutils literal"><span class="pre">datetime64[ns]</span></code>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [421]: </span><span class="n">s_naive</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;20130101&#39;</span><span class="p">,</span><span class="n">periods</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>

<span class="gp">In [422]: </span><span class="n">s_naive</span>
<span class="gh">Out[422]: </span><span class="go"></span>
<span class="go">0   2013-01-01</span>
<span class="go">1   2013-01-02</span>
<span class="go">2   2013-01-03</span>
<span class="go">dtype: datetime64[ns]</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">Series/DatetimeIndex</span></code> with a timezone <strong>aware</strong> value are represented with a dtype of <code class="docutils literal"><span class="pre">datetime64[ns,</span> <span class="pre">tz]</span></code>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [423]: </span><span class="n">s_aware</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;20130101&#39;</span><span class="p">,</span><span class="n">periods</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">tz</span><span class="o">=</span><span class="s1">&#39;US/Eastern&#39;</span><span class="p">))</span>

<span class="gp">In [424]: </span><span class="n">s_aware</span>
<span class="gh">Out[424]: </span><span class="go"></span>
<span class="go">0   2013-01-01 00:00:00-05:00</span>
<span class="go">1   2013-01-02 00:00:00-05:00</span>
<span class="go">2   2013-01-03 00:00:00-05:00</span>
<span class="go">dtype: datetime64[ns, US/Eastern]</span>
</pre></div>
</div>
<p>Both of these <code class="docutils literal"><span class="pre">Series</span></code> can be manipulated via the <code class="docutils literal"><span class="pre">.dt</span></code> accessor, see <a class="reference internal" href="basics.html#basics-dt-accessors"><span class="std std-ref">here</span></a>.</p>
<p>For example, to localize and convert a naive stamp to timezone aware.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [425]: </span><span class="n">s_naive</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="s1">&#39;UTC&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">tz_convert</span><span class="p">(</span><span class="s1">&#39;US/Eastern&#39;</span><span class="p">)</span>
<span class="gh">Out[425]: </span><span class="go"></span>
<span class="go">0   2012-12-31 19:00:00-05:00</span>
<span class="go">1   2013-01-01 19:00:00-05:00</span>
<span class="go">2   2013-01-02 19:00:00-05:00</span>
<span class="go">dtype: datetime64[ns, US/Eastern]</span>
</pre></div>
</div>
<p>Further more you can <code class="docutils literal"><span class="pre">.astype(...)</span></code> timezone aware (and naive). This operation is effectively a localize AND convert on a naive stamp, and
a convert on an aware stamp.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="go"># localize and convert a naive timezone</span>
<span class="gp">In [426]: </span><span class="n">s_naive</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;datetime64[ns, US/Eastern]&#39;</span><span class="p">)</span>
<span class="gh">Out[426]: </span><span class="go"></span>
<span class="go">0   2012-12-31 19:00:00-05:00</span>
<span class="go">1   2013-01-01 19:00:00-05:00</span>
<span class="go">2   2013-01-02 19:00:00-05:00</span>
<span class="go">dtype: datetime64[ns, US/Eastern]</span>

<span class="go"># make an aware tz naive</span>
<span class="gp">In [427]: </span><span class="n">s_aware</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;datetime64[ns]&#39;</span><span class="p">)</span>
<span class="go">                                                                                                                                       Out[427]: </span>
<span class="go">0   2013-01-01 05:00:00</span>
<span class="go">1   2013-01-02 05:00:00</span>
<span class="go">2   2013-01-03 05:00:00</span>
<span class="go">dtype: datetime64[ns]</span>

<span class="go"># convert to a new timezone</span>
<span class="gp">In [428]: </span><span class="n">s_aware</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;datetime64[ns, CET]&#39;</span><span class="p">)</span>
<span class="go">                                                                                                                                                                                                                                                Out[428]: </span>
<span class="go">0   2013-01-01 06:00:00+01:00</span>
<span class="go">1   2013-01-02 06:00:00+01:00</span>
<span class="go">2   2013-01-03 06:00:00+01:00</span>
<span class="go">dtype: datetime64[ns, CET]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Using the <code class="docutils literal"><span class="pre">.values</span></code> accessor on a <code class="docutils literal"><span class="pre">Series</span></code>, returns an numpy array of the data.
These values are converted to UTC, as numpy does not currently support timezones (even though it is <em>printing</em> in the local timezone!).</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [429]: </span><span class="n">s_naive</span><span class="o">.</span><span class="n">values</span>
<span class="gh">Out[429]: </span><span class="go"></span>
<span class="go">array([&#39;2013-01-01T00:00:00.000000000&#39;, &#39;2013-01-02T00:00:00.000000000&#39;,</span>
<span class="go">       &#39;2013-01-03T00:00:00.000000000&#39;], dtype=&#39;datetime64[ns]&#39;)</span>

<span class="gp">In [430]: </span><span class="n">s_aware</span><span class="o">.</span><span class="n">values</span>
<span class="go">                                                                                                                                                     Out[430]: </span>
<span class="go">array([&#39;2013-01-01T05:00:00.000000000&#39;, &#39;2013-01-02T05:00:00.000000000&#39;,</span>
<span class="go">       &#39;2013-01-03T05:00:00.000000000&#39;], dtype=&#39;datetime64[ns]&#39;)</span>
</pre></div>
</div>
<p>Further note that once converted to a numpy array these would lose the tz tenor.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [431]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">s_aware</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<span class="gh">Out[431]: </span><span class="go"></span>
<span class="go">0   2013-01-01 05:00:00</span>
<span class="go">1   2013-01-02 05:00:00</span>
<span class="go">2   2013-01-03 05:00:00</span>
<span class="go">dtype: datetime64[ns]</span>
</pre></div>
</div>
<p>However, these can be easily converted</p>
<div class="last highlight-ipython"><div class="highlight"><pre><span></span><span class="gp">In [432]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">s_aware</span><span class="o">.</span><span class="n">values</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="s1">&#39;UTC&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">tz_convert</span><span class="p">(</span><span class="s1">&#39;US/Eastern&#39;</span><span class="p">)</span>
<span class="gh">Out[432]: </span><span class="go"></span>
<span class="go">0   2013-01-01 00:00:00-05:00</span>
<span class="go">1   2013-01-02 00:00:00-05:00</span>
<span class="go">2   2013-01-03 00:00:00-05:00</span>
<span class="go">dtype: datetime64[ns, US/Eastern]</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


                    </div>
                </div>
            </div>

            
            <div class="clearer"></div>
        </div>
    </div>
</div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="timedeltas.html" title="Time Deltas"
             >next</a> |</li>
        <li class="right" >
          <a href="reshaping.html" title="Reshaping and Pivot Tables"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pandas 0.22.0 documentation</a> &#187;</li> 
      </ul>
    </div>
<style type="text/css">
    .scrollToTop {
        text-align: center;
        font-weight: bold;
        position: fixed;
        bottom: 60px;
        right: 40px;
        display: none;
    }
</style>
<a href="#" class="scrollToTop">Scroll To Top</a>
<script type="text/javascript">
$(document).ready(function() {
    //Check to see if the window is top if not then display button
    $(window).scroll(function() {
        if ($(this).scrollTop() > 200) {
            $('.scrollToTop').fadeIn();
        } else {
            $('.scrollToTop').fadeOut();
        }
    });

    //Click event to scroll to top
    $('.scrollToTop').click(function() {
        $('html, body').animate({
            scrollTop: 0
        }, 500);
        return false;
    });
});
</script>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-27880019-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

  </body>
</html>